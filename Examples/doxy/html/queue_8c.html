<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NUCLEO-G0B1RE Examples: NUCLEO-G0B1RE/FreeRTOS_Queues/Middlewares/Third_Party/FreeRTOS/Source/queue.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">NUCLEO-G0B1RE Examples<span id="projectnumber">&#160;draft</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('queue_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">queue.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="_free_r_t_o_s_8h_source.html">FreeRTOS.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="task_8h_source.html">task.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="queue_8h_source.html">queue.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for queue.c:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c__incl.png" border="0" usemap="#a_n_u_c_l_e_o-_g0_b1_r_e_2_free_r_t_o_s___queues_2_middlewares_2_third___party_2_free_r_t_o_s_2_source_2queue_8c" alt=""/></div>
<map name="a_n_u_c_l_e_o-_g0_b1_r_e_2_free_r_t_o_s___queues_2_middlewares_2_third___party_2_free_r_t_o_s_2_source_2queue_8c" id="a_n_u_c_l_e_o-_g0_b1_r_e_2_free_r_t_o_s___queues_2_middlewares_2_third___party_2_free_r_t_o_s_2_source_2queue_8c">
<area shape="rect" title=" " alt="" coords="268,5,487,64"/>
<area shape="rect" title=" " alt="" coords="155,112,219,139"/>
<area shape="poly" title=" " alt="" coords="317,67,229,108,227,103,315,62"/>
<area shape="rect" title=" " alt="" coords="243,112,307,139"/>
<area shape="poly" title=" " alt="" coords="346,66,303,104,300,99,343,62"/>
<area shape="rect" href="_free_r_t_o_s_8h.html" title=" " alt="" coords="331,112,424,139"/>
<area shape="poly" title=" " alt="" coords="380,64,380,96,375,96,375,64"/>
<area shape="rect" href="task_8h.html" title=" " alt="" coords="542,187,600,213"/>
<area shape="poly" title=" " alt="" coords="413,62,547,175,543,179,410,66"/>
<area shape="rect" href="queue_8h.html" title=" " alt="" coords="528,112,595,139"/>
<area shape="poly" title=" " alt="" coords="439,62,523,103,521,107,436,67"/>
<area shape="rect" title=" " alt="" coords="5,187,73,213"/>
<area shape="poly" title=" " alt="" coords="331,139,88,189,87,184,330,134"/>
<area shape="rect" title=" " alt="" coords="96,187,161,213"/>
<area shape="poly" title=" " alt="" coords="335,142,176,188,175,182,333,137"/>
<area shape="rect" href="_free_r_t_o_s_config_8h.html" title=" " alt="" coords="185,187,314,213"/>
<area shape="poly" title=" " alt="" coords="357,142,287,181,284,176,354,137"/>
<area shape="rect" href="projdefs_8h.html" title=" " alt="" coords="339,187,416,213"/>
<area shape="poly" title=" " alt="" coords="380,139,380,171,375,171,375,139"/>
<area shape="rect" href="portable_8h.html" title=" " alt="" coords="440,187,518,213"/>
<area shape="poly" title=" " alt="" coords="397,137,450,175,447,179,394,141"/>
<area shape="rect" href="deprecated__definitions_8h.html" title=" " alt="" coords="185,261,346,288"/>
<area shape="poly" title=" " alt="" coords="443,216,318,258,316,253,441,211"/>
<area shape="rect" href="portmacro_8h.html" title=" " alt="" coords="370,261,460,288"/>
<area shape="poly" title=" " alt="" coords="470,216,438,251,434,248,466,212"/>
<area shape="rect" href="mpu__wrappers_8h.html" title=" " alt="" coords="485,261,601,288"/>
<area shape="poly" title=" " alt="" coords="492,212,524,248,520,251,488,216"/>
<area shape="rect" href="list_8h.html" title=" " alt="" coords="625,261,674,288"/>
<area shape="poly" title=" " alt="" coords="587,212,627,249,623,253,583,216"/>
<area shape="poly" title=" " alt="" coords="566,139,570,171,565,172,561,140"/>
</map>
</div>
</div>
<p><a href="queue_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_queue_pointers.html">QueuePointers</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_semaphore_data.html">SemaphoreData</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_queue_definition.html">QueueDefinition</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab622d8c674f2a417a666a7ed89109e79" id="r_ab622d8c674f2a417a666a7ed89109e79"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab622d8c674f2a417a666a7ed89109e79">MPU_WRAPPERS_INCLUDED_FROM_API_FILE</a></td></tr>
<tr class="separator:ab622d8c674f2a417a666a7ed89109e79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdb781ba6b38714cf41f7417de8fe6bf" id="r_acdb781ba6b38714cf41f7417de8fe6bf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acdb781ba6b38714cf41f7417de8fe6bf">queueUNLOCKED</a>&#160;&#160;&#160;( ( int8_t ) -1 )</td></tr>
<tr class="separator:acdb781ba6b38714cf41f7417de8fe6bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60a95aa91f84782416755f38616231fd" id="r_a60a95aa91f84782416755f38616231fd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a60a95aa91f84782416755f38616231fd">queueLOCKED_UNMODIFIED</a>&#160;&#160;&#160;( ( int8_t ) 0 )</td></tr>
<tr class="separator:a60a95aa91f84782416755f38616231fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe3f7afb2a02c085f2d634003902cbc0" id="r_afe3f7afb2a02c085f2d634003902cbc0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe3f7afb2a02c085f2d634003902cbc0">uxQueueType</a>&#160;&#160;&#160;pcHead</td></tr>
<tr class="separator:afe3f7afb2a02c085f2d634003902cbc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0799077a434aea43f5cca3cda3625aa8" id="r_a0799077a434aea43f5cca3cda3625aa8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0799077a434aea43f5cca3cda3625aa8">queueQUEUE_IS_MUTEX</a>&#160;&#160;&#160;NULL</td></tr>
<tr class="separator:a0799077a434aea43f5cca3cda3625aa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfb14d07644ad4da4bd2303105884227" id="r_adfb14d07644ad4da4bd2303105884227"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adfb14d07644ad4da4bd2303105884227">queueSEMAPHORE_QUEUE_ITEM_LENGTH</a>&#160;&#160;&#160;( ( <a class="el" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0 )</td></tr>
<tr class="separator:adfb14d07644ad4da4bd2303105884227"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a166c89c5c3a213c7e52283e024bb1d50" id="r_a166c89c5c3a213c7e52283e024bb1d50"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a166c89c5c3a213c7e52283e024bb1d50">queueMUTEX_GIVE_BLOCK_TIME</a>&#160;&#160;&#160;( ( <a class="el" href="portmacro_8h.html#aa69c48c6e902ce54f70886e6573c92a9">TickType_t</a> ) 0U )</td></tr>
<tr class="separator:a166c89c5c3a213c7e52283e024bb1d50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb4472163ac5b0e8ad72183d69387b81" id="r_adb4472163ac5b0e8ad72183d69387b81"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adb4472163ac5b0e8ad72183d69387b81">queueYIELD_IF_USING_PREEMPTION</a>()</td></tr>
<tr class="separator:adb4472163ac5b0e8ad72183d69387b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4efd14c0f4dee7f189ef2e4d9ce1f1b" id="r_ae4efd14c0f4dee7f189ef2e4d9ce1f1b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae4efd14c0f4dee7f189ef2e4d9ce1f1b">prvLockQueue</a>(pxQueue)</td></tr>
<tr class="separator:ae4efd14c0f4dee7f189ef2e4d9ce1f1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:afa576747932ccf4c923633fc6a46a0d8" id="r_afa576747932ccf4c923633fc6a46a0d8"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_queue_pointers.html">QueuePointers</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afa576747932ccf4c923633fc6a46a0d8">QueuePointers_t</a></td></tr>
<tr class="separator:afa576747932ccf4c923633fc6a46a0d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8806dcfc511df585a0b4daf54a9a909a" id="r_a8806dcfc511df585a0b4daf54a9a909a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_semaphore_data.html">SemaphoreData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8806dcfc511df585a0b4daf54a9a909a">SemaphoreData_t</a></td></tr>
<tr class="separator:a8806dcfc511df585a0b4daf54a9a909a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c73744015d2aad19ca749e89e747e2a" id="r_a3c73744015d2aad19ca749e89e747e2a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_queue_definition.html">QueueDefinition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3c73744015d2aad19ca749e89e747e2a">xQUEUE</a></td></tr>
<tr class="separator:a3c73744015d2aad19ca749e89e747e2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade16d14675fc1ac34af04a1162a6b883" id="r_ade16d14675fc1ac34af04a1162a6b883"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="#a3c73744015d2aad19ca749e89e747e2a">xQUEUE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ade16d14675fc1ac34af04a1162a6b883">Queue_t</a></td></tr>
<tr class="separator:ade16d14675fc1ac34af04a1162a6b883"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7297c84a7c770ed57567bad1d3e2faf6" id="r_a7297c84a7c770ed57567bad1d3e2faf6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7297c84a7c770ed57567bad1d3e2faf6">prvUnlockQueue</a> (<a class="el" href="#ade16d14675fc1ac34af04a1162a6b883">Queue_t</a> *const pxQueue) <a class="el" href="mpu__wrappers_8h.html#a4785c4f4a8c04b835139dcc2a6682078">PRIVILEGED_FUNCTION</a></td></tr>
<tr class="separator:a7297c84a7c770ed57567bad1d3e2faf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f21d4b7a21be0d109953120c93f6741" id="r_a8f21d4b7a21be0d109953120c93f6741"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8f21d4b7a21be0d109953120c93f6741">prvIsQueueEmpty</a> (const <a class="el" href="#ade16d14675fc1ac34af04a1162a6b883">Queue_t</a> *pxQueue) <a class="el" href="mpu__wrappers_8h.html#a4785c4f4a8c04b835139dcc2a6682078">PRIVILEGED_FUNCTION</a></td></tr>
<tr class="separator:a8f21d4b7a21be0d109953120c93f6741"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70546f6b48a8b715eae3dd84e0546045" id="r_a70546f6b48a8b715eae3dd84e0546045"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a70546f6b48a8b715eae3dd84e0546045">prvIsQueueFull</a> (const <a class="el" href="#ade16d14675fc1ac34af04a1162a6b883">Queue_t</a> *pxQueue) <a class="el" href="mpu__wrappers_8h.html#a4785c4f4a8c04b835139dcc2a6682078">PRIVILEGED_FUNCTION</a></td></tr>
<tr class="separator:a70546f6b48a8b715eae3dd84e0546045"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77098159b7735e0c27e27aa7072376c6" id="r_a77098159b7735e0c27e27aa7072376c6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a77098159b7735e0c27e27aa7072376c6">prvCopyDataToQueue</a> (<a class="el" href="#ade16d14675fc1ac34af04a1162a6b883">Queue_t</a> *const pxQueue, const void *pvItemToQueue, const <a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xPosition) <a class="el" href="mpu__wrappers_8h.html#a4785c4f4a8c04b835139dcc2a6682078">PRIVILEGED_FUNCTION</a></td></tr>
<tr class="separator:a77098159b7735e0c27e27aa7072376c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9a2e17b2b13d4878f7af1361437320e" id="r_ad9a2e17b2b13d4878f7af1361437320e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad9a2e17b2b13d4878f7af1361437320e">prvCopyDataFromQueue</a> (<a class="el" href="#ade16d14675fc1ac34af04a1162a6b883">Queue_t</a> *const pxQueue, void *const pvBuffer) <a class="el" href="mpu__wrappers_8h.html#a4785c4f4a8c04b835139dcc2a6682078">PRIVILEGED_FUNCTION</a></td></tr>
<tr class="separator:ad9a2e17b2b13d4878f7af1361437320e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f632268707981dea3f177f5fba36e22" id="r_a0f632268707981dea3f177f5fba36e22"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0f632268707981dea3f177f5fba36e22">prvInitialiseNewQueue</a> (const <a class="el" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxQueueLength, const <a class="el" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxItemSize, uint8_t *pucQueueStorage, const uint8_t ucQueueType, <a class="el" href="#ade16d14675fc1ac34af04a1162a6b883">Queue_t</a> *pxNewQueue) <a class="el" href="mpu__wrappers_8h.html#a4785c4f4a8c04b835139dcc2a6682078">PRIVILEGED_FUNCTION</a></td></tr>
<tr class="separator:a0f632268707981dea3f177f5fba36e22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e54273dbe3f56b8bdc8f7abee67a871" id="r_a5e54273dbe3f56b8bdc8f7abee67a871"><td class="memItemLeft" align="right" valign="top"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5e54273dbe3f56b8bdc8f7abee67a871">xQueueGenericReset</a> (<a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a> xQueue, <a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xNewQueue)</td></tr>
<tr class="separator:a5e54273dbe3f56b8bdc8f7abee67a871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb67c81366c00896b21cd826e07d885d" id="r_acb67c81366c00896b21cd826e07d885d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acb67c81366c00896b21cd826e07d885d">xQueueGenericSend</a> (<a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a> xQueue, const void *const pvItemToQueue, <a class="el" href="portmacro_8h.html#aa69c48c6e902ce54f70886e6573c92a9">TickType_t</a> xTicksToWait, const <a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xCopyPosition)</td></tr>
<tr class="separator:acb67c81366c00896b21cd826e07d885d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fb58b25eb396a5cf8e1688b7e1a56cb" id="r_a0fb58b25eb396a5cf8e1688b7e1a56cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0fb58b25eb396a5cf8e1688b7e1a56cb">xQueueGenericSendFromISR</a> (<a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a> xQueue, const void *const pvItemToQueue, <a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> *const pxHigherPriorityTaskWoken, const <a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xCopyPosition)</td></tr>
<tr class="separator:a0fb58b25eb396a5cf8e1688b7e1a56cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4df49fafb6ba4400ede6f2d07a40865f" id="r_a4df49fafb6ba4400ede6f2d07a40865f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4df49fafb6ba4400ede6f2d07a40865f">xQueueGiveFromISR</a> (<a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a> xQueue, <a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> *const pxHigherPriorityTaskWoken)</td></tr>
<tr class="separator:a4df49fafb6ba4400ede6f2d07a40865f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0a166f3b1219a5e37e31f8090d4800d" id="r_ad0a166f3b1219a5e37e31f8090d4800d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad0a166f3b1219a5e37e31f8090d4800d">xQueueReceive</a> (<a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a> xQueue, void *const pvBuffer, <a class="el" href="portmacro_8h.html#aa69c48c6e902ce54f70886e6573c92a9">TickType_t</a> xTicksToWait)</td></tr>
<tr class="separator:ad0a166f3b1219a5e37e31f8090d4800d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade45e48664e5ec17ea091f00cd34394f" id="r_ade45e48664e5ec17ea091f00cd34394f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ade45e48664e5ec17ea091f00cd34394f">xQueueSemaphoreTake</a> (<a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a> xQueue, <a class="el" href="portmacro_8h.html#aa69c48c6e902ce54f70886e6573c92a9">TickType_t</a> xTicksToWait)</td></tr>
<tr class="separator:ade45e48664e5ec17ea091f00cd34394f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f68e37e931bbf95440c8845f512e090" id="r_a8f68e37e931bbf95440c8845f512e090"><td class="memItemLeft" align="right" valign="top"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8f68e37e931bbf95440c8845f512e090">xQueuePeek</a> (<a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a> xQueue, void *const pvBuffer, <a class="el" href="portmacro_8h.html#aa69c48c6e902ce54f70886e6573c92a9">TickType_t</a> xTicksToWait)</td></tr>
<tr class="separator:a8f68e37e931bbf95440c8845f512e090"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac61ec62828e70ed35d18559a35550462" id="r_ac61ec62828e70ed35d18559a35550462"><td class="memItemLeft" align="right" valign="top"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac61ec62828e70ed35d18559a35550462">xQueueReceiveFromISR</a> (<a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a> xQueue, void *const pvBuffer, <a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> *const pxHigherPriorityTaskWoken)</td></tr>
<tr class="separator:ac61ec62828e70ed35d18559a35550462"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af67763957452955ac663c374d71278ce" id="r_af67763957452955ac663c374d71278ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af67763957452955ac663c374d71278ce">xQueuePeekFromISR</a> (<a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a> xQueue, void *const pvBuffer)</td></tr>
<tr class="separator:af67763957452955ac663c374d71278ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4158a6134c9d1c60ffdb18d279d475b1" id="r_a4158a6134c9d1c60ffdb18d279d475b1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4158a6134c9d1c60ffdb18d279d475b1">uxQueueMessagesWaiting</a> (const <a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a> xQueue)</td></tr>
<tr class="separator:a4158a6134c9d1c60ffdb18d279d475b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27d6fb77ce7a0b5a16f6471730d33201" id="r_a27d6fb77ce7a0b5a16f6471730d33201"><td class="memItemLeft" align="right" valign="top"><a class="el" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a27d6fb77ce7a0b5a16f6471730d33201">uxQueueSpacesAvailable</a> (const <a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a> xQueue)</td></tr>
<tr class="separator:a27d6fb77ce7a0b5a16f6471730d33201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5d110bc27c691ff8da238e0116bf92a" id="r_ad5d110bc27c691ff8da238e0116bf92a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad5d110bc27c691ff8da238e0116bf92a">uxQueueMessagesWaitingFromISR</a> (const <a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a> xQueue)</td></tr>
<tr class="separator:ad5d110bc27c691ff8da238e0116bf92a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35c0b4f9a0e940cb3a86ca4c5e84c41c" id="r_a35c0b4f9a0e940cb3a86ca4c5e84c41c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a35c0b4f9a0e940cb3a86ca4c5e84c41c">vQueueDelete</a> (<a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a> xQueue)</td></tr>
<tr class="separator:a35c0b4f9a0e940cb3a86ca4c5e84c41c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d076f57a56ef50315418f8bbfba96fd" id="r_a7d076f57a56ef50315418f8bbfba96fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7d076f57a56ef50315418f8bbfba96fd">xQueueIsQueueEmptyFromISR</a> (const <a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a> xQueue)</td></tr>
<tr class="separator:a7d076f57a56ef50315418f8bbfba96fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76bbe8ebd21b3e89784e865d06f1058c" id="r_a76bbe8ebd21b3e89784e865d06f1058c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a76bbe8ebd21b3e89784e865d06f1058c">xQueueIsQueueFullFromISR</a> (const <a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a> xQueue)</td></tr>
<tr class="separator:a76bbe8ebd21b3e89784e865d06f1058c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ab622d8c674f2a417a666a7ed89109e79" name="ab622d8c674f2a417a666a7ed89109e79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab622d8c674f2a417a666a7ed89109e79">&#9670;&#160;</a></span>MPU_WRAPPERS_INCLUDED_FROM_API_FILE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MPU_WRAPPERS_INCLUDED_FROM_API_FILE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00034">34</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
<a id="ae4efd14c0f4dee7f189ef2e4d9ce1f1b" name="ae4efd14c0f4dee7f189ef2e4d9ce1f1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4efd14c0f4dee7f189ef2e4d9ce1f1b">&#9670;&#160;</a></span>prvLockQueue</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define prvLockQueue</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname">pxQueue</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <a class="code hl_define" href="task_8h.html#ab7bf0ae866292ba8296091a9d5209689">taskENTER_CRITICAL</a>();                 \</div>
<div class="line">  {                           \</div>
<div class="line">    if( ( pxQueue )-&gt;cRxLock == <a class="code hl_define" href="#acdb781ba6b38714cf41f7417de8fe6bf">queueUNLOCKED</a> )     \</div>
<div class="line">    {                         \</div>
<div class="line">      ( pxQueue )-&gt;cRxLock = <a class="code hl_define" href="#a60a95aa91f84782416755f38616231fd">queueLOCKED_UNMODIFIED</a>;  \</div>
<div class="line">    }                         \</div>
<div class="line">    if( ( pxQueue )-&gt;cTxLock == <a class="code hl_define" href="#acdb781ba6b38714cf41f7417de8fe6bf">queueUNLOCKED</a> )     \</div>
<div class="line">    {                         \</div>
<div class="line">      ( pxQueue )-&gt;cTxLock = <a class="code hl_define" href="#a60a95aa91f84782416755f38616231fd">queueLOCKED_UNMODIFIED</a>;  \</div>
<div class="line">    }                         \</div>
<div class="line">  }                           \</div>
<div class="line">  taskEXIT_CRITICAL()</div>
<div class="ttc" id="aqueue_8c_html_a60a95aa91f84782416755f38616231fd"><div class="ttname"><a href="#a60a95aa91f84782416755f38616231fd">queueLOCKED_UNMODIFIED</a></div><div class="ttdeci">#define queueLOCKED_UNMODIFIED</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00053">queue.c:53</a></div></div>
<div class="ttc" id="aqueue_8c_html_acdb781ba6b38714cf41f7417de8fe6bf"><div class="ttname"><a href="#acdb781ba6b38714cf41f7417de8fe6bf">queueUNLOCKED</a></div><div class="ttdeci">#define queueUNLOCKED</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00052">queue.c:52</a></div></div>
<div class="ttc" id="atask_8h_html_ab7bf0ae866292ba8296091a9d5209689"><div class="ttname"><a href="task_8h.html#ab7bf0ae866292ba8296091a9d5209689">taskENTER_CRITICAL</a></div><div class="ttdeci">#define taskENTER_CRITICAL()</div><div class="ttdef"><b>Definition</b> <a href="task_8h_source.html#l00187">task.h:187</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00240">240</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  240</span><span class="preprocessor">#define prvLockQueue( pxQueue )               \</span></div>
<div class="line"><span class="lineno">  241</span><span class="preprocessor">  taskENTER_CRITICAL();                 \</span></div>
<div class="line"><span class="lineno">  242</span><span class="preprocessor">  {                           \</span></div>
<div class="line"><span class="lineno">  243</span><span class="preprocessor">    if( ( pxQueue )-&gt;cRxLock == queueUNLOCKED )     \</span></div>
<div class="line"><span class="lineno">  244</span><span class="preprocessor">    {                         \</span></div>
<div class="line"><span class="lineno">  245</span><span class="preprocessor">      ( pxQueue )-&gt;cRxLock = queueLOCKED_UNMODIFIED;  \</span></div>
<div class="line"><span class="lineno">  246</span><span class="preprocessor">    }                         \</span></div>
<div class="line"><span class="lineno">  247</span><span class="preprocessor">    if( ( pxQueue )-&gt;cTxLock == queueUNLOCKED )     \</span></div>
<div class="line"><span class="lineno">  248</span><span class="preprocessor">    {                         \</span></div>
<div class="line"><span class="lineno">  249</span><span class="preprocessor">      ( pxQueue )-&gt;cTxLock = queueLOCKED_UNMODIFIED;  \</span></div>
<div class="line"><span class="lineno">  250</span><span class="preprocessor">    }                         \</span></div>
<div class="line"><span class="lineno">  251</span><span class="preprocessor">  }                           \</span></div>
<div class="line"><span class="lineno">  252</span><span class="preprocessor">  taskEXIT_CRITICAL()</span></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="queue_8c_source.html#l00740">xQueueGenericSend()</a>, <a class="el" href="queue_8c_source.html#l01636">xQueuePeek()</a>, <a class="el" href="queue_8c_source.html#l01277">xQueueReceive()</a>, and <a class="el" href="queue_8c_source.html#l01418">xQueueSemaphoreTake()</a>.</p>

</div>
</div>
<a id="a60a95aa91f84782416755f38616231fd" name="a60a95aa91f84782416755f38616231fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60a95aa91f84782416755f38616231fd">&#9670;&#160;</a></span>queueLOCKED_UNMODIFIED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define queueLOCKED_UNMODIFIED&#160;&#160;&#160;( ( int8_t ) 0 )</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00053">53</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="queue_8c_source.html#l02171">prvUnlockQueue()</a>.</p>

</div>
</div>
<a id="a166c89c5c3a213c7e52283e024bb1d50" name="a166c89c5c3a213c7e52283e024bb1d50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a166c89c5c3a213c7e52283e024bb1d50">&#9670;&#160;</a></span>queueMUTEX_GIVE_BLOCK_TIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define queueMUTEX_GIVE_BLOCK_TIME&#160;&#160;&#160;( ( <a class="el" href="portmacro_8h.html#aa69c48c6e902ce54f70886e6573c92a9">TickType_t</a> ) 0U )</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00082">82</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
<a id="a0799077a434aea43f5cca3cda3625aa8" name="a0799077a434aea43f5cca3cda3625aa8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0799077a434aea43f5cca3cda3625aa8">&#9670;&#160;</a></span>queueQUEUE_IS_MUTEX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define queueQUEUE_IS_MUTEX&#160;&#160;&#160;NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00065">65</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="queue_8c_source.html#l02074">prvCopyDataToQueue()</a>, <a class="el" href="queue_8c_source.html#l01112">xQueueGiveFromISR()</a>, and <a class="el" href="queue_8c_source.html#l01418">xQueueSemaphoreTake()</a>.</p>

</div>
</div>
<a id="adfb14d07644ad4da4bd2303105884227" name="adfb14d07644ad4da4bd2303105884227"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfb14d07644ad4da4bd2303105884227">&#9670;&#160;</a></span>queueSEMAPHORE_QUEUE_ITEM_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define queueSEMAPHORE_QUEUE_ITEM_LENGTH&#160;&#160;&#160;( ( <a class="el" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0 )</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00081">81</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
<a id="acdb781ba6b38714cf41f7417de8fe6bf" name="acdb781ba6b38714cf41f7417de8fe6bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdb781ba6b38714cf41f7417de8fe6bf">&#9670;&#160;</a></span>queueUNLOCKED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define queueUNLOCKED&#160;&#160;&#160;( ( int8_t ) -1 )</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00052">52</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="queue_8c_source.html#l02171">prvUnlockQueue()</a>, <a class="el" href="queue_8c_source.html#l00255">xQueueGenericReset()</a>, <a class="el" href="queue_8c_source.html#l00950">xQueueGenericSendFromISR()</a>, <a class="el" href="queue_8c_source.html#l01112">xQueueGiveFromISR()</a>, and <a class="el" href="queue_8c_source.html#l01785">xQueueReceiveFromISR()</a>.</p>

</div>
</div>
<a id="adb4472163ac5b0e8ad72183d69387b81" name="adb4472163ac5b0e8ad72183d69387b81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb4472163ac5b0e8ad72183d69387b81">&#9670;&#160;</a></span>queueYIELD_IF_USING_PREEMPTION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define queueYIELD_IF_USING_PREEMPTION</td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00087">87</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="queue_8c_source.html#l00255">xQueueGenericReset()</a>, <a class="el" href="queue_8c_source.html#l00740">xQueueGenericSend()</a>, <a class="el" href="queue_8c_source.html#l01636">xQueuePeek()</a>, <a class="el" href="queue_8c_source.html#l01277">xQueueReceive()</a>, and <a class="el" href="queue_8c_source.html#l01418">xQueueSemaphoreTake()</a>.</p>

</div>
</div>
<a id="afe3f7afb2a02c085f2d634003902cbc0" name="afe3f7afb2a02c085f2d634003902cbc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe3f7afb2a02c085f2d634003902cbc0">&#9670;&#160;</a></span>uxQueueType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define uxQueueType&#160;&#160;&#160;pcHead</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00064">64</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ade16d14675fc1ac34af04a1162a6b883" name="ade16d14675fc1ac34af04a1162a6b883"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade16d14675fc1ac34af04a1162a6b883">&#9670;&#160;</a></span>Queue_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="#a3c73744015d2aad19ca749e89e747e2a">xQUEUE</a> <a class="el" href="#ade16d14675fc1ac34af04a1162a6b883">Queue_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00135">135</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>

</div>
</div>
<a id="afa576747932ccf4c923633fc6a46a0d8" name="afa576747932ccf4c923633fc6a46a0d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa576747932ccf4c923633fc6a46a0d8">&#9670;&#160;</a></span>QueuePointers_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_queue_pointers.html">QueuePointers</a> <a class="el" href="#afa576747932ccf4c923633fc6a46a0d8">QueuePointers_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8806dcfc511df585a0b4daf54a9a909a" name="a8806dcfc511df585a0b4daf54a9a909a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8806dcfc511df585a0b4daf54a9a909a">&#9670;&#160;</a></span>SemaphoreData_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_semaphore_data.html">SemaphoreData</a> <a class="el" href="#a8806dcfc511df585a0b4daf54a9a909a">SemaphoreData_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3c73744015d2aad19ca749e89e747e2a" name="a3c73744015d2aad19ca749e89e747e2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c73744015d2aad19ca749e89e747e2a">&#9670;&#160;</a></span>xQUEUE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_queue_definition.html">QueueDefinition</a> <a class="el" href="#a3c73744015d2aad19ca749e89e747e2a">xQUEUE</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad9a2e17b2b13d4878f7af1361437320e" name="ad9a2e17b2b13d4878f7af1361437320e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9a2e17b2b13d4878f7af1361437320e">&#9670;&#160;</a></span>prvCopyDataFromQueue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvCopyDataFromQueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#ade16d14675fc1ac34af04a1162a6b883">Queue_t</a> *const</td>          <td class="paramname"><span class="paramname"><em>pxQueue</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *const</td>          <td class="paramname"><span class="paramname"><em>pvBuffer</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l02153">2153</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2154</span>{</div>
<div class="line"><span class="lineno"> 2155</span>  <span class="keywordflow">if</span>( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a> != ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0 )</div>
<div class="line"><span class="lineno"> 2156</span>  {</div>
<div class="line"><span class="lineno"> 2157</span>    pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#af381d02bbe6bc4a77934c6fd97598913">pcReadFrom</a> += pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a>; <span class="comment">/*lint !e9016 Pointer arithmetic on char types ok, especially in this use case where it is the clearest way of conveying intent. */</span></div>
<div class="line"><span class="lineno"> 2158</span>    <span class="keywordflow">if</span>( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#af381d02bbe6bc4a77934c6fd97598913">pcReadFrom</a> &gt;= pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#acbbdc8eb47b348a824c7bced41512a38">pcTail</a> ) <span class="comment">/*lint !e946 MISRA exception justified as use of the relational operator is the cleanest solutions. */</span></div>
<div class="line"><span class="lineno"> 2159</span>    {</div>
<div class="line"><span class="lineno"> 2160</span>      pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#af381d02bbe6bc4a77934c6fd97598913">pcReadFrom</a> = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a487dc7e43b380c58212cba72bc33e0ed">pcHead</a>;</div>
<div class="line"><span class="lineno"> 2161</span>    }</div>
<div class="line"><span class="lineno"> 2162</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2163</span>    {</div>
<div class="line"><span class="lineno"> 2164</span>      <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 2165</span>    }</div>
<div class="line"><span class="lineno"> 2166</span>    ( void ) memcpy( ( <span class="keywordtype">void</span> * ) pvBuffer, ( <span class="keywordtype">void</span> * ) pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#af381d02bbe6bc4a77934c6fd97598913">pcReadFrom</a>, ( <span class="keywordtype">size_t</span> ) pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a> ); <span class="comment">/*lint !e961 !e418 !e9087 MISRA exception as the casts are only redundant for some ports.  Also previous logic ensures a null pointer can only be passed to memcpy() when the count is 0.  Cast to void required by function signature and safe as no alignment requirement and copy length specified in bytes. */</span></div>
<div class="line"><span class="lineno"> 2167</span>  }</div>
<div class="line"><span class="lineno"> 2168</span>}</div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_ac77e2af1a6b0d38fbab36cf2aa96f1a8"><div class="ttname"><a href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a></div><div class="ttdeci">#define mtCOVERAGE_TEST_MARKER()</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00814">FreeRTOS.h:814</a></div></div>
<div class="ttc" id="aportmacro_8h_html_a646f89d4298e4f5afd522202b11cb2e6"><div class="ttname"><a href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a></div><div class="ttdeci">unsigned long UBaseType_t</div><div class="ttdef"><b>Definition</b> <a href="portmacro_8h_source.html#l00057">portmacro.h:57</a></div></div>
<div class="ttc" id="astruct_queue_definition_html_a487dc7e43b380c58212cba72bc33e0ed"><div class="ttname"><a href="struct_queue_definition.html#a487dc7e43b380c58212cba72bc33e0ed">QueueDefinition::pcHead</a></div><div class="ttdeci">int8_t * pcHead</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00099">queue.c:99</a></div></div>
<div class="ttc" id="astruct_queue_definition_html_a81bb7d3826909244baa9debf5a55abb0"><div class="ttname"><a href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">QueueDefinition::uxItemSize</a></div><div class="ttdeci">UBaseType_t uxItemSize</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00113">queue.c:113</a></div></div>
<div class="ttc" id="astruct_queue_definition_html_a93a8f29e573aaa9cbbff7d6f2957ee81"><div class="ttname"><a href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">QueueDefinition::u</a></div><div class="ttdeci">union QueueDefinition::@3 u</div></div>
<div class="ttc" id="astruct_queue_definition_html_aea4a2daf33054ff6b535f158bd4007f0"><div class="ttname"><a href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">QueueDefinition::xQueue</a></div><div class="ttdeci">QueuePointers_t xQueue</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00104">queue.c:104</a></div></div>
<div class="ttc" id="astruct_queue_pointers_html_acbbdc8eb47b348a824c7bced41512a38"><div class="ttname"><a href="struct_queue_pointers.html#acbbdc8eb47b348a824c7bced41512a38">QueuePointers::pcTail</a></div><div class="ttdeci">int8_t * pcTail</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00069">queue.c:69</a></div></div>
<div class="ttc" id="astruct_queue_pointers_html_af381d02bbe6bc4a77934c6fd97598913"><div class="ttname"><a href="struct_queue_pointers.html#af381d02bbe6bc4a77934c6fd97598913">QueuePointers::pcReadFrom</a></div><div class="ttdeci">int8_t * pcReadFrom</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00070">queue.c:70</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_8h_source.html#l00814">mtCOVERAGE_TEST_MARKER</a>, <a class="el" href="queue_8c_source.html#l00099">QueueDefinition::pcHead</a>, <a class="el" href="queue_8c_source.html#l00070">QueuePointers::pcReadFrom</a>, <a class="el" href="queue_8c_source.html#l00069">QueuePointers::pcTail</a>, <a class="el" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">QueueDefinition::u</a>, <a class="el" href="queue_8c_source.html#l00113">QueueDefinition::uxItemSize</a>, and <a class="el" href="queue_8c_source.html#l00104">QueueDefinition::xQueue</a>.</p>

<p class="reference">Referenced by <a class="el" href="queue_8c_source.html#l01636">xQueuePeek()</a>, <a class="el" href="queue_8c_source.html#l01876">xQueuePeekFromISR()</a>, <a class="el" href="queue_8c_source.html#l01277">xQueueReceive()</a>, and <a class="el" href="queue_8c_source.html#l01785">xQueueReceiveFromISR()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_ad9a2e17b2b13d4878f7af1361437320e_icgraph.png" border="0" usemap="#aqueue_8c_ad9a2e17b2b13d4878f7af1361437320e_icgraph" alt=""/></div>
<map name="aqueue_8c_ad9a2e17b2b13d4878f7af1361437320e_icgraph" id="aqueue_8c_ad9a2e17b2b13d4878f7af1361437320e_icgraph">
<area shape="rect" title=" " alt="" coords="728,81,890,108"/>
<area shape="rect" href="queue_8c.html#a8f68e37e931bbf95440c8845f512e090" title=" " alt="" coords="550,5,647,32"/>
<area shape="poly" title=" " alt="" coords="759,77,679,47,645,35,646,30,681,41,761,72"/>
<area shape="rect" href="queue_8c.html#af67763957452955ac663c374d71278ce" title=" " alt="" coords="525,56,672,83"/>
<area shape="poly" title=" " alt="" coords="712,86,672,81,673,76,713,80"/>
<area shape="rect" href="queue_8c.html#ad0a166f3b1219a5e37e31f8090d4800d" title=" " alt="" coords="543,107,654,133"/>
<area shape="poly" title=" " alt="" coords="712,109,655,116,654,111,712,104"/>
<area shape="rect" href="queue_8c.html#ac61ec62828e70ed35d18559a35550462" title=" " alt="" coords="517,157,680,184"/>
<area shape="poly" title=" " alt="" coords="761,117,681,148,646,159,645,154,679,143,759,112"/>
<area shape="rect" href="cmsis__os2_8c.html#ad90d4959466a7a65105061da8256ab9e" title="Get a Message from a Queue or timeout if Queue is empty." alt="" coords="322,132,469,159"/>
<area shape="poly" title=" " alt="" coords="528,131,470,139,469,133,527,126"/>
<area shape="rect" href="_free_r_t_o_s___queues_2_src_2main_8c.html#a0322cad3bd0e264bdf2104b17b6d971d" title="Function implementing the MessageQueueCon thread." alt="" coords="103,132,274,159"/>
<area shape="poly" title=" " alt="" coords="306,148,274,148,274,143,306,143"/>
<area shape="rect" href="_free_r_t_o_s___queues_2_src_2main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,132,55,159"/>
<area shape="poly" title=" " alt="" coords="87,148,55,148,55,143,87,143"/>
<area shape="poly" title=" " alt="" coords="501,161,469,157,470,152,502,156"/>
</map>
</div>

</div>
</div>
<a id="a77098159b7735e0c27e27aa7072376c6" name="a77098159b7735e0c27e27aa7072376c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77098159b7735e0c27e27aa7072376c6">&#9670;&#160;</a></span>prvCopyDataToQueue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> prvCopyDataToQueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#ade16d14675fc1ac34af04a1162a6b883">Queue_t</a> *const</td>          <td class="paramname"><span class="paramname"><em>pxQueue</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>pvItemToQueue</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a></td>          <td class="paramname"><span class="paramname"><em>xPosition</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l02074">2074</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2075</span>{</div>
<div class="line"><span class="lineno"> 2076</span><a class="code hl_typedef" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xReturn = <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a>;</div>
<div class="line"><span class="lineno"> 2077</span><a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxMessagesWaiting;</div>
<div class="line"><span class="lineno"> 2078</span> </div>
<div class="line"><span class="lineno"> 2079</span>  <span class="comment">/* This function is called from a critical section. */</span></div>
<div class="line"><span class="lineno"> 2080</span> </div>
<div class="line"><span class="lineno"> 2081</span>  uxMessagesWaiting = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a>;</div>
<div class="line"><span class="lineno"> 2082</span> </div>
<div class="line"><span class="lineno"> 2083</span>  <span class="keywordflow">if</span>( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a> == ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0 )</div>
<div class="line"><span class="lineno"> 2084</span>  {</div>
<div class="line"><span class="lineno"> 2085</span><span class="preprocessor">    #if ( configUSE_MUTEXES == 1 )</span></div>
<div class="line"><span class="lineno"> 2086</span>    {</div>
<div class="line"><span class="lineno"> 2087</span>      <span class="keywordflow">if</span>( pxQueue-&gt;uxQueueType == <a class="code hl_define" href="#a0799077a434aea43f5cca3cda3625aa8">queueQUEUE_IS_MUTEX</a> )</div>
<div class="line"><span class="lineno"> 2088</span>      {</div>
<div class="line"><span class="lineno"> 2089</span>        <span class="comment">/* The mutex is no longer being held. */</span></div>
<div class="line"><span class="lineno"> 2090</span>        xReturn = <a class="code hl_function" href="task_8h.html#a02fe2e1419fd6c35f75a1357c5e5ce22">xTaskPriorityDisinherit</a>( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#adb2c0818274974553c619ff953b6f477">xSemaphore</a>.<a class="code hl_variable" href="struct_semaphore_data.html#ab1ed54c7b39dc45b3c310fae7ad08693">xMutexHolder</a> );</div>
<div class="line"><span class="lineno"> 2091</span>        pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#adb2c0818274974553c619ff953b6f477">xSemaphore</a>.<a class="code hl_variable" href="struct_semaphore_data.html#ab1ed54c7b39dc45b3c310fae7ad08693">xMutexHolder</a> = NULL;</div>
<div class="line"><span class="lineno"> 2092</span>      }</div>
<div class="line"><span class="lineno"> 2093</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2094</span>      {</div>
<div class="line"><span class="lineno"> 2095</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 2096</span>      }</div>
<div class="line"><span class="lineno"> 2097</span>    }</div>
<div class="line"><span class="lineno"> 2098</span><span class="preprocessor">    #endif </span><span class="comment">/* configUSE_MUTEXES */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 2099</span>  }</div>
<div class="line"><span class="lineno"> 2100</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span>( xPosition == <a class="code hl_define" href="queue_8h.html#a4d78fa863fbeb90425a2dda08fae8b12">queueSEND_TO_BACK</a> )</div>
<div class="line"><span class="lineno"> 2101</span>  {</div>
<div class="line"><span class="lineno"> 2102</span>    ( void ) memcpy( ( <span class="keywordtype">void</span> * ) pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#abdf13cc013c8488848cee3fce4f0fed3">pcWriteTo</a>, pvItemToQueue, ( size_t ) pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a> ); <span class="comment">/*lint !e961 !e418 !e9087 MISRA exception as the casts are only redundant for some ports, plus previous logic ensures a null pointer can only be passed to memcpy() if the copy size is 0.  Cast to void required by function signature and safe as no alignment requirement and copy length specified in bytes. */</span></div>
<div class="line"><span class="lineno"> 2103</span>    pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#abdf13cc013c8488848cee3fce4f0fed3">pcWriteTo</a> += pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a>; <span class="comment">/*lint !e9016 Pointer arithmetic on char types ok, especially in this use case where it is the clearest way of conveying intent. */</span></div>
<div class="line"><span class="lineno"> 2104</span>    <span class="keywordflow">if</span>( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#abdf13cc013c8488848cee3fce4f0fed3">pcWriteTo</a> &gt;= pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#acbbdc8eb47b348a824c7bced41512a38">pcTail</a> ) <span class="comment">/*lint !e946 MISRA exception justified as comparison of pointers is the cleanest solution. */</span></div>
<div class="line"><span class="lineno"> 2105</span>    {</div>
<div class="line"><span class="lineno"> 2106</span>      pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#abdf13cc013c8488848cee3fce4f0fed3">pcWriteTo</a> = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a487dc7e43b380c58212cba72bc33e0ed">pcHead</a>;</div>
<div class="line"><span class="lineno"> 2107</span>    }</div>
<div class="line"><span class="lineno"> 2108</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2109</span>    {</div>
<div class="line"><span class="lineno"> 2110</span>      <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 2111</span>    }</div>
<div class="line"><span class="lineno"> 2112</span>  }</div>
<div class="line"><span class="lineno"> 2113</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2114</span>  {</div>
<div class="line"><span class="lineno"> 2115</span>    ( void ) memcpy( ( <span class="keywordtype">void</span> * ) pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#af381d02bbe6bc4a77934c6fd97598913">pcReadFrom</a>, pvItemToQueue, ( size_t ) pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a> ); <span class="comment">/*lint !e961 !e9087 !e418 MISRA exception as the casts are only redundant for some ports.  Cast to void required by function signature and safe as no alignment requirement and copy length specified in bytes.  Assert checks null pointer only used when length is 0. */</span></div>
<div class="line"><span class="lineno"> 2116</span>    pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#af381d02bbe6bc4a77934c6fd97598913">pcReadFrom</a> -= pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a>;</div>
<div class="line"><span class="lineno"> 2117</span>    <span class="keywordflow">if</span>( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#af381d02bbe6bc4a77934c6fd97598913">pcReadFrom</a> &lt; pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a487dc7e43b380c58212cba72bc33e0ed">pcHead</a> ) <span class="comment">/*lint !e946 MISRA exception justified as comparison of pointers is the cleanest solution. */</span></div>
<div class="line"><span class="lineno"> 2118</span>    {</div>
<div class="line"><span class="lineno"> 2119</span>      pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#af381d02bbe6bc4a77934c6fd97598913">pcReadFrom</a> = ( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#acbbdc8eb47b348a824c7bced41512a38">pcTail</a> - pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a> );</div>
<div class="line"><span class="lineno"> 2120</span>    }</div>
<div class="line"><span class="lineno"> 2121</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2122</span>    {</div>
<div class="line"><span class="lineno"> 2123</span>      <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 2124</span>    }</div>
<div class="line"><span class="lineno"> 2125</span> </div>
<div class="line"><span class="lineno"> 2126</span>    <span class="keywordflow">if</span>( xPosition == <a class="code hl_define" href="queue_8h.html#a5bb1c4a46d4b08b6d35cf586983476ef">queueOVERWRITE</a> )</div>
<div class="line"><span class="lineno"> 2127</span>    {</div>
<div class="line"><span class="lineno"> 2128</span>      <span class="keywordflow">if</span>( uxMessagesWaiting &gt; ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0 )</div>
<div class="line"><span class="lineno"> 2129</span>      {</div>
<div class="line"><span class="lineno"> 2130</span>        <span class="comment">/* An item is not being added but overwritten, so subtract</span></div>
<div class="line"><span class="lineno"> 2131</span><span class="comment">        one from the recorded number of items in the queue so when</span></div>
<div class="line"><span class="lineno"> 2132</span><span class="comment">        one is added again below the number of recorded items remains</span></div>
<div class="line"><span class="lineno"> 2133</span><span class="comment">        correct. */</span></div>
<div class="line"><span class="lineno"> 2134</span>        --uxMessagesWaiting;</div>
<div class="line"><span class="lineno"> 2135</span>      }</div>
<div class="line"><span class="lineno"> 2136</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2137</span>      {</div>
<div class="line"><span class="lineno"> 2138</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 2139</span>      }</div>
<div class="line"><span class="lineno"> 2140</span>    }</div>
<div class="line"><span class="lineno"> 2141</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2142</span>    {</div>
<div class="line"><span class="lineno"> 2143</span>      <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 2144</span>    }</div>
<div class="line"><span class="lineno"> 2145</span>  }</div>
<div class="line"><span class="lineno"> 2146</span> </div>
<div class="line"><span class="lineno"> 2147</span>  pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a> = uxMessagesWaiting + ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 1;</div>
<div class="line"><span class="lineno"> 2148</span> </div>
<div class="line"><span class="lineno"> 2149</span>  <span class="keywordflow">return</span> xReturn;</div>
<div class="line"><span class="lineno"> 2150</span>}</div>
<div class="ttc" id="aportmacro_8h_html_a46fb21e00ae0729d7515c0fbf2269796"><div class="ttname"><a href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a></div><div class="ttdeci">long BaseType_t</div><div class="ttdef"><b>Definition</b> <a href="portmacro_8h_source.html#l00056">portmacro.h:56</a></div></div>
<div class="ttc" id="aprojdefs_8h_html_aa56260e937e7e203026707e5ba944273"><div class="ttname"><a href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a></div><div class="ttdeci">#define pdFALSE</div><div class="ttdef"><b>Definition</b> <a href="projdefs_8h_source.html#l00044">projdefs.h:44</a></div></div>
<div class="ttc" id="aqueue_8c_html_a0799077a434aea43f5cca3cda3625aa8"><div class="ttname"><a href="#a0799077a434aea43f5cca3cda3625aa8">queueQUEUE_IS_MUTEX</a></div><div class="ttdeci">#define queueQUEUE_IS_MUTEX</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00065">queue.c:65</a></div></div>
<div class="ttc" id="aqueue_8h_html_a4d78fa863fbeb90425a2dda08fae8b12"><div class="ttname"><a href="queue_8h.html#a4d78fa863fbeb90425a2dda08fae8b12">queueSEND_TO_BACK</a></div><div class="ttdeci">#define queueSEND_TO_BACK</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00065">queue.h:65</a></div></div>
<div class="ttc" id="aqueue_8h_html_a5bb1c4a46d4b08b6d35cf586983476ef"><div class="ttname"><a href="queue_8h.html#a5bb1c4a46d4b08b6d35cf586983476ef">queueOVERWRITE</a></div><div class="ttdeci">#define queueOVERWRITE</div><div class="ttdef"><b>Definition</b> <a href="queue_8h_source.html#l00067">queue.h:67</a></div></div>
<div class="ttc" id="astruct_queue_definition_html_a12b07a40152d0f21488ca06d362d13d1"><div class="ttname"><a href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">QueueDefinition::uxMessagesWaiting</a></div><div class="ttdeci">volatile UBaseType_t uxMessagesWaiting</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00111">queue.c:111</a></div></div>
<div class="ttc" id="astruct_queue_definition_html_abdf13cc013c8488848cee3fce4f0fed3"><div class="ttname"><a href="struct_queue_definition.html#abdf13cc013c8488848cee3fce4f0fed3">QueueDefinition::pcWriteTo</a></div><div class="ttdeci">int8_t * pcWriteTo</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00100">queue.c:100</a></div></div>
<div class="ttc" id="astruct_queue_definition_html_adb2c0818274974553c619ff953b6f477"><div class="ttname"><a href="struct_queue_definition.html#adb2c0818274974553c619ff953b6f477">QueueDefinition::xSemaphore</a></div><div class="ttdeci">SemaphoreData_t xSemaphore</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00105">queue.c:105</a></div></div>
<div class="ttc" id="astruct_semaphore_data_html_ab1ed54c7b39dc45b3c310fae7ad08693"><div class="ttname"><a href="struct_semaphore_data.html#ab1ed54c7b39dc45b3c310fae7ad08693">SemaphoreData::xMutexHolder</a></div><div class="ttdeci">TaskHandle_t xMutexHolder</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00075">queue.c:75</a></div></div>
<div class="ttc" id="atask_8h_html_a02fe2e1419fd6c35f75a1357c5e5ce22"><div class="ttname"><a href="task_8h.html#a02fe2e1419fd6c35f75a1357c5e5ce22">xTaskPriorityDisinherit</a></div><div class="ttdeci">BaseType_t xTaskPriorityDisinherit(TaskHandle_t const pxMutexHolder) PRIVILEGED_FUNCTION</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_8h_source.html#l00814">mtCOVERAGE_TEST_MARKER</a>, <a class="el" href="queue_8c_source.html#l00099">QueueDefinition::pcHead</a>, <a class="el" href="queue_8c_source.html#l00070">QueuePointers::pcReadFrom</a>, <a class="el" href="queue_8c_source.html#l00069">QueuePointers::pcTail</a>, <a class="el" href="queue_8c_source.html#l00100">QueueDefinition::pcWriteTo</a>, <a class="el" href="projdefs_8h_source.html#l00044">pdFALSE</a>, <a class="el" href="queue_8h_source.html#l00067">queueOVERWRITE</a>, <a class="el" href="queue_8c_source.html#l00065">queueQUEUE_IS_MUTEX</a>, <a class="el" href="queue_8h_source.html#l00065">queueSEND_TO_BACK</a>, <a class="el" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">QueueDefinition::u</a>, <a class="el" href="queue_8c_source.html#l00113">QueueDefinition::uxItemSize</a>, <a class="el" href="queue_8c_source.html#l00111">QueueDefinition::uxMessagesWaiting</a>, <a class="el" href="queue_8c_source.html#l00075">SemaphoreData::xMutexHolder</a>, <a class="el" href="queue_8c_source.html#l00104">QueueDefinition::xQueue</a>, <a class="el" href="queue_8c_source.html#l00105">QueueDefinition::xSemaphore</a>, and <a class="el" href="task_8h.html#a02fe2e1419fd6c35f75a1357c5e5ce22">xTaskPriorityDisinherit()</a>.</p>

<p class="reference">Referenced by <a class="el" href="queue_8c_source.html#l00740">xQueueGenericSend()</a>, and <a class="el" href="queue_8c_source.html#l00950">xQueueGenericSendFromISR()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a77098159b7735e0c27e27aa7072376c6_cgraph.png" border="0" usemap="#aqueue_8c_a77098159b7735e0c27e27aa7072376c6_cgraph" alt=""/></div>
<map name="aqueue_8c_a77098159b7735e0c27e27aa7072376c6_cgraph" id="aqueue_8c_a77098159b7735e0c27e27aa7072376c6_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,152,32"/>
<area shape="rect" href="task_8h.html#a02fe2e1419fd6c35f75a1357c5e5ce22" title=" " alt="" coords="200,5,351,32"/>
<area shape="poly" title=" " alt="" coords="152,16,184,16,184,21,152,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a77098159b7735e0c27e27aa7072376c6_icgraph.png" border="0" usemap="#aqueue_8c_a77098159b7735e0c27e27aa7072376c6_icgraph" alt=""/></div>
<map name="aqueue_8c_a77098159b7735e0c27e27aa7072376c6_icgraph" id="aqueue_8c_a77098159b7735e0c27e27aa7072376c6_icgraph">
<area shape="rect" title=" " alt="" coords="246,31,392,57"/>
<area shape="rect" href="queue_8c.html#acb67c81366c00896b21cd826e07d885d" title=" " alt="" coords="31,5,172,32"/>
<area shape="poly" title=" " alt="" coords="230,36,172,30,173,24,231,31"/>
<area shape="rect" href="queue_8c.html#a0fb58b25eb396a5cf8e1688b7e1a56cb" title=" " alt="" coords="5,56,198,83"/>
<area shape="poly" title=" " alt="" coords="231,57,198,61,198,55,230,52"/>
</map>
</div>

</div>
</div>
<a id="a0f632268707981dea3f177f5fba36e22" name="a0f632268707981dea3f177f5fba36e22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f632268707981dea3f177f5fba36e22">&#9670;&#160;</a></span>prvInitialiseNewQueue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvInitialiseNewQueue </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a></td>          <td class="paramname"><span class="paramname"><em>uxQueueLength</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a></td>          <td class="paramname"><span class="paramname"><em>uxItemSize</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>pucQueueStorage</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t</td>          <td class="paramname"><span class="paramname"><em>ucQueueType</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ade16d14675fc1ac34af04a1162a6b883">Queue_t</a> *</td>          <td class="paramname"><span class="paramname"><em>pxNewQueue</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00422">422</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  423</span>{</div>
<div class="line"><span class="lineno">  424</span>  <span class="comment">/* Remove compiler warnings about unused parameters should</span></div>
<div class="line"><span class="lineno">  425</span><span class="comment">  configUSE_TRACE_FACILITY not be set to 1. */</span></div>
<div class="line"><span class="lineno">  426</span>  ( void ) ucQueueType;</div>
<div class="line"><span class="lineno">  427</span> </div>
<div class="line"><span class="lineno">  428</span>  <span class="keywordflow">if</span>( uxItemSize == ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0 )</div>
<div class="line"><span class="lineno">  429</span>  {</div>
<div class="line"><span class="lineno">  430</span>    <span class="comment">/* No RAM was allocated for the queue storage area, but PC head cannot</span></div>
<div class="line"><span class="lineno">  431</span><span class="comment">    be set to NULL because NULL is used as a key to say the queue is used as</span></div>
<div class="line"><span class="lineno">  432</span><span class="comment">    a mutex.  Therefore just set pcHead to point to the queue as a benign</span></div>
<div class="line"><span class="lineno">  433</span><span class="comment">    value that is known to be within the memory map. */</span></div>
<div class="line"><span class="lineno">  434</span>    pxNewQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a487dc7e43b380c58212cba72bc33e0ed">pcHead</a> = ( int8_t * ) pxNewQueue;</div>
<div class="line"><span class="lineno">  435</span>  }</div>
<div class="line"><span class="lineno">  436</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  437</span>  {</div>
<div class="line"><span class="lineno">  438</span>    <span class="comment">/* Set the head to the start of the queue storage area. */</span></div>
<div class="line"><span class="lineno">  439</span>    pxNewQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a487dc7e43b380c58212cba72bc33e0ed">pcHead</a> = ( int8_t * ) pucQueueStorage;</div>
<div class="line"><span class="lineno">  440</span>  }</div>
<div class="line"><span class="lineno">  441</span> </div>
<div class="line"><span class="lineno">  442</span>  <span class="comment">/* Initialise the queue members as described where the queue type is</span></div>
<div class="line"><span class="lineno">  443</span><span class="comment">  defined. */</span></div>
<div class="line"><span class="lineno">  444</span>  pxNewQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#ae80d17a812c669d4d41265b7f693988c">uxLength</a> = uxQueueLength;</div>
<div class="line"><span class="lineno">  445</span>  pxNewQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a> = uxItemSize;</div>
<div class="line"><span class="lineno">  446</span>  ( void ) <a class="code hl_function" href="#a5e54273dbe3f56b8bdc8f7abee67a871">xQueueGenericReset</a>( pxNewQueue, <a class="code hl_define" href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a> );</div>
<div class="line"><span class="lineno">  447</span> </div>
<div class="line"><span class="lineno">  448</span><span class="preprocessor">  #if ( configUSE_TRACE_FACILITY == 1 )</span></div>
<div class="line"><span class="lineno">  449</span>  {</div>
<div class="line"><span class="lineno">  450</span>    pxNewQueue-&gt;ucQueueType = ucQueueType;</div>
<div class="line"><span class="lineno">  451</span>  }</div>
<div class="line"><span class="lineno">  452</span><span class="preprocessor">  #endif </span><span class="comment">/* configUSE_TRACE_FACILITY */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  453</span> </div>
<div class="line"><span class="lineno">  454</span><span class="preprocessor">  #if( configUSE_QUEUE_SETS == 1 )</span></div>
<div class="line"><span class="lineno">  455</span>  {</div>
<div class="line"><span class="lineno">  456</span>    pxNewQueue-&gt;pxQueueSetContainer = NULL;</div>
<div class="line"><span class="lineno">  457</span>  }</div>
<div class="line"><span class="lineno">  458</span><span class="preprocessor">  #endif </span><span class="comment">/* configUSE_QUEUE_SETS */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  459</span> </div>
<div class="line"><span class="lineno">  460</span>  <a class="code hl_define" href="_free_r_t_o_s_8h.html#a62dcc27e040063ec72e174c985740f96">traceQUEUE_CREATE</a>( pxNewQueue );</div>
<div class="line"><span class="lineno">  461</span>}</div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_a62dcc27e040063ec72e174c985740f96"><div class="ttname"><a href="_free_r_t_o_s_8h.html#a62dcc27e040063ec72e174c985740f96">traceQUEUE_CREATE</a></div><div class="ttdeci">#define traceQUEUE_CREATE(pxNewQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00420">FreeRTOS.h:420</a></div></div>
<div class="ttc" id="aprojdefs_8h_html_af268cf937960eb029256bd9c4d949fbe"><div class="ttname"><a href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a></div><div class="ttdeci">#define pdTRUE</div><div class="ttdef"><b>Definition</b> <a href="projdefs_8h_source.html#l00045">projdefs.h:45</a></div></div>
<div class="ttc" id="aqueue_8c_html_a5e54273dbe3f56b8bdc8f7abee67a871"><div class="ttname"><a href="#a5e54273dbe3f56b8bdc8f7abee67a871">xQueueGenericReset</a></div><div class="ttdeci">BaseType_t xQueueGenericReset(QueueHandle_t xQueue, BaseType_t xNewQueue)</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00255">queue.c:255</a></div></div>
<div class="ttc" id="astruct_queue_definition_html_ae80d17a812c669d4d41265b7f693988c"><div class="ttname"><a href="struct_queue_definition.html#ae80d17a812c669d4d41265b7f693988c">QueueDefinition::uxLength</a></div><div class="ttdeci">UBaseType_t uxLength</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00112">queue.c:112</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="queue_8c_source.html#l00099">QueueDefinition::pcHead</a>, <a class="el" href="projdefs_8h_source.html#l00045">pdTRUE</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00420">traceQUEUE_CREATE</a>, <a class="el" href="queue_8c_source.html#l00113">QueueDefinition::uxItemSize</a>, <a class="el" href="queue_8c_source.html#l00112">QueueDefinition::uxLength</a>, and <a class="el" href="queue_8c_source.html#l00255">xQueueGenericReset()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a0f632268707981dea3f177f5fba36e22_cgraph.png" border="0" usemap="#aqueue_8c_a0f632268707981dea3f177f5fba36e22_cgraph" alt=""/></div>
<map name="aqueue_8c_a0f632268707981dea3f177f5fba36e22_cgraph" id="aqueue_8c_a0f632268707981dea3f177f5fba36e22_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,153,57"/>
<area shape="rect" href="queue_8c.html#a5e54273dbe3f56b8bdc8f7abee67a871" title=" " alt="" coords="201,31,346,57"/>
<area shape="poly" title=" " alt="" coords="153,41,185,41,185,47,153,47"/>
<area shape="rect" href="list_8c.html#aa0831d347bba16bfbe524f4faa790b9d" title=" " alt="" coords="440,5,534,32"/>
<area shape="poly" title=" " alt="" coords="346,33,424,23,424,29,347,38"/>
<area shape="rect" href="tasks_8c.html#a6d21c9054b62d8bc1bfb2724e11578d9" title=" " alt="" coords="394,56,579,83"/>
<area shape="poly" title=" " alt="" coords="347,50,379,54,378,59,346,55"/>
<area shape="rect" href="tasks_8c.html#ad1b2e4995f863a99cf980836efe330d7" title=" " alt="" coords="627,5,829,32"/>
<area shape="poly" title=" " alt="" coords="553,53,646,33,647,38,554,58"/>
<area shape="rect" href="list_8c.html#a274fdced76bbdd9d8a4c4840ded2920c" title=" " alt="" coords="677,56,779,83"/>
<area shape="poly" title=" " alt="" coords="580,67,661,67,661,72,580,72"/>
<area shape="rect" href="list_8c.html#a3240bc0f43fcf755be02bfc6de7dc6ef" title=" " alt="" coords="677,107,779,133"/>
<area shape="poly" title=" " alt="" coords="554,81,662,104,661,109,553,86"/>
</map>
</div>

</div>
</div>
<a id="a8f21d4b7a21be0d109953120c93f6741" name="a8f21d4b7a21be0d109953120c93f6741"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f21d4b7a21be0d109953120c93f6741">&#9670;&#160;</a></span>prvIsQueueEmpty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> prvIsQueueEmpty </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="#ade16d14675fc1ac34af04a1162a6b883">Queue_t</a> *</td>          <td class="paramname"><span class="paramname"><em>pxQueue</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l02291">2291</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2292</span>{</div>
<div class="line"><span class="lineno"> 2293</span><a class="code hl_typedef" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xReturn;</div>
<div class="line"><span class="lineno"> 2294</span> </div>
<div class="line"><span class="lineno"> 2295</span>  <a class="code hl_define" href="task_8h.html#ab7bf0ae866292ba8296091a9d5209689">taskENTER_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 2296</span>  {</div>
<div class="line"><span class="lineno"> 2297</span>    <span class="keywordflow">if</span>( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a> == ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> )  0 )</div>
<div class="line"><span class="lineno"> 2298</span>    {</div>
<div class="line"><span class="lineno"> 2299</span>      xReturn = <a class="code hl_define" href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a>;</div>
<div class="line"><span class="lineno"> 2300</span>    }</div>
<div class="line"><span class="lineno"> 2301</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2302</span>    {</div>
<div class="line"><span class="lineno"> 2303</span>      xReturn = <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a>;</div>
<div class="line"><span class="lineno"> 2304</span>    }</div>
<div class="line"><span class="lineno"> 2305</span>  }</div>
<div class="line"><span class="lineno"> 2306</span>  <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 2307</span> </div>
<div class="line"><span class="lineno"> 2308</span>  <span class="keywordflow">return</span> xReturn;</div>
<div class="line"><span class="lineno"> 2309</span>}</div>
<div class="ttc" id="atask_8h_html_aac8f36abc45ac4ee714bd6b81e3b1643"><div class="ttname"><a href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a></div><div class="ttdeci">#define taskEXIT_CRITICAL()</div><div class="ttdef"><b>Definition</b> <a href="task_8h_source.html#l00202">task.h:202</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="projdefs_8h_source.html#l00044">pdFALSE</a>, <a class="el" href="projdefs_8h_source.html#l00045">pdTRUE</a>, <a class="el" href="task_8h_source.html#l00187">taskENTER_CRITICAL</a>, <a class="el" href="task_8h_source.html#l00202">taskEXIT_CRITICAL</a>, and <a class="el" href="queue_8c_source.html#l00111">QueueDefinition::uxMessagesWaiting</a>.</p>

<p class="reference">Referenced by <a class="el" href="queue_8c_source.html#l01636">xQueuePeek()</a>, <a class="el" href="queue_8c_source.html#l01277">xQueueReceive()</a>, and <a class="el" href="queue_8c_source.html#l01418">xQueueSemaphoreTake()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a8f21d4b7a21be0d109953120c93f6741_icgraph.png" border="0" usemap="#aqueue_8c_a8f21d4b7a21be0d109953120c93f6741_icgraph" alt=""/></div>
<map name="aqueue_8c_a8f21d4b7a21be0d109953120c93f6741_icgraph" id="aqueue_8c_a8f21d4b7a21be0d109953120c93f6741_icgraph">
<area shape="rect" title=" " alt="" coords="726,56,849,83"/>
<area shape="rect" href="queue_8c.html#a8f68e37e931bbf95440c8845f512e090" title=" " alt="" coords="549,5,646,32"/>
<area shape="poly" title=" " alt="" coords="719,54,645,34,647,29,720,49"/>
<area shape="rect" href="queue_8c.html#ad0a166f3b1219a5e37e31f8090d4800d" title=" " alt="" coords="542,56,653,83"/>
<area shape="poly" title=" " alt="" coords="710,72,654,72,654,67,710,67"/>
<area shape="rect" href="queue_8c.html#ade45e48664e5ec17ea091f00cd34394f" title=" " alt="" coords="517,107,678,133"/>
<area shape="poly" title=" " alt="" coords="720,90,651,109,650,103,719,85"/>
<area shape="rect" href="cmsis__os2_8c.html#ad90d4959466a7a65105061da8256ab9e" title="Get a Message from a Queue or timeout if Queue is empty." alt="" coords="322,56,469,83"/>
<area shape="poly" title=" " alt="" coords="526,72,470,72,470,67,526,67"/>
<area shape="rect" href="_free_r_t_o_s___queues_2_src_2main_8c.html#a0322cad3bd0e264bdf2104b17b6d971d" title="Function implementing the MessageQueueCon thread." alt="" coords="103,56,274,83"/>
<area shape="poly" title=" " alt="" coords="306,72,274,72,274,67,306,67"/>
<area shape="rect" href="_free_r_t_o_s___queues_2_src_2main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,56,55,83"/>
<area shape="poly" title=" " alt="" coords="87,72,55,72,55,67,87,67"/>
</map>
</div>

</div>
</div>
<a id="a70546f6b48a8b715eae3dd84e0546045" name="a70546f6b48a8b715eae3dd84e0546045"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70546f6b48a8b715eae3dd84e0546045">&#9670;&#160;</a></span>prvIsQueueFull()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> prvIsQueueFull </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="#ade16d14675fc1ac34af04a1162a6b883">Queue_t</a> *</td>          <td class="paramname"><span class="paramname"><em>pxQueue</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l02331">2331</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2332</span>{</div>
<div class="line"><span class="lineno"> 2333</span><a class="code hl_typedef" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xReturn;</div>
<div class="line"><span class="lineno"> 2334</span> </div>
<div class="line"><span class="lineno"> 2335</span>  <a class="code hl_define" href="task_8h.html#ab7bf0ae866292ba8296091a9d5209689">taskENTER_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 2336</span>  {</div>
<div class="line"><span class="lineno"> 2337</span>    <span class="keywordflow">if</span>( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a> == pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#ae80d17a812c669d4d41265b7f693988c">uxLength</a> )</div>
<div class="line"><span class="lineno"> 2338</span>    {</div>
<div class="line"><span class="lineno"> 2339</span>      xReturn = <a class="code hl_define" href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a>;</div>
<div class="line"><span class="lineno"> 2340</span>    }</div>
<div class="line"><span class="lineno"> 2341</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2342</span>    {</div>
<div class="line"><span class="lineno"> 2343</span>      xReturn = <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a>;</div>
<div class="line"><span class="lineno"> 2344</span>    }</div>
<div class="line"><span class="lineno"> 2345</span>  }</div>
<div class="line"><span class="lineno"> 2346</span>  <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 2347</span> </div>
<div class="line"><span class="lineno"> 2348</span>  <span class="keywordflow">return</span> xReturn;</div>
<div class="line"><span class="lineno"> 2349</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="projdefs_8h_source.html#l00044">pdFALSE</a>, <a class="el" href="projdefs_8h_source.html#l00045">pdTRUE</a>, <a class="el" href="task_8h_source.html#l00187">taskENTER_CRITICAL</a>, <a class="el" href="task_8h_source.html#l00202">taskEXIT_CRITICAL</a>, <a class="el" href="queue_8c_source.html#l00112">QueueDefinition::uxLength</a>, and <a class="el" href="queue_8c_source.html#l00111">QueueDefinition::uxMessagesWaiting</a>.</p>

<p class="reference">Referenced by <a class="el" href="queue_8c_source.html#l00740">xQueueGenericSend()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a70546f6b48a8b715eae3dd84e0546045_icgraph.png" border="0" usemap="#aqueue_8c_a70546f6b48a8b715eae3dd84e0546045_icgraph" alt=""/></div>
<map name="aqueue_8c_a70546f6b48a8b715eae3dd84e0546045_icgraph" id="aqueue_8c_a70546f6b48a8b715eae3dd84e0546045_icgraph">
<area shape="rect" title=" " alt="" coords="195,5,301,32"/>
<area shape="rect" href="queue_8c.html#acb67c81366c00896b21cd826e07d885d" title=" " alt="" coords="5,5,147,32"/>
<area shape="poly" title=" " alt="" coords="179,21,147,21,147,16,179,16"/>
</map>
</div>

</div>
</div>
<a id="a7297c84a7c770ed57567bad1d3e2faf6" name="a7297c84a7c770ed57567bad1d3e2faf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7297c84a7c770ed57567bad1d3e2faf6">&#9670;&#160;</a></span>prvUnlockQueue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvUnlockQueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#ade16d14675fc1ac34af04a1162a6b883">Queue_t</a> *const</td>          <td class="paramname"><span class="paramname"><em>pxQueue</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l02171">2171</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2172</span>{</div>
<div class="line"><span class="lineno"> 2173</span>  <span class="comment">/* THIS FUNCTION MUST BE CALLED WITH THE SCHEDULER SUSPENDED. */</span></div>
<div class="line"><span class="lineno"> 2174</span> </div>
<div class="line"><span class="lineno"> 2175</span>  <span class="comment">/* The lock counts contains the number of extra data items placed or</span></div>
<div class="line"><span class="lineno"> 2176</span><span class="comment">  removed from the queue while the queue was locked.  When a queue is</span></div>
<div class="line"><span class="lineno"> 2177</span><span class="comment">  locked items can be added or removed, but the event lists cannot be</span></div>
<div class="line"><span class="lineno"> 2178</span><span class="comment">  updated. */</span></div>
<div class="line"><span class="lineno"> 2179</span>  <a class="code hl_define" href="task_8h.html#ab7bf0ae866292ba8296091a9d5209689">taskENTER_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 2180</span>  {</div>
<div class="line"><span class="lineno"> 2181</span>    int8_t cTxLock = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a24ac3f0707f098da2a22244d843fcf82">cTxLock</a>;</div>
<div class="line"><span class="lineno"> 2182</span> </div>
<div class="line"><span class="lineno"> 2183</span>    <span class="comment">/* See if data was added to the queue while it was locked. */</span></div>
<div class="line"><span class="lineno"> 2184</span>    <span class="keywordflow">while</span>( cTxLock &gt; <a class="code hl_define" href="#a60a95aa91f84782416755f38616231fd">queueLOCKED_UNMODIFIED</a> )</div>
<div class="line"><span class="lineno"> 2185</span>    {</div>
<div class="line"><span class="lineno"> 2186</span>      <span class="comment">/* Data was posted while the queue was locked.  Are any tasks</span></div>
<div class="line"><span class="lineno"> 2187</span><span class="comment">      blocked waiting for data to become available? */</span></div>
<div class="line"><span class="lineno"> 2188</span><span class="preprocessor">      #if ( configUSE_QUEUE_SETS == 1 )</span></div>
<div class="line"><span class="lineno"> 2189</span>      {</div>
<div class="line"><span class="lineno"> 2190</span>        <span class="keywordflow">if</span>( pxQueue-&gt;pxQueueSetContainer != NULL )</div>
<div class="line"><span class="lineno"> 2191</span>        {</div>
<div class="line"><span class="lineno"> 2192</span>          <span class="keywordflow">if</span>( prvNotifyQueueSetContainer( pxQueue ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 2193</span>          {</div>
<div class="line"><span class="lineno"> 2194</span>            <span class="comment">/* The queue is a member of a queue set, and posting to</span></div>
<div class="line"><span class="lineno"> 2195</span><span class="comment">            the queue set caused a higher priority task to unblock.</span></div>
<div class="line"><span class="lineno"> 2196</span><span class="comment">            A context switch is required. */</span></div>
<div class="line"><span class="lineno"> 2197</span>            <a class="code hl_function" href="task_8h.html#a998c69e37431a3a32c637b31ff60089a">vTaskMissedYield</a>();</div>
<div class="line"><span class="lineno"> 2198</span>          }</div>
<div class="line"><span class="lineno"> 2199</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2200</span>          {</div>
<div class="line"><span class="lineno"> 2201</span>            <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 2202</span>          }</div>
<div class="line"><span class="lineno"> 2203</span>        }</div>
<div class="line"><span class="lineno"> 2204</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2205</span>        {</div>
<div class="line"><span class="lineno"> 2206</span>          <span class="comment">/* Tasks that are removed from the event list will get</span></div>
<div class="line"><span class="lineno"> 2207</span><span class="comment">          added to the pending ready list as the scheduler is still</span></div>
<div class="line"><span class="lineno"> 2208</span><span class="comment">          suspended. */</span></div>
<div class="line"><span class="lineno"> 2209</span>          <span class="keywordflow">if</span>( <a class="code hl_define" href="list_8h.html#aaba6eb05d67ebc8026bea29193eca28f">listLIST_IS_EMPTY</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 2210</span>          {</div>
<div class="line"><span class="lineno"> 2211</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a14513b7dd36055f73fba3c5ebbdc1b06">xTaskRemoveFromEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 2212</span>            {</div>
<div class="line"><span class="lineno"> 2213</span>              <span class="comment">/* The task waiting has a higher priority so record that a</span></div>
<div class="line"><span class="lineno"> 2214</span><span class="comment">              context switch is required. */</span></div>
<div class="line"><span class="lineno"> 2215</span>              <a class="code hl_function" href="task_8h.html#a998c69e37431a3a32c637b31ff60089a">vTaskMissedYield</a>();</div>
<div class="line"><span class="lineno"> 2216</span>            }</div>
<div class="line"><span class="lineno"> 2217</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2218</span>            {</div>
<div class="line"><span class="lineno"> 2219</span>              <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 2220</span>            }</div>
<div class="line"><span class="lineno"> 2221</span>          }</div>
<div class="line"><span class="lineno"> 2222</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2223</span>          {</div>
<div class="line"><span class="lineno"> 2224</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2225</span>          }</div>
<div class="line"><span class="lineno"> 2226</span>        }</div>
<div class="line"><span class="lineno"> 2227</span>      }</div>
<div class="line"><span class="lineno"> 2228</span><span class="preprocessor">      #else </span><span class="comment">/* configUSE_QUEUE_SETS */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 2229</span>      {</div>
<div class="line"><span class="lineno"> 2230</span>        <span class="comment">/* Tasks that are removed from the event list will get added to</span></div>
<div class="line"><span class="lineno"> 2231</span><span class="comment">        the pending ready list as the scheduler is still suspended. */</span></div>
<div class="line"><span class="lineno"> 2232</span>        <span class="keywordflow">if</span>( <a class="code hl_define" href="list_8h.html#aaba6eb05d67ebc8026bea29193eca28f">listLIST_IS_EMPTY</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 2233</span>        {</div>
<div class="line"><span class="lineno"> 2234</span>          <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a14513b7dd36055f73fba3c5ebbdc1b06">xTaskRemoveFromEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 2235</span>          {</div>
<div class="line"><span class="lineno"> 2236</span>            <span class="comment">/* The task waiting has a higher priority so record that</span></div>
<div class="line"><span class="lineno"> 2237</span><span class="comment">            a context switch is required. */</span></div>
<div class="line"><span class="lineno"> 2238</span>            <a class="code hl_function" href="task_8h.html#a998c69e37431a3a32c637b31ff60089a">vTaskMissedYield</a>();</div>
<div class="line"><span class="lineno"> 2239</span>          }</div>
<div class="line"><span class="lineno"> 2240</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2241</span>          {</div>
<div class="line"><span class="lineno"> 2242</span>            <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 2243</span>          }</div>
<div class="line"><span class="lineno"> 2244</span>        }</div>
<div class="line"><span class="lineno"> 2245</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2246</span>        {</div>
<div class="line"><span class="lineno"> 2247</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2248</span>        }</div>
<div class="line"><span class="lineno"> 2249</span>      }</div>
<div class="line"><span class="lineno"> 2250</span><span class="preprocessor">      #endif </span><span class="comment">/* configUSE_QUEUE_SETS */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 2251</span> </div>
<div class="line"><span class="lineno"> 2252</span>      --cTxLock;</div>
<div class="line"><span class="lineno"> 2253</span>    }</div>
<div class="line"><span class="lineno"> 2254</span> </div>
<div class="line"><span class="lineno"> 2255</span>    pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a24ac3f0707f098da2a22244d843fcf82">cTxLock</a> = <a class="code hl_define" href="#acdb781ba6b38714cf41f7417de8fe6bf">queueUNLOCKED</a>;</div>
<div class="line"><span class="lineno"> 2256</span>  }</div>
<div class="line"><span class="lineno"> 2257</span>  <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 2258</span> </div>
<div class="line"><span class="lineno"> 2259</span>  <span class="comment">/* Do the same for the Rx lock. */</span></div>
<div class="line"><span class="lineno"> 2260</span>  <a class="code hl_define" href="task_8h.html#ab7bf0ae866292ba8296091a9d5209689">taskENTER_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 2261</span>  {</div>
<div class="line"><span class="lineno"> 2262</span>    int8_t cRxLock = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#ac750a3f75a6e174adbc697e473a0dd13">cRxLock</a>;</div>
<div class="line"><span class="lineno"> 2263</span> </div>
<div class="line"><span class="lineno"> 2264</span>    <span class="keywordflow">while</span>( cRxLock &gt; <a class="code hl_define" href="#a60a95aa91f84782416755f38616231fd">queueLOCKED_UNMODIFIED</a> )</div>
<div class="line"><span class="lineno"> 2265</span>    {</div>
<div class="line"><span class="lineno"> 2266</span>      <span class="keywordflow">if</span>( <a class="code hl_define" href="list_8h.html#aaba6eb05d67ebc8026bea29193eca28f">listLIST_IS_EMPTY</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#aaab135c4345cb0393d6ff3cd5164c7b2">xTasksWaitingToSend</a> ) ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 2267</span>      {</div>
<div class="line"><span class="lineno"> 2268</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a14513b7dd36055f73fba3c5ebbdc1b06">xTaskRemoveFromEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#aaab135c4345cb0393d6ff3cd5164c7b2">xTasksWaitingToSend</a> ) ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 2269</span>        {</div>
<div class="line"><span class="lineno"> 2270</span>          <a class="code hl_function" href="task_8h.html#a998c69e37431a3a32c637b31ff60089a">vTaskMissedYield</a>();</div>
<div class="line"><span class="lineno"> 2271</span>        }</div>
<div class="line"><span class="lineno"> 2272</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2273</span>        {</div>
<div class="line"><span class="lineno"> 2274</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 2275</span>        }</div>
<div class="line"><span class="lineno"> 2276</span> </div>
<div class="line"><span class="lineno"> 2277</span>        --cRxLock;</div>
<div class="line"><span class="lineno"> 2278</span>      }</div>
<div class="line"><span class="lineno"> 2279</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2280</span>      {</div>
<div class="line"><span class="lineno"> 2281</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2282</span>      }</div>
<div class="line"><span class="lineno"> 2283</span>    }</div>
<div class="line"><span class="lineno"> 2284</span> </div>
<div class="line"><span class="lineno"> 2285</span>    pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#ac750a3f75a6e174adbc697e473a0dd13">cRxLock</a> = <a class="code hl_define" href="#acdb781ba6b38714cf41f7417de8fe6bf">queueUNLOCKED</a>;</div>
<div class="line"><span class="lineno"> 2286</span>  }</div>
<div class="line"><span class="lineno"> 2287</span>  <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 2288</span>}</div>
<div class="ttc" id="alist_8h_html_aaba6eb05d67ebc8026bea29193eca28f"><div class="ttname"><a href="list_8h.html#aaba6eb05d67ebc8026bea29193eca28f">listLIST_IS_EMPTY</a></div><div class="ttdeci">#define listLIST_IS_EMPTY(pxList)</div><div class="ttdef"><b>Definition</b> <a href="list_8h_source.html#l00250">list.h:250</a></div></div>
<div class="ttc" id="astruct_queue_definition_html_a24ac3f0707f098da2a22244d843fcf82"><div class="ttname"><a href="struct_queue_definition.html#a24ac3f0707f098da2a22244d843fcf82">QueueDefinition::cTxLock</a></div><div class="ttdeci">volatile int8_t cTxLock</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00116">queue.c:116</a></div></div>
<div class="ttc" id="astruct_queue_definition_html_aaab135c4345cb0393d6ff3cd5164c7b2"><div class="ttname"><a href="struct_queue_definition.html#aaab135c4345cb0393d6ff3cd5164c7b2">QueueDefinition::xTasksWaitingToSend</a></div><div class="ttdeci">List_t xTasksWaitingToSend</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00108">queue.c:108</a></div></div>
<div class="ttc" id="astruct_queue_definition_html_ac750a3f75a6e174adbc697e473a0dd13"><div class="ttname"><a href="struct_queue_definition.html#ac750a3f75a6e174adbc697e473a0dd13">QueueDefinition::cRxLock</a></div><div class="ttdeci">volatile int8_t cRxLock</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00115">queue.c:115</a></div></div>
<div class="ttc" id="astruct_queue_definition_html_af6d61526f77beee659cd604a0c473359"><div class="ttname"><a href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">QueueDefinition::xTasksWaitingToReceive</a></div><div class="ttdeci">List_t xTasksWaitingToReceive</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00109">queue.c:109</a></div></div>
<div class="ttc" id="atask_8h_html_a14513b7dd36055f73fba3c5ebbdc1b06"><div class="ttname"><a href="task_8h.html#a14513b7dd36055f73fba3c5ebbdc1b06">xTaskRemoveFromEventList</a></div><div class="ttdeci">BaseType_t xTaskRemoveFromEventList(const List_t *const pxEventList) PRIVILEGED_FUNCTION</div><div class="ttdef"><b>Definition</b> <a href="tasks_8c_source.html#l03137">tasks.c:3137</a></div></div>
<div class="ttc" id="atask_8h_html_a998c69e37431a3a32c637b31ff60089a"><div class="ttname"><a href="task_8h.html#a998c69e37431a3a32c637b31ff60089a">vTaskMissedYield</a></div><div class="ttdeci">void vTaskMissedYield(void) PRIVILEGED_FUNCTION</div><div class="ttdef"><b>Definition</b> <a href="tasks_8c_source.html#l03336">tasks.c:3336</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="queue_8c_source.html#l00115">QueueDefinition::cRxLock</a>, <a class="el" href="queue_8c_source.html#l00116">QueueDefinition::cTxLock</a>, <a class="el" href="list_8h_source.html#l00250">listLIST_IS_EMPTY</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00814">mtCOVERAGE_TEST_MARKER</a>, <a class="el" href="projdefs_8h_source.html#l00044">pdFALSE</a>, <a class="el" href="queue_8c_source.html#l00053">queueLOCKED_UNMODIFIED</a>, <a class="el" href="queue_8c_source.html#l00052">queueUNLOCKED</a>, <a class="el" href="task_8h_source.html#l00187">taskENTER_CRITICAL</a>, <a class="el" href="task_8h_source.html#l00202">taskEXIT_CRITICAL</a>, <a class="el" href="tasks_8c_source.html#l03336">vTaskMissedYield()</a>, <a class="el" href="tasks_8c_source.html#l03137">xTaskRemoveFromEventList()</a>, <a class="el" href="queue_8c_source.html#l00109">QueueDefinition::xTasksWaitingToReceive</a>, and <a class="el" href="queue_8c_source.html#l00108">QueueDefinition::xTasksWaitingToSend</a>.</p>

<p class="reference">Referenced by <a class="el" href="queue_8c_source.html#l00740">xQueueGenericSend()</a>, <a class="el" href="queue_8c_source.html#l01636">xQueuePeek()</a>, <a class="el" href="queue_8c_source.html#l01277">xQueueReceive()</a>, and <a class="el" href="queue_8c_source.html#l01418">xQueueSemaphoreTake()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a7297c84a7c770ed57567bad1d3e2faf6_cgraph.png" border="0" usemap="#aqueue_8c_a7297c84a7c770ed57567bad1d3e2faf6_cgraph" alt=""/></div>
<map name="aqueue_8c_a7297c84a7c770ed57567bad1d3e2faf6_cgraph" id="aqueue_8c_a7297c84a7c770ed57567bad1d3e2faf6_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,121,57"/>
<area shape="rect" href="tasks_8c.html#a33c369f5f08ab96659f94093fdb985af" title=" " alt="" coords="199,5,324,32"/>
<area shape="poly" title=" " alt="" coords="121,34,183,26,184,31,121,39"/>
<area shape="rect" href="tasks_8c.html#a6d21c9054b62d8bc1bfb2724e11578d9" title=" " alt="" coords="169,56,354,83"/>
<area shape="poly" title=" " alt="" coords="121,49,153,53,153,58,121,54"/>
<area shape="rect" href="tasks_8c.html#ad1b2e4995f863a99cf980836efe330d7" title=" " alt="" coords="402,5,603,32"/>
<area shape="poly" title=" " alt="" coords="328,53,420,33,421,38,329,58"/>
<area shape="rect" href="list_8c.html#a274fdced76bbdd9d8a4c4840ded2920c" title=" " alt="" coords="452,56,554,83"/>
<area shape="poly" title=" " alt="" coords="355,67,436,67,436,72,355,72"/>
<area shape="rect" href="list_8c.html#a3240bc0f43fcf755be02bfc6de7dc6ef" title=" " alt="" coords="452,107,554,133"/>
<area shape="poly" title=" " alt="" coords="329,81,437,104,435,109,328,86"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a7297c84a7c770ed57567bad1d3e2faf6_icgraph.png" border="0" usemap="#aqueue_8c_a7297c84a7c770ed57567bad1d3e2faf6_icgraph" alt=""/></div>
<map name="aqueue_8c_a7297c84a7c770ed57567bad1d3e2faf6_icgraph" id="aqueue_8c_a7297c84a7c770ed57567bad1d3e2faf6_icgraph">
<area shape="rect" title=" " alt="" coords="726,81,841,108"/>
<area shape="rect" href="queue_8c.html#acb67c81366c00896b21cd826e07d885d" title=" " alt="" coords="527,5,668,32"/>
<area shape="poly" title=" " alt="" coords="742,76,677,46,645,35,647,30,679,42,744,72"/>
<area shape="rect" href="queue_8c.html#a8f68e37e931bbf95440c8845f512e090" title=" " alt="" coords="549,56,646,83"/>
<area shape="poly" title=" " alt="" coords="710,87,646,78,646,73,711,82"/>
<area shape="rect" href="queue_8c.html#ad0a166f3b1219a5e37e31f8090d4800d" title=" " alt="" coords="542,107,653,133"/>
<area shape="poly" title=" " alt="" coords="711,107,654,115,653,110,710,102"/>
<area shape="rect" href="queue_8c.html#ade45e48664e5ec17ea091f00cd34394f" title=" " alt="" coords="517,157,678,184"/>
<area shape="poly" title=" " alt="" coords="744,118,679,148,647,159,645,154,677,143,742,113"/>
<area shape="rect" href="cmsis__os2_8c.html#ad90d4959466a7a65105061da8256ab9e" title="Get a Message from a Queue or timeout if Queue is empty." alt="" coords="322,107,469,133"/>
<area shape="poly" title=" " alt="" coords="526,123,470,123,470,117,526,117"/>
<area shape="rect" href="_free_r_t_o_s___queues_2_src_2main_8c.html#a0322cad3bd0e264bdf2104b17b6d971d" title="Function implementing the MessageQueueCon thread." alt="" coords="103,107,274,133"/>
<area shape="poly" title=" " alt="" coords="306,123,274,123,274,117,306,117"/>
<area shape="rect" href="_free_r_t_o_s___queues_2_src_2main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,107,55,133"/>
<area shape="poly" title=" " alt="" coords="87,123,55,123,55,117,87,117"/>
</map>
</div>

</div>
</div>
<a id="a4158a6134c9d1c60ffdb18d279d475b1" name="a4158a6134c9d1c60ffdb18d279d475b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4158a6134c9d1c60ffdb18d279d475b1">&#9670;&#160;</a></span>uxQueueMessagesWaiting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxQueueMessagesWaiting </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a></td>          <td class="paramname"><span class="paramname"><em>xQueue</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l01930">1930</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1931</span>{</div>
<div class="line"><span class="lineno"> 1932</span><a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxReturn;</div>
<div class="line"><span class="lineno"> 1933</span> </div>
<div class="line"><span class="lineno"> 1934</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( xQueue );</div>
<div class="line"><span class="lineno"> 1935</span> </div>
<div class="line"><span class="lineno"> 1936</span>  <a class="code hl_define" href="task_8h.html#ab7bf0ae866292ba8296091a9d5209689">taskENTER_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1937</span>  {</div>
<div class="line"><span class="lineno"> 1938</span>    uxReturn = ( ( <a class="code hl_struct" href="struct_queue_definition.html">Queue_t</a> * ) xQueue )-&gt;uxMessagesWaiting;</div>
<div class="line"><span class="lineno"> 1939</span>  }</div>
<div class="line"><span class="lineno"> 1940</span>  <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1941</span> </div>
<div class="line"><span class="lineno"> 1942</span>  <span class="keywordflow">return</span> uxReturn;</div>
<div class="line"><span class="lineno"> 1943</span>} <span class="comment">/*lint !e818 Pointer cannot be declared const as xQueue is a typedef not pointer. */</span></div>
<div class="ttc" id="a_free_r_t_o_s_config_8h_html_a228c70cd48927d6ab730ed1a6dfbe35f"><div class="ttname"><a href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a></div><div class="ttdeci">#define configASSERT(x)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_config_8h_source.html#l00131">FreeRTOSConfig.h:131</a></div></div>
<div class="ttc" id="astruct_queue_definition_html"><div class="ttname"><a href="struct_queue_definition.html">QueueDefinition</a></div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00097">queue.c:98</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_config_8h_source.html#l00131">configASSERT</a>, <a class="el" href="task_8h_source.html#l00187">taskENTER_CRITICAL</a>, and <a class="el" href="task_8h_source.html#l00202">taskEXIT_CRITICAL</a>.</p>

<p class="reference">Referenced by <a class="el" href="cmsis__os2_8c_source.html#l01860">osMessageQueueGetCount()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a4158a6134c9d1c60ffdb18d279d475b1_icgraph.png" border="0" usemap="#aqueue_8c_a4158a6134c9d1c60ffdb18d279d475b1_icgraph" alt=""/></div>
<map name="aqueue_8c_a4158a6134c9d1c60ffdb18d279d475b1_icgraph" id="aqueue_8c_a4158a6134c9d1c60ffdb18d279d475b1_icgraph">
<area shape="rect" title=" " alt="" coords="235,5,412,32"/>
<area shape="rect" href="cmsis__os2_8c.html#a6a32ac394fcff568b251c160cc3014b2" title="Get number of queued messages in a Message Queue." alt="" coords="5,5,187,32"/>
<area shape="poly" title=" " alt="" coords="219,21,187,21,187,16,219,16"/>
</map>
</div>

</div>
</div>
<a id="ad5d110bc27c691ff8da238e0116bf92a" name="ad5d110bc27c691ff8da238e0116bf92a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5d110bc27c691ff8da238e0116bf92a">&#9670;&#160;</a></span>uxQueueMessagesWaitingFromISR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxQueueMessagesWaitingFromISR </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a></td>          <td class="paramname"><span class="paramname"><em>xQueue</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l01963">1963</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1964</span>{</div>
<div class="line"><span class="lineno"> 1965</span><a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxReturn;</div>
<div class="line"><span class="lineno"> 1966</span><a class="code hl_struct" href="struct_queue_definition.html">Queue_t</a> * <span class="keyword">const</span> pxQueue = xQueue;</div>
<div class="line"><span class="lineno"> 1967</span> </div>
<div class="line"><span class="lineno"> 1968</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1969</span>  uxReturn = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a>;</div>
<div class="line"><span class="lineno"> 1970</span> </div>
<div class="line"><span class="lineno"> 1971</span>  <span class="keywordflow">return</span> uxReturn;</div>
<div class="line"><span class="lineno"> 1972</span>} <span class="comment">/*lint !e818 Pointer cannot be declared const as xQueue is a typedef not pointer. */</span></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_config_8h_source.html#l00131">configASSERT</a>, and <a class="el" href="queue_8c_source.html#l00111">QueueDefinition::uxMessagesWaiting</a>.</p>

<p class="reference">Referenced by <a class="el" href="cmsis__os2_8c_source.html#l01860">osMessageQueueGetCount()</a>, and <a class="el" href="cmsis__os2_8c_source.html#l01649">osSemaphoreGetCount()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_ad5d110bc27c691ff8da238e0116bf92a_icgraph.png" border="0" usemap="#aqueue_8c_ad5d110bc27c691ff8da238e0116bf92a_icgraph" alt=""/></div>
<map name="aqueue_8c_ad5d110bc27c691ff8da238e0116bf92a_icgraph" id="aqueue_8c_ad5d110bc27c691ff8da238e0116bf92a_icgraph">
<area shape="rect" title=" " alt="" coords="235,31,463,57"/>
<area shape="rect" href="cmsis__os2_8c.html#a6a32ac394fcff568b251c160cc3014b2" title="Get number of queued messages in a Message Queue." alt="" coords="5,5,187,32"/>
<area shape="poly" title=" " alt="" coords="219,34,187,30,187,25,219,28"/>
<area shape="rect" href="cmsis__os2_8c.html#a7559d4dff3cda9992fc5ab5de3e74c70" title="Get current Semaphore token count." alt="" coords="18,56,174,83"/>
<area shape="poly" title=" " alt="" coords="219,60,175,64,174,59,219,54"/>
</map>
</div>

</div>
</div>
<a id="a27d6fb77ce7a0b5a16f6471730d33201" name="a27d6fb77ce7a0b5a16f6471730d33201"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27d6fb77ce7a0b5a16f6471730d33201">&#9670;&#160;</a></span>uxQueueSpacesAvailable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxQueueSpacesAvailable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a></td>          <td class="paramname"><span class="paramname"><em>xQueue</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l01946">1946</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1947</span>{</div>
<div class="line"><span class="lineno"> 1948</span><a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxReturn;</div>
<div class="line"><span class="lineno"> 1949</span><a class="code hl_struct" href="struct_queue_definition.html">Queue_t</a> * <span class="keyword">const</span> pxQueue = xQueue;</div>
<div class="line"><span class="lineno"> 1950</span> </div>
<div class="line"><span class="lineno"> 1951</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1952</span> </div>
<div class="line"><span class="lineno"> 1953</span>  <a class="code hl_define" href="task_8h.html#ab7bf0ae866292ba8296091a9d5209689">taskENTER_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1954</span>  {</div>
<div class="line"><span class="lineno"> 1955</span>    uxReturn = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#ae80d17a812c669d4d41265b7f693988c">uxLength</a> - pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a>;</div>
<div class="line"><span class="lineno"> 1956</span>  }</div>
<div class="line"><span class="lineno"> 1957</span>  <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1958</span> </div>
<div class="line"><span class="lineno"> 1959</span>  <span class="keywordflow">return</span> uxReturn;</div>
<div class="line"><span class="lineno"> 1960</span>} <span class="comment">/*lint !e818 Pointer cannot be declared const as xQueue is a typedef not pointer. */</span></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_config_8h_source.html#l00131">configASSERT</a>, <a class="el" href="task_8h_source.html#l00187">taskENTER_CRITICAL</a>, <a class="el" href="task_8h_source.html#l00202">taskEXIT_CRITICAL</a>, <a class="el" href="queue_8c_source.html#l00112">QueueDefinition::uxLength</a>, and <a class="el" href="queue_8c_source.html#l00111">QueueDefinition::uxMessagesWaiting</a>.</p>

<p class="reference">Referenced by <a class="el" href="cmsis__os2_8c_source.html#l01877">osMessageQueueGetSpace()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a27d6fb77ce7a0b5a16f6471730d33201_icgraph.png" border="0" usemap="#aqueue_8c_a27d6fb77ce7a0b5a16f6471730d33201_icgraph" alt=""/></div>
<map name="aqueue_8c_a27d6fb77ce7a0b5a16f6471730d33201_icgraph" id="aqueue_8c_a27d6fb77ce7a0b5a16f6471730d33201_icgraph">
<area shape="rect" title=" " alt="" coords="238,5,406,32"/>
<area shape="rect" href="cmsis__os2_8c.html#addf0904427436dd3880d46263c2dc9fa" title="Get number of available slots for messages in a Message Queue." alt="" coords="5,5,190,32"/>
<area shape="poly" title=" " alt="" coords="222,21,190,21,190,16,222,16"/>
</map>
</div>

</div>
</div>
<a id="a35c0b4f9a0e940cb3a86ca4c5e84c41c" name="a35c0b4f9a0e940cb3a86ca4c5e84c41c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35c0b4f9a0e940cb3a86ca4c5e84c41c">&#9670;&#160;</a></span>vQueueDelete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vQueueDelete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a></td>          <td class="paramname"><span class="paramname"><em>xQueue</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l01975">1975</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1976</span>{</div>
<div class="line"><span class="lineno"> 1977</span><a class="code hl_struct" href="struct_queue_definition.html">Queue_t</a> * <span class="keyword">const</span> pxQueue = xQueue;</div>
<div class="line"><span class="lineno"> 1978</span> </div>
<div class="line"><span class="lineno"> 1979</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1980</span>  <a class="code hl_define" href="_free_r_t_o_s_8h.html#aae8ebd9c82ecd564953a37bb26a5a1e5">traceQUEUE_DELETE</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1981</span> </div>
<div class="line"><span class="lineno"> 1982</span><span class="preprocessor">  #if ( configQUEUE_REGISTRY_SIZE &gt; 0 )</span></div>
<div class="line"><span class="lineno"> 1983</span>  {</div>
<div class="line"><span class="lineno"> 1984</span>    <a class="code hl_define" href="_free_r_t_o_s_8h.html#af007b655ee91c919bad9cd2798195899">vQueueUnregisterQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1985</span>  }</div>
<div class="line"><span class="lineno"> 1986</span><span class="preprocessor">  #endif</span></div>
<div class="line"><span class="lineno"> 1987</span> </div>
<div class="line"><span class="lineno"> 1988</span><span class="preprocessor">  #if( ( configSUPPORT_DYNAMIC_ALLOCATION == 1 ) &amp;&amp; ( configSUPPORT_STATIC_ALLOCATION == 0 ) )</span></div>
<div class="line"><span class="lineno"> 1989</span>  {</div>
<div class="line"><span class="lineno"> 1990</span>    <span class="comment">/* The queue can only have been allocated dynamically - free it</span></div>
<div class="line"><span class="lineno"> 1991</span><span class="comment">    again. */</span></div>
<div class="line"><span class="lineno"> 1992</span>    <a class="code hl_function" href="portable_8h.html#a1e7cea2fd1bc894ea3b5f5e8179d259b">vPortFree</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1993</span>  }</div>
<div class="line"><span class="lineno"> 1994</span><span class="preprocessor">  #elif( ( configSUPPORT_DYNAMIC_ALLOCATION == 1 ) &amp;&amp; ( configSUPPORT_STATIC_ALLOCATION == 1 ) )</span></div>
<div class="line"><span class="lineno"> 1995</span>  {</div>
<div class="line"><span class="lineno"> 1996</span>    <span class="comment">/* The queue could have been allocated statically or dynamically, so</span></div>
<div class="line"><span class="lineno"> 1997</span><span class="comment">    check before attempting to free the memory. */</span></div>
<div class="line"><span class="lineno"> 1998</span>    <span class="keywordflow">if</span>( pxQueue-&gt;ucStaticallyAllocated == ( uint8_t ) <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1999</span>    {</div>
<div class="line"><span class="lineno"> 2000</span>      <a class="code hl_function" href="portable_8h.html#a1e7cea2fd1bc894ea3b5f5e8179d259b">vPortFree</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 2001</span>    }</div>
<div class="line"><span class="lineno"> 2002</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2003</span>    {</div>
<div class="line"><span class="lineno"> 2004</span>      <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 2005</span>    }</div>
<div class="line"><span class="lineno"> 2006</span>  }</div>
<div class="line"><span class="lineno"> 2007</span><span class="preprocessor">  #else</span></div>
<div class="line"><span class="lineno"> 2008</span>  {</div>
<div class="line"><span class="lineno"> 2009</span>    <span class="comment">/* The queue must have been statically allocated, so is not going to be</span></div>
<div class="line"><span class="lineno"> 2010</span><span class="comment">    deleted.  Avoid compiler warnings about the unused parameter. */</span></div>
<div class="line"><span class="lineno"> 2011</span>    ( void ) pxQueue;</div>
<div class="line"><span class="lineno"> 2012</span>  }</div>
<div class="line"><span class="lineno"> 2013</span><span class="preprocessor">  #endif </span><span class="comment">/* configSUPPORT_DYNAMIC_ALLOCATION */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 2014</span>}</div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_aae8ebd9c82ecd564953a37bb26a5a1e5"><div class="ttname"><a href="_free_r_t_o_s_8h.html#aae8ebd9c82ecd564953a37bb26a5a1e5">traceQUEUE_DELETE</a></div><div class="ttdeci">#define traceQUEUE_DELETE(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00508">FreeRTOS.h:508</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_af007b655ee91c919bad9cd2798195899"><div class="ttname"><a href="_free_r_t_o_s_8h.html#af007b655ee91c919bad9cd2798195899">vQueueUnregisterQueue</a></div><div class="ttdeci">#define vQueueUnregisterQueue(xQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00307">FreeRTOS.h:307</a></div></div>
<div class="ttc" id="aportable_8h_html_a1e7cea2fd1bc894ea3b5f5e8179d259b"><div class="ttname"><a href="portable_8h.html#a1e7cea2fd1bc894ea3b5f5e8179d259b">vPortFree</a></div><div class="ttdeci">void vPortFree(void *pv)</div><div class="ttdef"><b>Definition</b> <a href="heap__4_8c_source.html#l00266">heap_4.c:266</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_config_8h_source.html#l00131">configASSERT</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00814">mtCOVERAGE_TEST_MARKER</a>, <a class="el" href="projdefs_8h_source.html#l00044">pdFALSE</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00508">traceQUEUE_DELETE</a>, <a class="el" href="heap__4_8c_source.html#l00266">vPortFree()</a>, and <a class="el" href="_free_r_t_o_s_8h_source.html#l00307">vQueueUnregisterQueue</a>.</p>

<p class="reference">Referenced by <a class="el" href="cmsis__os2_8c_source.html#l01918">osMessageQueueDelete()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a35c0b4f9a0e940cb3a86ca4c5e84c41c_cgraph.png" border="0" usemap="#aqueue_8c_a35c0b4f9a0e940cb3a86ca4c5e84c41c_cgraph" alt=""/></div>
<map name="aqueue_8c_a35c0b4f9a0e940cb3a86ca4c5e84c41c_cgraph" id="aqueue_8c_a35c0b4f9a0e940cb3a86ca4c5e84c41c_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,107,83"/>
<area shape="rect" href="heap__4_8c.html#a1e7cea2fd1bc894ea3b5f5e8179d259b" title=" " alt="" coords="155,56,231,83"/>
<area shape="poly" title=" " alt="" coords="107,67,139,67,139,72,107,72"/>
<area shape="rect" href="heap__4_8c.html#a1a70fdf86d8a603f45e9b93c14e0d24a" title=" " alt="" coords="279,5,449,32"/>
<area shape="poly" title=" " alt="" coords="231,56,301,34,303,40,232,61"/>
<area shape="rect" href="tasks_8c.html#a084d232640bd1d04bcac0b8784417015" title=" " alt="" coords="304,56,424,83"/>
<area shape="poly" title=" " alt="" coords="232,67,289,67,289,72,232,72"/>
<area shape="rect" href="tasks_8c.html#adf830ea0f150fcdfdaa944667137f080" title=" " alt="" coords="305,107,424,133"/>
<area shape="poly" title=" " alt="" coords="232,78,303,99,301,104,231,83"/>
<area shape="rect" href="tasks_8c.html#ad1b2e4995f863a99cf980836efe330d7" title=" " alt="" coords="497,56,699,83"/>
<area shape="poly" title=" " alt="" coords="424,104,518,84,519,89,425,110"/>
<area shape="rect" href="list_8c.html#a274fdced76bbdd9d8a4c4840ded2920c" title=" " alt="" coords="768,107,870,133"/>
<area shape="poly" title=" " alt="" coords="424,117,752,117,752,123,424,123"/>
<area shape="rect" href="tasks_8c.html#a54f31e9aef0eb7b87e48c7d68ecc84c1" title=" " alt="" coords="529,157,667,184"/>
<area shape="poly" title=" " alt="" coords="425,130,519,151,518,156,424,136"/>
<area shape="poly" title=" " alt="" coords="659,154,752,133,753,138,660,159"/>
<area shape="rect" href="cmsis__os2_8c.html#a9ca051aa77e17583aa5a85d5de5c199a" title=" " alt="" coords="747,157,891,184"/>
<area shape="poly" title=" " alt="" coords="667,168,731,168,731,173,667,173"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a35c0b4f9a0e940cb3a86ca4c5e84c41c_icgraph.png" border="0" usemap="#aqueue_8c_a35c0b4f9a0e940cb3a86ca4c5e84c41c_icgraph" alt=""/></div>
<map name="aqueue_8c_a35c0b4f9a0e940cb3a86ca4c5e84c41c_icgraph" id="aqueue_8c_a35c0b4f9a0e940cb3a86ca4c5e84c41c_icgraph">
<area shape="rect" title=" " alt="" coords="217,5,318,32"/>
<area shape="rect" href="cmsis__os2_8c.html#aba987f665444e0d83fa6a3a68bc72abe" title="Delete a Message Queue object." alt="" coords="5,5,169,32"/>
<area shape="poly" title=" " alt="" coords="201,21,169,21,169,16,201,16"/>
</map>
</div>

</div>
</div>
<a id="a5e54273dbe3f56b8bdc8f7abee67a871" name="a5e54273dbe3f56b8bdc8f7abee67a871"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e54273dbe3f56b8bdc8f7abee67a871">&#9670;&#160;</a></span>xQueueGenericReset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xQueueGenericReset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a></td>          <td class="paramname"><span class="paramname"><em>xQueue</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a></td>          <td class="paramname"><span class="paramname"><em>xNewQueue</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00255">255</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  256</span>{</div>
<div class="line"><span class="lineno">  257</span><a class="code hl_struct" href="struct_queue_definition.html">Queue_t</a> * <span class="keyword">const</span> pxQueue = xQueue;</div>
<div class="line"><span class="lineno">  258</span> </div>
<div class="line"><span class="lineno">  259</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( pxQueue );</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>  <a class="code hl_define" href="task_8h.html#ab7bf0ae866292ba8296091a9d5209689">taskENTER_CRITICAL</a>();</div>
<div class="line"><span class="lineno">  262</span>  {</div>
<div class="line"><span class="lineno">  263</span>    pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#acbbdc8eb47b348a824c7bced41512a38">pcTail</a> = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a487dc7e43b380c58212cba72bc33e0ed">pcHead</a> + ( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#ae80d17a812c669d4d41265b7f693988c">uxLength</a> * pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a> ); <span class="comment">/*lint !e9016 Pointer arithmetic allowed on char types, especially when it assists conveying intent. */</span></div>
<div class="line"><span class="lineno">  264</span>    pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a> = ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0U;</div>
<div class="line"><span class="lineno">  265</span>    pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#abdf13cc013c8488848cee3fce4f0fed3">pcWriteTo</a> = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a487dc7e43b380c58212cba72bc33e0ed">pcHead</a>;</div>
<div class="line"><span class="lineno">  266</span>    pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#af381d02bbe6bc4a77934c6fd97598913">pcReadFrom</a> = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a487dc7e43b380c58212cba72bc33e0ed">pcHead</a> + ( ( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#ae80d17a812c669d4d41265b7f693988c">uxLength</a> - 1U ) * pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a> ); <span class="comment">/*lint !e9016 Pointer arithmetic allowed on char types, especially when it assists conveying intent. */</span></div>
<div class="line"><span class="lineno">  267</span>    pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#ac750a3f75a6e174adbc697e473a0dd13">cRxLock</a> = <a class="code hl_define" href="#acdb781ba6b38714cf41f7417de8fe6bf">queueUNLOCKED</a>;</div>
<div class="line"><span class="lineno">  268</span>    pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a24ac3f0707f098da2a22244d843fcf82">cTxLock</a> = <a class="code hl_define" href="#acdb781ba6b38714cf41f7417de8fe6bf">queueUNLOCKED</a>;</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>    <span class="keywordflow">if</span>( xNewQueue == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno">  271</span>    {</div>
<div class="line"><span class="lineno">  272</span>      <span class="comment">/* If there are tasks blocked waiting to read from the queue, then</span></div>
<div class="line"><span class="lineno">  273</span><span class="comment">      the tasks will remain blocked as after this function exits the queue</span></div>
<div class="line"><span class="lineno">  274</span><span class="comment">      will still be empty.  If there are tasks blocked waiting to write to</span></div>
<div class="line"><span class="lineno">  275</span><span class="comment">      the queue, then one should be unblocked as after this function exits</span></div>
<div class="line"><span class="lineno">  276</span><span class="comment">      it will be possible to write to it. */</span></div>
<div class="line"><span class="lineno">  277</span>      <span class="keywordflow">if</span>( <a class="code hl_define" href="list_8h.html#aaba6eb05d67ebc8026bea29193eca28f">listLIST_IS_EMPTY</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#aaab135c4345cb0393d6ff3cd5164c7b2">xTasksWaitingToSend</a> ) ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno">  278</span>      {</div>
<div class="line"><span class="lineno">  279</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a14513b7dd36055f73fba3c5ebbdc1b06">xTaskRemoveFromEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#aaab135c4345cb0393d6ff3cd5164c7b2">xTasksWaitingToSend</a> ) ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno">  280</span>        {</div>
<div class="line"><span class="lineno">  281</span>          <a class="code hl_define" href="#adb4472163ac5b0e8ad72183d69387b81">queueYIELD_IF_USING_PREEMPTION</a>();</div>
<div class="line"><span class="lineno">  282</span>        }</div>
<div class="line"><span class="lineno">  283</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  284</span>        {</div>
<div class="line"><span class="lineno">  285</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno">  286</span>        }</div>
<div class="line"><span class="lineno">  287</span>      }</div>
<div class="line"><span class="lineno">  288</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  289</span>      {</div>
<div class="line"><span class="lineno">  290</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno">  291</span>      }</div>
<div class="line"><span class="lineno">  292</span>    }</div>
<div class="line"><span class="lineno">  293</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  294</span>    {</div>
<div class="line"><span class="lineno">  295</span>      <span class="comment">/* Ensure the event queues start in the correct state. */</span></div>
<div class="line"><span class="lineno">  296</span>      <a class="code hl_function" href="list_8h.html#adeef7734d7d6d9a3eea642a70c106919">vListInitialise</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#aaab135c4345cb0393d6ff3cd5164c7b2">xTasksWaitingToSend</a> ) );</div>
<div class="line"><span class="lineno">  297</span>      <a class="code hl_function" href="list_8h.html#adeef7734d7d6d9a3eea642a70c106919">vListInitialise</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) );</div>
<div class="line"><span class="lineno">  298</span>    }</div>
<div class="line"><span class="lineno">  299</span>  }</div>
<div class="line"><span class="lineno">  300</span>  <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span>  <span class="comment">/* A value is returned for calling semantic consistency with previous</span></div>
<div class="line"><span class="lineno">  303</span><span class="comment">  versions. */</span></div>
<div class="line"><span class="lineno">  304</span>  <span class="keywordflow">return</span> <a class="code hl_define" href="projdefs_8h.html#a07848d3078849bd32353c69d30a479b3">pdPASS</a>;</div>
<div class="line"><span class="lineno">  305</span>}</div>
<div class="ttc" id="alist_8h_html_adeef7734d7d6d9a3eea642a70c106919"><div class="ttname"><a href="list_8h.html#adeef7734d7d6d9a3eea642a70c106919">vListInitialise</a></div><div class="ttdeci">void vListInitialise(List_t *const pxList) PRIVILEGED_FUNCTION</div><div class="ttdef"><b>Definition</b> <a href="list_8c_source.html#l00037">list.c:37</a></div></div>
<div class="ttc" id="aprojdefs_8h_html_a07848d3078849bd32353c69d30a479b3"><div class="ttname"><a href="projdefs_8h.html#a07848d3078849bd32353c69d30a479b3">pdPASS</a></div><div class="ttdeci">#define pdPASS</div><div class="ttdef"><b>Definition</b> <a href="projdefs_8h_source.html#l00047">projdefs.h:47</a></div></div>
<div class="ttc" id="aqueue_8c_html_adb4472163ac5b0e8ad72183d69387b81"><div class="ttname"><a href="#adb4472163ac5b0e8ad72183d69387b81">queueYIELD_IF_USING_PREEMPTION</a></div><div class="ttdeci">#define queueYIELD_IF_USING_PREEMPTION()</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00087">queue.c:87</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_config_8h_source.html#l00131">configASSERT</a>, <a class="el" href="queue_8c_source.html#l00115">QueueDefinition::cRxLock</a>, <a class="el" href="queue_8c_source.html#l00116">QueueDefinition::cTxLock</a>, <a class="el" href="list_8h_source.html#l00250">listLIST_IS_EMPTY</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00814">mtCOVERAGE_TEST_MARKER</a>, <a class="el" href="queue_8c_source.html#l00099">QueueDefinition::pcHead</a>, <a class="el" href="queue_8c_source.html#l00070">QueuePointers::pcReadFrom</a>, <a class="el" href="queue_8c_source.html#l00069">QueuePointers::pcTail</a>, <a class="el" href="queue_8c_source.html#l00100">QueueDefinition::pcWriteTo</a>, <a class="el" href="projdefs_8h_source.html#l00044">pdFALSE</a>, <a class="el" href="projdefs_8h_source.html#l00047">pdPASS</a>, <a class="el" href="queue_8c_source.html#l00052">queueUNLOCKED</a>, <a class="el" href="queue_8c_source.html#l00087">queueYIELD_IF_USING_PREEMPTION</a>, <a class="el" href="task_8h_source.html#l00187">taskENTER_CRITICAL</a>, <a class="el" href="task_8h_source.html#l00202">taskEXIT_CRITICAL</a>, <a class="el" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">QueueDefinition::u</a>, <a class="el" href="queue_8c_source.html#l00113">QueueDefinition::uxItemSize</a>, <a class="el" href="queue_8c_source.html#l00112">QueueDefinition::uxLength</a>, <a class="el" href="queue_8c_source.html#l00111">QueueDefinition::uxMessagesWaiting</a>, <a class="el" href="list_8c_source.html#l00037">vListInitialise()</a>, <a class="el" href="queue_8c_source.html#l00104">QueueDefinition::xQueue</a>, <a class="el" href="tasks_8c_source.html#l03137">xTaskRemoveFromEventList()</a>, <a class="el" href="queue_8c_source.html#l00109">QueueDefinition::xTasksWaitingToReceive</a>, and <a class="el" href="queue_8c_source.html#l00108">QueueDefinition::xTasksWaitingToSend</a>.</p>

<p class="reference">Referenced by <a class="el" href="queue_8c_source.html#l00422">prvInitialiseNewQueue()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a5e54273dbe3f56b8bdc8f7abee67a871_cgraph.png" border="0" usemap="#aqueue_8c_a5e54273dbe3f56b8bdc8f7abee67a871_cgraph" alt=""/></div>
<map name="aqueue_8c_a5e54273dbe3f56b8bdc8f7abee67a871_cgraph" id="aqueue_8c_a5e54273dbe3f56b8bdc8f7abee67a871_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,151,57"/>
<area shape="rect" href="list_8c.html#aa0831d347bba16bfbe524f4faa790b9d" title=" " alt="" coords="244,5,339,32"/>
<area shape="poly" title=" " alt="" coords="151,33,228,23,229,29,152,38"/>
<area shape="rect" href="tasks_8c.html#a6d21c9054b62d8bc1bfb2724e11578d9" title=" " alt="" coords="199,56,384,83"/>
<area shape="poly" title=" " alt="" coords="152,50,183,54,183,59,151,55"/>
<area shape="rect" href="tasks_8c.html#ad1b2e4995f863a99cf980836efe330d7" title=" " alt="" coords="432,5,633,32"/>
<area shape="poly" title=" " alt="" coords="358,53,450,33,451,38,359,58"/>
<area shape="rect" href="list_8c.html#a274fdced76bbdd9d8a4c4840ded2920c" title=" " alt="" coords="482,56,584,83"/>
<area shape="poly" title=" " alt="" coords="385,67,466,67,466,72,385,72"/>
<area shape="rect" href="list_8c.html#a3240bc0f43fcf755be02bfc6de7dc6ef" title=" " alt="" coords="482,107,584,133"/>
<area shape="poly" title=" " alt="" coords="359,81,467,104,465,109,358,86"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a5e54273dbe3f56b8bdc8f7abee67a871_icgraph.png" border="0" usemap="#aqueue_8c_a5e54273dbe3f56b8bdc8f7abee67a871_icgraph" alt=""/></div>
<map name="aqueue_8c_a5e54273dbe3f56b8bdc8f7abee67a871_icgraph" id="aqueue_8c_a5e54273dbe3f56b8bdc8f7abee67a871_icgraph">
<area shape="rect" title=" " alt="" coords="201,5,346,32"/>
<area shape="rect" href="queue_8c.html#a0f632268707981dea3f177f5fba36e22" title=" " alt="" coords="5,5,153,32"/>
<area shape="poly" title=" " alt="" coords="185,21,153,21,153,16,185,16"/>
</map>
</div>

</div>
</div>
<a id="acb67c81366c00896b21cd826e07d885d" name="acb67c81366c00896b21cd826e07d885d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb67c81366c00896b21cd826e07d885d">&#9670;&#160;</a></span>xQueueGenericSend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xQueueGenericSend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a></td>          <td class="paramname"><span class="paramname"><em>xQueue</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *const</td>          <td class="paramname"><span class="paramname"><em>pvItemToQueue</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="portmacro_8h.html#aa69c48c6e902ce54f70886e6573c92a9">TickType_t</a></td>          <td class="paramname"><span class="paramname"><em>xTicksToWait</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a></td>          <td class="paramname"><span class="paramname"><em>xCopyPosition</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00740">740</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  741</span>{</div>
<div class="line"><span class="lineno">  742</span><a class="code hl_typedef" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xEntryTimeSet = <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a>, xYieldRequired;</div>
<div class="line"><span class="lineno">  743</span><a class="code hl_struct" href="structx_t_i_m_e___o_u_t.html">TimeOut_t</a> xTimeOut;</div>
<div class="line"><span class="lineno">  744</span><a class="code hl_struct" href="struct_queue_definition.html">Queue_t</a> * <span class="keyword">const</span> pxQueue = xQueue;</div>
<div class="line"><span class="lineno">  745</span> </div>
<div class="line"><span class="lineno">  746</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( pxQueue );</div>
<div class="line"><span class="lineno">  747</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( !( ( pvItemToQueue == NULL ) &amp;&amp; ( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a> != ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0U ) ) );</div>
<div class="line"><span class="lineno">  748</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( !( ( xCopyPosition == <a class="code hl_define" href="queue_8h.html#a5bb1c4a46d4b08b6d35cf586983476ef">queueOVERWRITE</a> ) &amp;&amp; ( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#ae80d17a812c669d4d41265b7f693988c">uxLength</a> != 1 ) ) );</div>
<div class="line"><span class="lineno">  749</span><span class="preprocessor">  #if ( ( INCLUDE_xTaskGetSchedulerState == 1 ) || ( configUSE_TIMERS == 1 ) )</span></div>
<div class="line"><span class="lineno">  750</span>  {</div>
<div class="line"><span class="lineno">  751</span>    <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( !( ( <a class="code hl_function" href="task_8h.html#a0241000e08a261372186d34825a35979">xTaskGetSchedulerState</a>() == <a class="code hl_define" href="task_8h.html#a0cad071ca127a35df93166e9ed5b6ada">taskSCHEDULER_SUSPENDED</a> ) &amp;&amp; ( xTicksToWait != 0 ) ) );</div>
<div class="line"><span class="lineno">  752</span>  }</div>
<div class="line"><span class="lineno">  753</span><span class="preprocessor">  #endif</span></div>
<div class="line"><span class="lineno">  754</span> </div>
<div class="line"><span class="lineno">  755</span> </div>
<div class="line"><span class="lineno">  756</span>  <span class="comment">/*lint -save -e904 This function relaxes the coding standard somewhat to</span></div>
<div class="line"><span class="lineno">  757</span><span class="comment">  allow return statements within the function itself.  This is done in the</span></div>
<div class="line"><span class="lineno">  758</span><span class="comment">  interest of execution time efficiency. */</span></div>
<div class="line"><span class="lineno">  759</span>  <span class="keywordflow">for</span>( ;; )</div>
<div class="line"><span class="lineno">  760</span>  {</div>
<div class="line"><span class="lineno">  761</span>    <a class="code hl_define" href="task_8h.html#ab7bf0ae866292ba8296091a9d5209689">taskENTER_CRITICAL</a>();</div>
<div class="line"><span class="lineno">  762</span>    {</div>
<div class="line"><span class="lineno">  763</span>      <span class="comment">/* Is there room on the queue now?  The running task must be the</span></div>
<div class="line"><span class="lineno">  764</span><span class="comment">      highest priority task wanting to access the queue.  If the head item</span></div>
<div class="line"><span class="lineno">  765</span><span class="comment">      in the queue is to be overwritten then it does not matter if the</span></div>
<div class="line"><span class="lineno">  766</span><span class="comment">      queue is full. */</span></div>
<div class="line"><span class="lineno">  767</span>      <span class="keywordflow">if</span>( ( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a> &lt; pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#ae80d17a812c669d4d41265b7f693988c">uxLength</a> ) || ( xCopyPosition == <a class="code hl_define" href="queue_8h.html#a5bb1c4a46d4b08b6d35cf586983476ef">queueOVERWRITE</a> ) )</div>
<div class="line"><span class="lineno">  768</span>      {</div>
<div class="line"><span class="lineno">  769</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#a5cfc9dd899c89966172cb329740f551a">traceQUEUE_SEND</a>( pxQueue );</div>
<div class="line"><span class="lineno">  770</span> </div>
<div class="line"><span class="lineno">  771</span><span class="preprocessor">        #if ( configUSE_QUEUE_SETS == 1 )</span></div>
<div class="line"><span class="lineno">  772</span>        {</div>
<div class="line"><span class="lineno">  773</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxPreviousMessagesWaiting = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a>;</div>
<div class="line"><span class="lineno">  774</span> </div>
<div class="line"><span class="lineno">  775</span>          xYieldRequired = <a class="code hl_function" href="#a77098159b7735e0c27e27aa7072376c6">prvCopyDataToQueue</a>( pxQueue, pvItemToQueue, xCopyPosition );</div>
<div class="line"><span class="lineno">  776</span> </div>
<div class="line"><span class="lineno">  777</span>          <span class="keywordflow">if</span>( pxQueue-&gt;pxQueueSetContainer != NULL )</div>
<div class="line"><span class="lineno">  778</span>          {</div>
<div class="line"><span class="lineno">  779</span>            <span class="keywordflow">if</span>( ( xCopyPosition == <a class="code hl_define" href="queue_8h.html#a5bb1c4a46d4b08b6d35cf586983476ef">queueOVERWRITE</a> ) &amp;&amp; ( uxPreviousMessagesWaiting != ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0 ) )</div>
<div class="line"><span class="lineno">  780</span>            {</div>
<div class="line"><span class="lineno">  781</span>              <span class="comment">/* Do not notify the queue set as an existing item</span></div>
<div class="line"><span class="lineno">  782</span><span class="comment">              was overwritten in the queue so the number of items</span></div>
<div class="line"><span class="lineno">  783</span><span class="comment">              in the queue has not changed. */</span></div>
<div class="line"><span class="lineno">  784</span>              <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno">  785</span>            }</div>
<div class="line"><span class="lineno">  786</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>( prvNotifyQueueSetContainer( pxQueue ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno">  787</span>            {</div>
<div class="line"><span class="lineno">  788</span>              <span class="comment">/* The queue is a member of a queue set, and posting</span></div>
<div class="line"><span class="lineno">  789</span><span class="comment">              to the queue set caused a higher priority task to</span></div>
<div class="line"><span class="lineno">  790</span><span class="comment">              unblock. A context switch is required. */</span></div>
<div class="line"><span class="lineno">  791</span>              <a class="code hl_define" href="#adb4472163ac5b0e8ad72183d69387b81">queueYIELD_IF_USING_PREEMPTION</a>();</div>
<div class="line"><span class="lineno">  792</span>            }</div>
<div class="line"><span class="lineno">  793</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  794</span>            {</div>
<div class="line"><span class="lineno">  795</span>              <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno">  796</span>            }</div>
<div class="line"><span class="lineno">  797</span>          }</div>
<div class="line"><span class="lineno">  798</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  799</span>          {</div>
<div class="line"><span class="lineno">  800</span>            <span class="comment">/* If there was a task waiting for data to arrive on the</span></div>
<div class="line"><span class="lineno">  801</span><span class="comment">            queue then unblock it now. */</span></div>
<div class="line"><span class="lineno">  802</span>            <span class="keywordflow">if</span>( <a class="code hl_define" href="list_8h.html#aaba6eb05d67ebc8026bea29193eca28f">listLIST_IS_EMPTY</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno">  803</span>            {</div>
<div class="line"><span class="lineno">  804</span>              <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a14513b7dd36055f73fba3c5ebbdc1b06">xTaskRemoveFromEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno">  805</span>              {</div>
<div class="line"><span class="lineno">  806</span>                <span class="comment">/* The unblocked task has a priority higher than</span></div>
<div class="line"><span class="lineno">  807</span><span class="comment">                our own so yield immediately.  Yes it is ok to</span></div>
<div class="line"><span class="lineno">  808</span><span class="comment">                do this from within the critical section - the</span></div>
<div class="line"><span class="lineno">  809</span><span class="comment">                kernel takes care of that. */</span></div>
<div class="line"><span class="lineno">  810</span>                <a class="code hl_define" href="#adb4472163ac5b0e8ad72183d69387b81">queueYIELD_IF_USING_PREEMPTION</a>();</div>
<div class="line"><span class="lineno">  811</span>              }</div>
<div class="line"><span class="lineno">  812</span>              <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  813</span>              {</div>
<div class="line"><span class="lineno">  814</span>                <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno">  815</span>              }</div>
<div class="line"><span class="lineno">  816</span>            }</div>
<div class="line"><span class="lineno">  817</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>( xYieldRequired != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno">  818</span>            {</div>
<div class="line"><span class="lineno">  819</span>              <span class="comment">/* This path is a special case that will only get</span></div>
<div class="line"><span class="lineno">  820</span><span class="comment">              executed if the task was holding multiple mutexes</span></div>
<div class="line"><span class="lineno">  821</span><span class="comment">              and the mutexes were given back in an order that is</span></div>
<div class="line"><span class="lineno">  822</span><span class="comment">              different to that in which they were taken. */</span></div>
<div class="line"><span class="lineno">  823</span>              <a class="code hl_define" href="#adb4472163ac5b0e8ad72183d69387b81">queueYIELD_IF_USING_PREEMPTION</a>();</div>
<div class="line"><span class="lineno">  824</span>            }</div>
<div class="line"><span class="lineno">  825</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  826</span>            {</div>
<div class="line"><span class="lineno">  827</span>              <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno">  828</span>            }</div>
<div class="line"><span class="lineno">  829</span>          }</div>
<div class="line"><span class="lineno">  830</span>        }</div>
<div class="line"><span class="lineno">  831</span><span class="preprocessor">        #else </span><span class="comment">/* configUSE_QUEUE_SETS */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  832</span>        {</div>
<div class="line"><span class="lineno">  833</span>          xYieldRequired = <a class="code hl_function" href="#a77098159b7735e0c27e27aa7072376c6">prvCopyDataToQueue</a>( pxQueue, pvItemToQueue, xCopyPosition );</div>
<div class="line"><span class="lineno">  834</span> </div>
<div class="line"><span class="lineno">  835</span>          <span class="comment">/* If there was a task waiting for data to arrive on the</span></div>
<div class="line"><span class="lineno">  836</span><span class="comment">          queue then unblock it now. */</span></div>
<div class="line"><span class="lineno">  837</span>          <span class="keywordflow">if</span>( <a class="code hl_define" href="list_8h.html#aaba6eb05d67ebc8026bea29193eca28f">listLIST_IS_EMPTY</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno">  838</span>          {</div>
<div class="line"><span class="lineno">  839</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a14513b7dd36055f73fba3c5ebbdc1b06">xTaskRemoveFromEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno">  840</span>            {</div>
<div class="line"><span class="lineno">  841</span>              <span class="comment">/* The unblocked task has a priority higher than</span></div>
<div class="line"><span class="lineno">  842</span><span class="comment">              our own so yield immediately.  Yes it is ok to do</span></div>
<div class="line"><span class="lineno">  843</span><span class="comment">              this from within the critical section - the kernel</span></div>
<div class="line"><span class="lineno">  844</span><span class="comment">              takes care of that. */</span></div>
<div class="line"><span class="lineno">  845</span>              <a class="code hl_define" href="#adb4472163ac5b0e8ad72183d69387b81">queueYIELD_IF_USING_PREEMPTION</a>();</div>
<div class="line"><span class="lineno">  846</span>            }</div>
<div class="line"><span class="lineno">  847</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  848</span>            {</div>
<div class="line"><span class="lineno">  849</span>              <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno">  850</span>            }</div>
<div class="line"><span class="lineno">  851</span>          }</div>
<div class="line"><span class="lineno">  852</span>          <span class="keywordflow">else</span> <span class="keywordflow">if</span>( xYieldRequired != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno">  853</span>          {</div>
<div class="line"><span class="lineno">  854</span>            <span class="comment">/* This path is a special case that will only get</span></div>
<div class="line"><span class="lineno">  855</span><span class="comment">            executed if the task was holding multiple mutexes and</span></div>
<div class="line"><span class="lineno">  856</span><span class="comment">            the mutexes were given back in an order that is</span></div>
<div class="line"><span class="lineno">  857</span><span class="comment">            different to that in which they were taken. */</span></div>
<div class="line"><span class="lineno">  858</span>            <a class="code hl_define" href="#adb4472163ac5b0e8ad72183d69387b81">queueYIELD_IF_USING_PREEMPTION</a>();</div>
<div class="line"><span class="lineno">  859</span>          }</div>
<div class="line"><span class="lineno">  860</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  861</span>          {</div>
<div class="line"><span class="lineno">  862</span>            <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno">  863</span>          }</div>
<div class="line"><span class="lineno">  864</span>        }</div>
<div class="line"><span class="lineno">  865</span><span class="preprocessor">        #endif </span><span class="comment">/* configUSE_QUEUE_SETS */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  866</span> </div>
<div class="line"><span class="lineno">  867</span>        <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno">  868</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="projdefs_8h.html#a07848d3078849bd32353c69d30a479b3">pdPASS</a>;</div>
<div class="line"><span class="lineno">  869</span>      }</div>
<div class="line"><span class="lineno">  870</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  871</span>      {</div>
<div class="line"><span class="lineno">  872</span>        <span class="keywordflow">if</span>( xTicksToWait == ( <a class="code hl_typedef" href="portmacro_8h.html#aa69c48c6e902ce54f70886e6573c92a9">TickType_t</a> ) 0 )</div>
<div class="line"><span class="lineno">  873</span>        {</div>
<div class="line"><span class="lineno">  874</span>          <span class="comment">/* The queue was full and no block time is specified (or</span></div>
<div class="line"><span class="lineno">  875</span><span class="comment">          the block time has expired) so leave now. */</span></div>
<div class="line"><span class="lineno">  876</span>          <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno">  877</span> </div>
<div class="line"><span class="lineno">  878</span>          <span class="comment">/* Return to the original privilege level before exiting</span></div>
<div class="line"><span class="lineno">  879</span><span class="comment">          the function. */</span></div>
<div class="line"><span class="lineno">  880</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#ab4896b8d7e443200918a6e4a7f64585d">traceQUEUE_SEND_FAILED</a>( pxQueue );</div>
<div class="line"><span class="lineno">  881</span>          <span class="keywordflow">return</span> <a class="code hl_define" href="projdefs_8h.html#ae40de11e4044a83a97d2cb5d00ce608b">errQUEUE_FULL</a>;</div>
<div class="line"><span class="lineno">  882</span>        }</div>
<div class="line"><span class="lineno">  883</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( xEntryTimeSet == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno">  884</span>        {</div>
<div class="line"><span class="lineno">  885</span>          <span class="comment">/* The queue was full and a block time was specified so</span></div>
<div class="line"><span class="lineno">  886</span><span class="comment">          configure the timeout structure. */</span></div>
<div class="line"><span class="lineno">  887</span>          <a class="code hl_function" href="task_8h.html#a9bff8681d5ed262e71b92805ca0da909">vTaskInternalSetTimeOutState</a>( &amp;xTimeOut );</div>
<div class="line"><span class="lineno">  888</span>          xEntryTimeSet = <a class="code hl_define" href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a>;</div>
<div class="line"><span class="lineno">  889</span>        }</div>
<div class="line"><span class="lineno">  890</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  891</span>        {</div>
<div class="line"><span class="lineno">  892</span>          <span class="comment">/* Entry time was already set. */</span></div>
<div class="line"><span class="lineno">  893</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno">  894</span>        }</div>
<div class="line"><span class="lineno">  895</span>      }</div>
<div class="line"><span class="lineno">  896</span>    }</div>
<div class="line"><span class="lineno">  897</span>    <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno">  898</span> </div>
<div class="line"><span class="lineno">  899</span>    <span class="comment">/* Interrupts and other tasks can send to and receive from the queue</span></div>
<div class="line"><span class="lineno">  900</span><span class="comment">    now the critical section has been exited. */</span></div>
<div class="line"><span class="lineno">  901</span> </div>
<div class="line"><span class="lineno">  902</span>    <a class="code hl_function" href="task_8h.html#a366b302eba79d10b5ee2a3756f0fcc43">vTaskSuspendAll</a>();</div>
<div class="line"><span class="lineno">  903</span>    <a class="code hl_define" href="#ae4efd14c0f4dee7f189ef2e4d9ce1f1b">prvLockQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno">  904</span> </div>
<div class="line"><span class="lineno">  905</span>    <span class="comment">/* Update the timeout state to see if it has expired yet. */</span></div>
<div class="line"><span class="lineno">  906</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a3b018a85d339e536a6c05748dd666a3a">xTaskCheckForTimeOut</a>( &amp;xTimeOut, &amp;xTicksToWait ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno">  907</span>    {</div>
<div class="line"><span class="lineno">  908</span>      <span class="keywordflow">if</span>( <a class="code hl_function" href="#a70546f6b48a8b715eae3dd84e0546045">prvIsQueueFull</a>( pxQueue ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno">  909</span>      {</div>
<div class="line"><span class="lineno">  910</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#a9484f4523e4bec2ab2dc233f2556c3c5">traceBLOCKING_ON_QUEUE_SEND</a>( pxQueue );</div>
<div class="line"><span class="lineno">  911</span>        <a class="code hl_function" href="task_8h.html#a56ae23bc0dece4522d666959902221ca">vTaskPlaceOnEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#aaab135c4345cb0393d6ff3cd5164c7b2">xTasksWaitingToSend</a> ), xTicksToWait );</div>
<div class="line"><span class="lineno">  912</span> </div>
<div class="line"><span class="lineno">  913</span>        <span class="comment">/* Unlocking the queue means queue events can effect the</span></div>
<div class="line"><span class="lineno">  914</span><span class="comment">        event list.  It is possible that interrupts occurring now</span></div>
<div class="line"><span class="lineno">  915</span><span class="comment">        remove this task from the event list again - but as the</span></div>
<div class="line"><span class="lineno">  916</span><span class="comment">        scheduler is suspended the task will go onto the pending</span></div>
<div class="line"><span class="lineno">  917</span><span class="comment">        ready last instead of the actual ready list. */</span></div>
<div class="line"><span class="lineno">  918</span>        <a class="code hl_function" href="#a7297c84a7c770ed57567bad1d3e2faf6">prvUnlockQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno">  919</span> </div>
<div class="line"><span class="lineno">  920</span>        <span class="comment">/* Resuming the scheduler will move tasks from the pending</span></div>
<div class="line"><span class="lineno">  921</span><span class="comment">        ready list into the ready list - so it is feasible that this</span></div>
<div class="line"><span class="lineno">  922</span><span class="comment">        task is already in a ready list before it yields - in which</span></div>
<div class="line"><span class="lineno">  923</span><span class="comment">        case the yield will not cause a context switch unless there</span></div>
<div class="line"><span class="lineno">  924</span><span class="comment">        is also a higher priority task in the pending ready list. */</span></div>
<div class="line"><span class="lineno">  925</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a003f8ae6d649225abd030cc76e1c7d0e">xTaskResumeAll</a>() == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno">  926</span>        {</div>
<div class="line"><span class="lineno">  927</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#af4484fc07631a16e45ac5f29a3f0556e">portYIELD_WITHIN_API</a>();</div>
<div class="line"><span class="lineno">  928</span>        }</div>
<div class="line"><span class="lineno">  929</span>      }</div>
<div class="line"><span class="lineno">  930</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  931</span>      {</div>
<div class="line"><span class="lineno">  932</span>        <span class="comment">/* Try again. */</span></div>
<div class="line"><span class="lineno">  933</span>        <a class="code hl_function" href="#a7297c84a7c770ed57567bad1d3e2faf6">prvUnlockQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno">  934</span>        ( void ) <a class="code hl_function" href="task_8h.html#a003f8ae6d649225abd030cc76e1c7d0e">xTaskResumeAll</a>();</div>
<div class="line"><span class="lineno">  935</span>      }</div>
<div class="line"><span class="lineno">  936</span>    }</div>
<div class="line"><span class="lineno">  937</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  938</span>    {</div>
<div class="line"><span class="lineno">  939</span>      <span class="comment">/* The timeout has expired. */</span></div>
<div class="line"><span class="lineno">  940</span>      <a class="code hl_function" href="#a7297c84a7c770ed57567bad1d3e2faf6">prvUnlockQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno">  941</span>      ( void ) <a class="code hl_function" href="task_8h.html#a003f8ae6d649225abd030cc76e1c7d0e">xTaskResumeAll</a>();</div>
<div class="line"><span class="lineno">  942</span> </div>
<div class="line"><span class="lineno">  943</span>      <a class="code hl_define" href="_free_r_t_o_s_8h.html#ab4896b8d7e443200918a6e4a7f64585d">traceQUEUE_SEND_FAILED</a>( pxQueue );</div>
<div class="line"><span class="lineno">  944</span>      <span class="keywordflow">return</span> <a class="code hl_define" href="projdefs_8h.html#ae40de11e4044a83a97d2cb5d00ce608b">errQUEUE_FULL</a>;</div>
<div class="line"><span class="lineno">  945</span>    }</div>
<div class="line"><span class="lineno">  946</span>  } <span class="comment">/*lint -restore */</span></div>
<div class="line"><span class="lineno">  947</span>}</div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_a5cfc9dd899c89966172cb329740f551a"><div class="ttname"><a href="_free_r_t_o_s_8h.html#a5cfc9dd899c89966172cb329740f551a">traceQUEUE_SEND</a></div><div class="ttdeci">#define traceQUEUE_SEND(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00460">FreeRTOS.h:460</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_a9484f4523e4bec2ab2dc233f2556c3c5"><div class="ttname"><a href="_free_r_t_o_s_8h.html#a9484f4523e4bec2ab2dc233f2556c3c5">traceBLOCKING_ON_QUEUE_SEND</a></div><div class="ttdeci">#define traceBLOCKING_ON_QUEUE_SEND(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00394">FreeRTOS.h:394</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_ab4896b8d7e443200918a6e4a7f64585d"><div class="ttname"><a href="_free_r_t_o_s_8h.html#ab4896b8d7e443200918a6e4a7f64585d">traceQUEUE_SEND_FAILED</a></div><div class="ttdeci">#define traceQUEUE_SEND_FAILED(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00464">FreeRTOS.h:464</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_af4484fc07631a16e45ac5f29a3f0556e"><div class="ttname"><a href="_free_r_t_o_s_8h.html#af4484fc07631a16e45ac5f29a3f0556e">portYIELD_WITHIN_API</a></div><div class="ttdeci">#define portYIELD_WITHIN_API</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00746">FreeRTOS.h:746</a></div></div>
<div class="ttc" id="aportmacro_8h_html_aa69c48c6e902ce54f70886e6573c92a9"><div class="ttname"><a href="portmacro_8h.html#aa69c48c6e902ce54f70886e6573c92a9">TickType_t</a></div><div class="ttdeci">uint32_t TickType_t</div><div class="ttdef"><b>Definition</b> <a href="portmacro_8h_source.html#l00063">portmacro.h:63</a></div></div>
<div class="ttc" id="aprojdefs_8h_html_ae40de11e4044a83a97d2cb5d00ce608b"><div class="ttname"><a href="projdefs_8h.html#ae40de11e4044a83a97d2cb5d00ce608b">errQUEUE_FULL</a></div><div class="ttdeci">#define errQUEUE_FULL</div><div class="ttdef"><b>Definition</b> <a href="projdefs_8h_source.html#l00050">projdefs.h:50</a></div></div>
<div class="ttc" id="aqueue_8c_html_a70546f6b48a8b715eae3dd84e0546045"><div class="ttname"><a href="#a70546f6b48a8b715eae3dd84e0546045">prvIsQueueFull</a></div><div class="ttdeci">static BaseType_t prvIsQueueFull(const Queue_t *pxQueue) PRIVILEGED_FUNCTION</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l02331">queue.c:2331</a></div></div>
<div class="ttc" id="aqueue_8c_html_a7297c84a7c770ed57567bad1d3e2faf6"><div class="ttname"><a href="#a7297c84a7c770ed57567bad1d3e2faf6">prvUnlockQueue</a></div><div class="ttdeci">static void prvUnlockQueue(Queue_t *const pxQueue) PRIVILEGED_FUNCTION</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l02171">queue.c:2171</a></div></div>
<div class="ttc" id="aqueue_8c_html_a77098159b7735e0c27e27aa7072376c6"><div class="ttname"><a href="#a77098159b7735e0c27e27aa7072376c6">prvCopyDataToQueue</a></div><div class="ttdeci">static BaseType_t prvCopyDataToQueue(Queue_t *const pxQueue, const void *pvItemToQueue, const BaseType_t xPosition) PRIVILEGED_FUNCTION</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l02074">queue.c:2074</a></div></div>
<div class="ttc" id="aqueue_8c_html_ae4efd14c0f4dee7f189ef2e4d9ce1f1b"><div class="ttname"><a href="#ae4efd14c0f4dee7f189ef2e4d9ce1f1b">prvLockQueue</a></div><div class="ttdeci">#define prvLockQueue(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l00240">queue.c:240</a></div></div>
<div class="ttc" id="astructx_t_i_m_e___o_u_t_html"><div class="ttname"><a href="structx_t_i_m_e___o_u_t.html">xTIME_OUT</a></div><div class="ttdef"><b>Definition</b> <a href="task_8h_source.html#l00102">task.h:103</a></div></div>
<div class="ttc" id="atask_8h_html_a003f8ae6d649225abd030cc76e1c7d0e"><div class="ttname"><a href="task_8h.html#a003f8ae6d649225abd030cc76e1c7d0e">xTaskResumeAll</a></div><div class="ttdeci">BaseType_t xTaskResumeAll(void) PRIVILEGED_FUNCTION</div><div class="ttdef"><b>Definition</b> <a href="tasks_8c_source.html#l02193">tasks.c:2193</a></div></div>
<div class="ttc" id="atask_8h_html_a0241000e08a261372186d34825a35979"><div class="ttname"><a href="task_8h.html#a0241000e08a261372186d34825a35979">xTaskGetSchedulerState</a></div><div class="ttdeci">BaseType_t xTaskGetSchedulerState(void) PRIVILEGED_FUNCTION</div></div>
<div class="ttc" id="atask_8h_html_a0cad071ca127a35df93166e9ed5b6ada"><div class="ttname"><a href="task_8h.html#a0cad071ca127a35df93166e9ed5b6ada">taskSCHEDULER_SUSPENDED</a></div><div class="ttdeci">#define taskSCHEDULER_SUSPENDED</div><div class="ttdef"><b>Definition</b> <a href="task_8h_source.html#l00227">task.h:227</a></div></div>
<div class="ttc" id="atask_8h_html_a366b302eba79d10b5ee2a3756f0fcc43"><div class="ttname"><a href="task_8h.html#a366b302eba79d10b5ee2a3756f0fcc43">vTaskSuspendAll</a></div><div class="ttdeci">void vTaskSuspendAll(void) PRIVILEGED_FUNCTION</div><div class="ttdef"><b>Definition</b> <a href="tasks_8c_source.html#l02109">tasks.c:2109</a></div></div>
<div class="ttc" id="atask_8h_html_a3b018a85d339e536a6c05748dd666a3a"><div class="ttname"><a href="task_8h.html#a3b018a85d339e536a6c05748dd666a3a">xTaskCheckForTimeOut</a></div><div class="ttdeci">BaseType_t xTaskCheckForTimeOut(TimeOut_t *const pxTimeOut, TickType_t *const pxTicksToWait) PRIVILEGED_FUNCTION</div><div class="ttdef"><b>Definition</b> <a href="tasks_8c_source.html#l03273">tasks.c:3273</a></div></div>
<div class="ttc" id="atask_8h_html_a56ae23bc0dece4522d666959902221ca"><div class="ttname"><a href="task_8h.html#a56ae23bc0dece4522d666959902221ca">vTaskPlaceOnEventList</a></div><div class="ttdeci">void vTaskPlaceOnEventList(List_t *const pxEventList, const TickType_t xTicksToWait) PRIVILEGED_FUNCTION</div><div class="ttdef"><b>Definition</b> <a href="tasks_8c_source.html#l03063">tasks.c:3063</a></div></div>
<div class="ttc" id="atask_8h_html_a9bff8681d5ed262e71b92805ca0da909"><div class="ttname"><a href="task_8h.html#a9bff8681d5ed262e71b92805ca0da909">vTaskInternalSetTimeOutState</a></div><div class="ttdeci">void vTaskInternalSetTimeOutState(TimeOut_t *const pxTimeOut) PRIVILEGED_FUNCTION</div><div class="ttdef"><b>Definition</b> <a href="tasks_8c_source.html#l03265">tasks.c:3265</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_config_8h_source.html#l00131">configASSERT</a>, <a class="el" href="projdefs_8h_source.html#l00050">errQUEUE_FULL</a>, <a class="el" href="list_8h_source.html#l00250">listLIST_IS_EMPTY</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00814">mtCOVERAGE_TEST_MARKER</a>, <a class="el" href="projdefs_8h_source.html#l00044">pdFALSE</a>, <a class="el" href="projdefs_8h_source.html#l00047">pdPASS</a>, <a class="el" href="projdefs_8h_source.html#l00045">pdTRUE</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00746">portYIELD_WITHIN_API</a>, <a class="el" href="queue_8c_source.html#l02074">prvCopyDataToQueue()</a>, <a class="el" href="queue_8c_source.html#l02331">prvIsQueueFull()</a>, <a class="el" href="queue_8c_source.html#l00240">prvLockQueue</a>, <a class="el" href="queue_8c_source.html#l02171">prvUnlockQueue()</a>, <a class="el" href="queue_8h_source.html#l00067">queueOVERWRITE</a>, <a class="el" href="queue_8c_source.html#l00087">queueYIELD_IF_USING_PREEMPTION</a>, <a class="el" href="task_8h_source.html#l00187">taskENTER_CRITICAL</a>, <a class="el" href="task_8h_source.html#l00202">taskEXIT_CRITICAL</a>, <a class="el" href="task_8h_source.html#l00227">taskSCHEDULER_SUSPENDED</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00394">traceBLOCKING_ON_QUEUE_SEND</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00460">traceQUEUE_SEND</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00464">traceQUEUE_SEND_FAILED</a>, <a class="el" href="queue_8c_source.html#l00113">QueueDefinition::uxItemSize</a>, <a class="el" href="queue_8c_source.html#l00112">QueueDefinition::uxLength</a>, <a class="el" href="queue_8c_source.html#l00111">QueueDefinition::uxMessagesWaiting</a>, <a class="el" href="tasks_8c_source.html#l03265">vTaskInternalSetTimeOutState()</a>, <a class="el" href="tasks_8c_source.html#l03063">vTaskPlaceOnEventList()</a>, <a class="el" href="tasks_8c_source.html#l02109">vTaskSuspendAll()</a>, <a class="el" href="tasks_8c_source.html#l03273">xTaskCheckForTimeOut()</a>, <a class="el" href="task_8h.html#a0241000e08a261372186d34825a35979">xTaskGetSchedulerState()</a>, <a class="el" href="tasks_8c_source.html#l03137">xTaskRemoveFromEventList()</a>, <a class="el" href="tasks_8c_source.html#l02193">xTaskResumeAll()</a>, <a class="el" href="queue_8c_source.html#l00109">QueueDefinition::xTasksWaitingToReceive</a>, and <a class="el" href="queue_8c_source.html#l00108">QueueDefinition::xTasksWaitingToSend</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_acb67c81366c00896b21cd826e07d885d_cgraph.png" border="0" usemap="#aqueue_8c_acb67c81366c00896b21cd826e07d885d_cgraph" alt=""/></div>
<map name="aqueue_8c_acb67c81366c00896b21cd826e07d885d_cgraph" id="aqueue_8c_acb67c81366c00896b21cd826e07d885d_cgraph">
<area shape="rect" title=" " alt="" coords="5,233,147,260"/>
<area shape="rect" href="queue_8c.html#a77098159b7735e0c27e27aa7072376c6" title=" " alt="" coords="205,5,351,32"/>
<area shape="poly" title=" " alt="" coords="79,232,92,194,115,143,149,89,169,64,193,42,199,38,202,42,196,46,173,68,153,92,120,146,97,196,84,234"/>
<area shape="rect" href="queue_8c.html#a70546f6b48a8b715eae3dd84e0546045" title=" " alt="" coords="225,56,331,83"/>
<area shape="poly" title=" " alt="" coords="82,232,123,165,155,126,193,92,209,84,212,88,196,97,158,130,127,168,86,234"/>
<area shape="rect" href="queue_8c.html#a7297c84a7c770ed57567bad1d3e2faf6" title=" " alt="" coords="220,259,336,285"/>
<area shape="poly" title=" " alt="" coords="147,253,205,260,205,266,147,258"/>
<area shape="rect" href="tasks_8c.html#a6d21c9054b62d8bc1bfb2724e11578d9" title=" " alt="" coords="423,309,608,336"/>
<area shape="poly" title=" " alt="" coords="90,259,132,304,162,328,196,346,229,355,264,361,335,361,402,352,458,338,459,343,403,357,335,366,264,366,228,360,194,350,159,332,129,308,86,262"/>
<area shape="rect" href="tasks_8c.html#a91fbc7c4b65e32fae51b7d43ebdcb131" title=" " alt="" coords="417,208,613,235"/>
<area shape="poly" title=" " alt="" coords="100,230,143,210,194,193,259,186,326,186,388,192,443,202,442,207,388,198,325,191,260,191,195,199,145,215,103,235"/>
<area shape="rect" href="tasks_8c.html#adc9eb47ceecf7dd7ee325bebff9eafc5" title=" " alt="" coords="199,107,357,133"/>
<area shape="poly" title=" " alt="" coords="90,231,134,192,193,150,218,137,221,142,196,154,137,196,93,235"/>
<area shape="rect" href="tasks_8c.html#a084d232640bd1d04bcac0b8784417015" title=" " alt="" coords="218,309,338,336"/>
<area shape="poly" title=" " alt="" coords="108,258,196,295,215,302,213,307,194,300,106,263"/>
<area shape="rect" href="tasks_8c.html#acfc8de487c86355713d0e8546506d9e4" title=" " alt="" coords="197,208,359,235"/>
<area shape="poly" title=" " alt="" coords="147,235,181,231,182,236,147,240"/>
<area shape="rect" href="task_8h.html#a0241000e08a261372186d34825a35979" title=" " alt="" coords="195,411,361,437"/>
<area shape="poly" title=" " alt="" coords="87,259,129,321,160,358,196,390,216,402,214,406,193,394,156,361,125,324,83,262"/>
<area shape="rect" href="tasks_8c.html#adf830ea0f150fcdfdaa944667137f080" title=" " alt="" coords="218,461,338,488"/>
<area shape="poly" title=" " alt="" coords="84,259,97,297,120,348,153,401,173,426,196,447,206,454,203,458,193,451,169,429,149,404,115,350,92,299,79,261"/>
<area shape="rect" href="task_8h.html#a02fe2e1419fd6c35f75a1357c5e5ce22" title=" " alt="" coords="440,5,591,32"/>
<area shape="poly" title=" " alt="" coords="351,16,424,16,424,21,351,21"/>
<area shape="rect" href="tasks_8c.html#a33c369f5f08ab96659f94093fdb985af" title=" " alt="" coords="453,259,578,285"/>
<area shape="poly" title=" " alt="" coords="336,269,437,269,437,275,336,275"/>
<area shape="poly" title=" " alt="" coords="337,282,435,303,434,308,335,287"/>
<area shape="rect" href="tasks_8c.html#ad1b2e4995f863a99cf980836efe330d7" title=" " alt="" coords="669,321,871,348"/>
<area shape="poly" title=" " alt="" coords="608,324,654,327,654,332,608,330"/>
<area shape="rect" href="list_8c.html#a274fdced76bbdd9d8a4c4840ded2920c" title=" " alt="" coords="719,385,821,412"/>
<area shape="poly" title=" " alt="" coords="564,334,709,378,707,383,562,339"/>
<area shape="rect" href="list_8c.html#a3240bc0f43fcf755be02bfc6de7dc6ef" title=" " alt="" coords="719,213,821,240"/>
<area shape="poly" title=" " alt="" coords="582,306,620,295,678,271,729,245,732,250,680,276,622,300,584,311"/>
<area shape="rect" href="tasks_8c.html#ab4574e77d9aea876272e563c68f639da" title=" " alt="" coords="409,157,621,184"/>
<area shape="poly" title=" " alt="" coords="344,131,435,151,434,156,343,137"/>
<area shape="rect" href="list_8c.html#a28faa70d3ec4b4f39e53b0fc52d62ecf" title=" " alt="" coords="730,132,810,159"/>
<area shape="poly" title=" " alt="" coords="357,121,715,140,715,145,357,127"/>
<area shape="poly" title=" " alt="" coords="607,182,623,194,639,214,647,235,649,277,651,318,657,338,671,358,687,371,706,381,703,386,684,376,667,362,652,340,645,319,644,277,642,236,635,217,619,198,604,187"/>
<area shape="poly" title=" " alt="" coords="580,182,704,210,703,215,579,187"/>
<area shape="poly" title=" " alt="" coords="622,157,715,148,715,153,622,163"/>
<area shape="poly" title=" " alt="" coords="359,219,402,219,402,224,359,224"/>
<area shape="poly" title=" " alt="" coords="331,458,360,447,383,430,408,414,469,390,533,372,653,347,654,352,534,377,471,395,410,418,386,435,362,452,333,463"/>
<area shape="poly" title=" " alt="" coords="337,460,409,447,703,404,704,409,409,452,338,465"/>
<area shape="rect" href="tasks_8c.html#a54f31e9aef0eb7b87e48c7d68ecc84c1" title=" " alt="" coords="447,461,584,488"/>
<area shape="poly" title=" " alt="" coords="338,472,431,472,431,477,338,477"/>
<area shape="poly" title=" " alt="" coords="562,458,707,414,709,420,564,463"/>
<area shape="rect" href="cmsis__os2_8c.html#a9ca051aa77e17583aa5a85d5de5c199a" title=" " alt="" coords="698,461,842,488"/>
<area shape="poly" title=" " alt="" coords="584,472,682,472,682,477,584,477"/>
</map>
</div>

</div>
</div>
<a id="a0fb58b25eb396a5cf8e1688b7e1a56cb" name="a0fb58b25eb396a5cf8e1688b7e1a56cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fb58b25eb396a5cf8e1688b7e1a56cb">&#9670;&#160;</a></span>xQueueGenericSendFromISR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xQueueGenericSendFromISR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a></td>          <td class="paramname"><span class="paramname"><em>xQueue</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *const</td>          <td class="paramname"><span class="paramname"><em>pvItemToQueue</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> *const</td>          <td class="paramname"><span class="paramname"><em>pxHigherPriorityTaskWoken</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a></td>          <td class="paramname"><span class="paramname"><em>xCopyPosition</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l00950">950</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  951</span>{</div>
<div class="line"><span class="lineno">  952</span><a class="code hl_typedef" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xReturn;</div>
<div class="line"><span class="lineno">  953</span><a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxSavedInterruptStatus;</div>
<div class="line"><span class="lineno">  954</span><a class="code hl_struct" href="struct_queue_definition.html">Queue_t</a> * <span class="keyword">const</span> pxQueue = xQueue;</div>
<div class="line"><span class="lineno">  955</span> </div>
<div class="line"><span class="lineno">  956</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( pxQueue );</div>
<div class="line"><span class="lineno">  957</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( !( ( pvItemToQueue == NULL ) &amp;&amp; ( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a> != ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0U ) ) );</div>
<div class="line"><span class="lineno">  958</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( !( ( xCopyPosition == <a class="code hl_define" href="queue_8h.html#a5bb1c4a46d4b08b6d35cf586983476ef">queueOVERWRITE</a> ) &amp;&amp; ( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#ae80d17a812c669d4d41265b7f693988c">uxLength</a> != 1 ) ) );</div>
<div class="line"><span class="lineno">  959</span> </div>
<div class="line"><span class="lineno">  960</span>  <span class="comment">/* RTOS ports that support interrupt nesting have the concept of a maximum</span></div>
<div class="line"><span class="lineno">  961</span><span class="comment">  system call (or maximum API call) interrupt priority.  Interrupts that are</span></div>
<div class="line"><span class="lineno">  962</span><span class="comment">  above the maximum system call priority are kept permanently enabled, even</span></div>
<div class="line"><span class="lineno">  963</span><span class="comment">  when the RTOS kernel is in a critical section, but cannot make any calls to</span></div>
<div class="line"><span class="lineno">  964</span><span class="comment">  FreeRTOS API functions.  If configASSERT() is defined in FreeRTOSConfig.h</span></div>
<div class="line"><span class="lineno">  965</span><span class="comment">  then portASSERT_IF_INTERRUPT_PRIORITY_INVALID() will result in an assertion</span></div>
<div class="line"><span class="lineno">  966</span><span class="comment">  failure if a FreeRTOS API function is called from an interrupt that has been</span></div>
<div class="line"><span class="lineno">  967</span><span class="comment">  assigned a priority above the configured maximum system call priority.</span></div>
<div class="line"><span class="lineno">  968</span><span class="comment">  Only FreeRTOS functions that end in FromISR can be called from interrupts</span></div>
<div class="line"><span class="lineno">  969</span><span class="comment">  that have been assigned a priority at or (logically) below the maximum</span></div>
<div class="line"><span class="lineno">  970</span><span class="comment">  system call interrupt priority.  FreeRTOS maintains a separate interrupt</span></div>
<div class="line"><span class="lineno">  971</span><span class="comment">  safe API to ensure interrupt entry is as fast and as simple as possible.</span></div>
<div class="line"><span class="lineno">  972</span><span class="comment">  More information (albeit Cortex-M specific) is provided on the following</span></div>
<div class="line"><span class="lineno">  973</span><span class="comment">  link: http://www.freertos.org/RTOS-Cortex-M3-M4.html */</span></div>
<div class="line"><span class="lineno">  974</span>  <a class="code hl_define" href="_free_r_t_o_s_8h.html#a10f75d20c71c4289f96d1b89cb6c62e2">portASSERT_IF_INTERRUPT_PRIORITY_INVALID</a>();</div>
<div class="line"><span class="lineno">  975</span> </div>
<div class="line"><span class="lineno">  976</span>  <span class="comment">/* Similar to xQueueGenericSend, except without blocking if there is no room</span></div>
<div class="line"><span class="lineno">  977</span><span class="comment">  in the queue.  Also don&#39;t directly wake a task that was blocked on a queue</span></div>
<div class="line"><span class="lineno">  978</span><span class="comment">  read, instead return a flag to say whether a context switch is required or</span></div>
<div class="line"><span class="lineno">  979</span><span class="comment">  not (i.e. has a task with a higher priority than us been woken by this</span></div>
<div class="line"><span class="lineno">  980</span><span class="comment">  post). */</span></div>
<div class="line"><span class="lineno">  981</span>  uxSavedInterruptStatus = <a class="code hl_define" href="_free_r_t_o_s_8h.html#a31b4260dbc1823ba80b578f86eb15a98">portSET_INTERRUPT_MASK_FROM_ISR</a>();</div>
<div class="line"><span class="lineno">  982</span>  {</div>
<div class="line"><span class="lineno">  983</span>    <span class="keywordflow">if</span>( ( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a> &lt; pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#ae80d17a812c669d4d41265b7f693988c">uxLength</a> ) || ( xCopyPosition == <a class="code hl_define" href="queue_8h.html#a5bb1c4a46d4b08b6d35cf586983476ef">queueOVERWRITE</a> ) )</div>
<div class="line"><span class="lineno">  984</span>    {</div>
<div class="line"><span class="lineno">  985</span>      <span class="keyword">const</span> int8_t cTxLock = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a24ac3f0707f098da2a22244d843fcf82">cTxLock</a>;</div>
<div class="line"><span class="lineno">  986</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxPreviousMessagesWaiting = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a>;</div>
<div class="line"><span class="lineno">  987</span> </div>
<div class="line"><span class="lineno">  988</span>      <a class="code hl_define" href="_free_r_t_o_s_8h.html#a590bfae4dcb6be8a4b3daadf09a1b587">traceQUEUE_SEND_FROM_ISR</a>( pxQueue );</div>
<div class="line"><span class="lineno">  989</span> </div>
<div class="line"><span class="lineno">  990</span>      <span class="comment">/* Semaphores use xQueueGiveFromISR(), so pxQueue will not be a</span></div>
<div class="line"><span class="lineno">  991</span><span class="comment">      semaphore or mutex.  That means prvCopyDataToQueue() cannot result</span></div>
<div class="line"><span class="lineno">  992</span><span class="comment">      in a task disinheriting a priority and prvCopyDataToQueue() can be</span></div>
<div class="line"><span class="lineno">  993</span><span class="comment">      called here even though the disinherit function does not check if</span></div>
<div class="line"><span class="lineno">  994</span><span class="comment">      the scheduler is suspended before accessing the ready lists. */</span></div>
<div class="line"><span class="lineno">  995</span>      ( void ) <a class="code hl_function" href="#a77098159b7735e0c27e27aa7072376c6">prvCopyDataToQueue</a>( pxQueue, pvItemToQueue, xCopyPosition );</div>
<div class="line"><span class="lineno">  996</span> </div>
<div class="line"><span class="lineno">  997</span>      <span class="comment">/* The event list is not altered if the queue is locked.  This will</span></div>
<div class="line"><span class="lineno">  998</span><span class="comment">      be done when the queue is unlocked later. */</span></div>
<div class="line"><span class="lineno">  999</span>      <span class="keywordflow">if</span>( cTxLock == <a class="code hl_define" href="#acdb781ba6b38714cf41f7417de8fe6bf">queueUNLOCKED</a> )</div>
<div class="line"><span class="lineno"> 1000</span>      {</div>
<div class="line"><span class="lineno"> 1001</span><span class="preprocessor">        #if ( configUSE_QUEUE_SETS == 1 )</span></div>
<div class="line"><span class="lineno"> 1002</span>        {</div>
<div class="line"><span class="lineno"> 1003</span>          <span class="keywordflow">if</span>( pxQueue-&gt;pxQueueSetContainer != NULL )</div>
<div class="line"><span class="lineno"> 1004</span>          {</div>
<div class="line"><span class="lineno"> 1005</span>            <span class="keywordflow">if</span>( ( xCopyPosition == <a class="code hl_define" href="queue_8h.html#a5bb1c4a46d4b08b6d35cf586983476ef">queueOVERWRITE</a> ) &amp;&amp; ( uxPreviousMessagesWaiting != ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0 ) )</div>
<div class="line"><span class="lineno"> 1006</span>            {</div>
<div class="line"><span class="lineno"> 1007</span>              <span class="comment">/* Do not notify the queue set as an existing item</span></div>
<div class="line"><span class="lineno"> 1008</span><span class="comment">              was overwritten in the queue so the number of items</span></div>
<div class="line"><span class="lineno"> 1009</span><span class="comment">              in the queue has not changed. */</span></div>
<div class="line"><span class="lineno"> 1010</span>              <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1011</span>            }</div>
<div class="line"><span class="lineno"> 1012</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>( prvNotifyQueueSetContainer( pxQueue ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1013</span>            {</div>
<div class="line"><span class="lineno"> 1014</span>              <span class="comment">/* The queue is a member of a queue set, and posting</span></div>
<div class="line"><span class="lineno"> 1015</span><span class="comment">              to the queue set caused a higher priority task to</span></div>
<div class="line"><span class="lineno"> 1016</span><span class="comment">              unblock.  A context switch is required. */</span></div>
<div class="line"><span class="lineno"> 1017</span>              <span class="keywordflow">if</span>( pxHigherPriorityTaskWoken != NULL )</div>
<div class="line"><span class="lineno"> 1018</span>              {</div>
<div class="line"><span class="lineno"> 1019</span>                *pxHigherPriorityTaskWoken = <a class="code hl_define" href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a>;</div>
<div class="line"><span class="lineno"> 1020</span>              }</div>
<div class="line"><span class="lineno"> 1021</span>              <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1022</span>              {</div>
<div class="line"><span class="lineno"> 1023</span>                <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1024</span>              }</div>
<div class="line"><span class="lineno"> 1025</span>            }</div>
<div class="line"><span class="lineno"> 1026</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1027</span>            {</div>
<div class="line"><span class="lineno"> 1028</span>              <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1029</span>            }</div>
<div class="line"><span class="lineno"> 1030</span>          }</div>
<div class="line"><span class="lineno"> 1031</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1032</span>          {</div>
<div class="line"><span class="lineno"> 1033</span>            <span class="keywordflow">if</span>( <a class="code hl_define" href="list_8h.html#aaba6eb05d67ebc8026bea29193eca28f">listLIST_IS_EMPTY</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1034</span>            {</div>
<div class="line"><span class="lineno"> 1035</span>              <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a14513b7dd36055f73fba3c5ebbdc1b06">xTaskRemoveFromEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1036</span>              {</div>
<div class="line"><span class="lineno"> 1037</span>                <span class="comment">/* The task waiting has a higher priority so</span></div>
<div class="line"><span class="lineno"> 1038</span><span class="comment">                record that a context switch is required. */</span></div>
<div class="line"><span class="lineno"> 1039</span>                <span class="keywordflow">if</span>( pxHigherPriorityTaskWoken != NULL )</div>
<div class="line"><span class="lineno"> 1040</span>                {</div>
<div class="line"><span class="lineno"> 1041</span>                  *pxHigherPriorityTaskWoken = <a class="code hl_define" href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a>;</div>
<div class="line"><span class="lineno"> 1042</span>                }</div>
<div class="line"><span class="lineno"> 1043</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1044</span>                {</div>
<div class="line"><span class="lineno"> 1045</span>                  <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1046</span>                }</div>
<div class="line"><span class="lineno"> 1047</span>              }</div>
<div class="line"><span class="lineno"> 1048</span>              <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1049</span>              {</div>
<div class="line"><span class="lineno"> 1050</span>                <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1051</span>              }</div>
<div class="line"><span class="lineno"> 1052</span>            }</div>
<div class="line"><span class="lineno"> 1053</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1054</span>            {</div>
<div class="line"><span class="lineno"> 1055</span>              <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1056</span>            }</div>
<div class="line"><span class="lineno"> 1057</span>          }</div>
<div class="line"><span class="lineno"> 1058</span>        }</div>
<div class="line"><span class="lineno"> 1059</span><span class="preprocessor">        #else </span><span class="comment">/* configUSE_QUEUE_SETS */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 1060</span>        {</div>
<div class="line"><span class="lineno"> 1061</span>          <span class="keywordflow">if</span>( <a class="code hl_define" href="list_8h.html#aaba6eb05d67ebc8026bea29193eca28f">listLIST_IS_EMPTY</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1062</span>          {</div>
<div class="line"><span class="lineno"> 1063</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a14513b7dd36055f73fba3c5ebbdc1b06">xTaskRemoveFromEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1064</span>            {</div>
<div class="line"><span class="lineno"> 1065</span>              <span class="comment">/* The task waiting has a higher priority so record that a</span></div>
<div class="line"><span class="lineno"> 1066</span><span class="comment">              context switch is required. */</span></div>
<div class="line"><span class="lineno"> 1067</span>              <span class="keywordflow">if</span>( pxHigherPriorityTaskWoken != NULL )</div>
<div class="line"><span class="lineno"> 1068</span>              {</div>
<div class="line"><span class="lineno"> 1069</span>                *pxHigherPriorityTaskWoken = <a class="code hl_define" href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a>;</div>
<div class="line"><span class="lineno"> 1070</span>              }</div>
<div class="line"><span class="lineno"> 1071</span>              <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1072</span>              {</div>
<div class="line"><span class="lineno"> 1073</span>                <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1074</span>              }</div>
<div class="line"><span class="lineno"> 1075</span>            }</div>
<div class="line"><span class="lineno"> 1076</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1077</span>            {</div>
<div class="line"><span class="lineno"> 1078</span>              <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1079</span>            }</div>
<div class="line"><span class="lineno"> 1080</span>          }</div>
<div class="line"><span class="lineno"> 1081</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1082</span>          {</div>
<div class="line"><span class="lineno"> 1083</span>            <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1084</span>          }</div>
<div class="line"><span class="lineno"> 1085</span>          </div>
<div class="line"><span class="lineno"> 1086</span>          <span class="comment">/* Not used in this path. */</span></div>
<div class="line"><span class="lineno"> 1087</span>          ( void ) uxPreviousMessagesWaiting;</div>
<div class="line"><span class="lineno"> 1088</span>        }</div>
<div class="line"><span class="lineno"> 1089</span><span class="preprocessor">        #endif </span><span class="comment">/* configUSE_QUEUE_SETS */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 1090</span>      }</div>
<div class="line"><span class="lineno"> 1091</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1092</span>      {</div>
<div class="line"><span class="lineno"> 1093</span>        <span class="comment">/* Increment the lock count so the task that unlocks the queue</span></div>
<div class="line"><span class="lineno"> 1094</span><span class="comment">        knows that data was posted while it was locked. */</span></div>
<div class="line"><span class="lineno"> 1095</span>        pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a24ac3f0707f098da2a22244d843fcf82">cTxLock</a> = ( int8_t ) ( cTxLock + 1 );</div>
<div class="line"><span class="lineno"> 1096</span>      }</div>
<div class="line"><span class="lineno"> 1097</span> </div>
<div class="line"><span class="lineno"> 1098</span>      xReturn = <a class="code hl_define" href="projdefs_8h.html#a07848d3078849bd32353c69d30a479b3">pdPASS</a>;</div>
<div class="line"><span class="lineno"> 1099</span>    }</div>
<div class="line"><span class="lineno"> 1100</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1101</span>    {</div>
<div class="line"><span class="lineno"> 1102</span>      <a class="code hl_define" href="_free_r_t_o_s_8h.html#a71fa002ce8a199d38e697d94c613649f">traceQUEUE_SEND_FROM_ISR_FAILED</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1103</span>      xReturn = <a class="code hl_define" href="projdefs_8h.html#ae40de11e4044a83a97d2cb5d00ce608b">errQUEUE_FULL</a>;</div>
<div class="line"><span class="lineno"> 1104</span>    }</div>
<div class="line"><span class="lineno"> 1105</span>  }</div>
<div class="line"><span class="lineno"> 1106</span>  <a class="code hl_define" href="_free_r_t_o_s_8h.html#a2661e2c5a4e4afe5bef2ebe9872e28b3">portCLEAR_INTERRUPT_MASK_FROM_ISR</a>( uxSavedInterruptStatus );</div>
<div class="line"><span class="lineno"> 1107</span> </div>
<div class="line"><span class="lineno"> 1108</span>  <span class="keywordflow">return</span> xReturn;</div>
<div class="line"><span class="lineno"> 1109</span>}</div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_a10f75d20c71c4289f96d1b89cb6c62e2"><div class="ttname"><a href="_free_r_t_o_s_8h.html#a10f75d20c71c4289f96d1b89cb6c62e2">portASSERT_IF_INTERRUPT_PRIORITY_INVALID</a></div><div class="ttdeci">#define portASSERT_IF_INTERRUPT_PRIORITY_INVALID()</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00806">FreeRTOS.h:806</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_a2661e2c5a4e4afe5bef2ebe9872e28b3"><div class="ttname"><a href="_free_r_t_o_s_8h.html#a2661e2c5a4e4afe5bef2ebe9872e28b3">portCLEAR_INTERRUPT_MASK_FROM_ISR</a></div><div class="ttdeci">#define portCLEAR_INTERRUPT_MASK_FROM_ISR(uxSavedStatusValue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00286">FreeRTOS.h:286</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_a31b4260dbc1823ba80b578f86eb15a98"><div class="ttname"><a href="_free_r_t_o_s_8h.html#a31b4260dbc1823ba80b578f86eb15a98">portSET_INTERRUPT_MASK_FROM_ISR</a></div><div class="ttdeci">#define portSET_INTERRUPT_MASK_FROM_ISR()</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00282">FreeRTOS.h:282</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_a590bfae4dcb6be8a4b3daadf09a1b587"><div class="ttname"><a href="_free_r_t_o_s_8h.html#a590bfae4dcb6be8a4b3daadf09a1b587">traceQUEUE_SEND_FROM_ISR</a></div><div class="ttdeci">#define traceQUEUE_SEND_FROM_ISR(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00488">FreeRTOS.h:488</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_a71fa002ce8a199d38e697d94c613649f"><div class="ttname"><a href="_free_r_t_o_s_8h.html#a71fa002ce8a199d38e697d94c613649f">traceQUEUE_SEND_FROM_ISR_FAILED</a></div><div class="ttdeci">#define traceQUEUE_SEND_FROM_ISR_FAILED(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00492">FreeRTOS.h:492</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_config_8h_source.html#l00131">configASSERT</a>, <a class="el" href="queue_8c_source.html#l00116">QueueDefinition::cTxLock</a>, <a class="el" href="projdefs_8h_source.html#l00050">errQUEUE_FULL</a>, <a class="el" href="list_8h_source.html#l00250">listLIST_IS_EMPTY</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00814">mtCOVERAGE_TEST_MARKER</a>, <a class="el" href="projdefs_8h_source.html#l00044">pdFALSE</a>, <a class="el" href="projdefs_8h_source.html#l00047">pdPASS</a>, <a class="el" href="projdefs_8h_source.html#l00045">pdTRUE</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00806">portASSERT_IF_INTERRUPT_PRIORITY_INVALID</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00286">portCLEAR_INTERRUPT_MASK_FROM_ISR</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00282">portSET_INTERRUPT_MASK_FROM_ISR</a>, <a class="el" href="queue_8c_source.html#l02074">prvCopyDataToQueue()</a>, <a class="el" href="queue_8h_source.html#l00067">queueOVERWRITE</a>, <a class="el" href="queue_8c_source.html#l00052">queueUNLOCKED</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00488">traceQUEUE_SEND_FROM_ISR</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00492">traceQUEUE_SEND_FROM_ISR_FAILED</a>, <a class="el" href="queue_8c_source.html#l00113">QueueDefinition::uxItemSize</a>, <a class="el" href="queue_8c_source.html#l00112">QueueDefinition::uxLength</a>, <a class="el" href="queue_8c_source.html#l00111">QueueDefinition::uxMessagesWaiting</a>, <a class="el" href="tasks_8c_source.html#l03137">xTaskRemoveFromEventList()</a>, and <a class="el" href="queue_8c_source.html#l00109">QueueDefinition::xTasksWaitingToReceive</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a0fb58b25eb396a5cf8e1688b7e1a56cb_cgraph.png" border="0" usemap="#aqueue_8c_a0fb58b25eb396a5cf8e1688b7e1a56cb_cgraph" alt=""/></div>
<map name="aqueue_8c_a0fb58b25eb396a5cf8e1688b7e1a56cb_cgraph" id="aqueue_8c_a0fb58b25eb396a5cf8e1688b7e1a56cb_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,198,83"/>
<area shape="rect" href="queue_8c.html#a77098159b7735e0c27e27aa7072376c6" title=" " alt="" coords="265,19,412,45"/>
<area shape="poly" title=" " alt="" coords="190,53,250,43,251,48,191,58"/>
<area shape="rect" href="tasks_8c.html#a6d21c9054b62d8bc1bfb2724e11578d9" title=" " alt="" coords="246,81,431,108"/>
<area shape="poly" title=" " alt="" coords="198,77,230,80,230,86,198,82"/>
<area shape="rect" href="task_8h.html#a02fe2e1419fd6c35f75a1357c5e5ce22" title=" " alt="" coords="504,5,655,32"/>
<area shape="poly" title=" " alt="" coords="412,25,488,21,489,26,412,31"/>
<area shape="rect" href="tasks_8c.html#ad1b2e4995f863a99cf980836efe330d7" title=" " alt="" coords="479,56,680,83"/>
<area shape="poly" title=" " alt="" coords="431,82,463,79,464,84,432,88"/>
<area shape="rect" href="list_8c.html#a274fdced76bbdd9d8a4c4840ded2920c" title=" " alt="" coords="529,107,631,133"/>
<area shape="poly" title=" " alt="" coords="432,102,513,110,513,116,431,107"/>
<area shape="rect" href="list_8c.html#a3240bc0f43fcf755be02bfc6de7dc6ef" title=" " alt="" coords="529,157,631,184"/>
<area shape="poly" title=" " alt="" coords="376,106,480,143,514,152,513,158,478,148,374,111"/>
</map>
</div>

</div>
</div>
<a id="a4df49fafb6ba4400ede6f2d07a40865f" name="a4df49fafb6ba4400ede6f2d07a40865f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4df49fafb6ba4400ede6f2d07a40865f">&#9670;&#160;</a></span>xQueueGiveFromISR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xQueueGiveFromISR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a></td>          <td class="paramname"><span class="paramname"><em>xQueue</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> *const</td>          <td class="paramname"><span class="paramname"><em>pxHigherPriorityTaskWoken</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l01112">1112</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1113</span>{</div>
<div class="line"><span class="lineno"> 1114</span><a class="code hl_typedef" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xReturn;</div>
<div class="line"><span class="lineno"> 1115</span><a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxSavedInterruptStatus;</div>
<div class="line"><span class="lineno"> 1116</span><a class="code hl_struct" href="struct_queue_definition.html">Queue_t</a> * <span class="keyword">const</span> pxQueue = xQueue;</div>
<div class="line"><span class="lineno"> 1117</span> </div>
<div class="line"><span class="lineno"> 1118</span>  <span class="comment">/* Similar to xQueueGenericSendFromISR() but used with semaphores where the</span></div>
<div class="line"><span class="lineno"> 1119</span><span class="comment">  item size is 0.  Don&#39;t directly wake a task that was blocked on a queue</span></div>
<div class="line"><span class="lineno"> 1120</span><span class="comment">  read, instead return a flag to say whether a context switch is required or</span></div>
<div class="line"><span class="lineno"> 1121</span><span class="comment">  not (i.e. has a task with a higher priority than us been woken by this</span></div>
<div class="line"><span class="lineno"> 1122</span><span class="comment">  post). */</span></div>
<div class="line"><span class="lineno"> 1123</span> </div>
<div class="line"><span class="lineno"> 1124</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1125</span> </div>
<div class="line"><span class="lineno"> 1126</span>  <span class="comment">/* xQueueGenericSendFromISR() should be used instead of xQueueGiveFromISR()</span></div>
<div class="line"><span class="lineno"> 1127</span><span class="comment">  if the item size is not 0. */</span></div>
<div class="line"><span class="lineno"> 1128</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a> == 0 );</div>
<div class="line"><span class="lineno"> 1129</span> </div>
<div class="line"><span class="lineno"> 1130</span>  <span class="comment">/* Normally a mutex would not be given from an interrupt, especially if</span></div>
<div class="line"><span class="lineno"> 1131</span><span class="comment">  there is a mutex holder, as priority inheritance makes no sense for an</span></div>
<div class="line"><span class="lineno"> 1132</span><span class="comment">  interrupts, only tasks. */</span></div>
<div class="line"><span class="lineno"> 1133</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( !( ( pxQueue-&gt;uxQueueType == <a class="code hl_define" href="#a0799077a434aea43f5cca3cda3625aa8">queueQUEUE_IS_MUTEX</a> ) &amp;&amp; ( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#adb2c0818274974553c619ff953b6f477">xSemaphore</a>.<a class="code hl_variable" href="struct_semaphore_data.html#ab1ed54c7b39dc45b3c310fae7ad08693">xMutexHolder</a> != NULL ) ) );</div>
<div class="line"><span class="lineno"> 1134</span> </div>
<div class="line"><span class="lineno"> 1135</span>  <span class="comment">/* RTOS ports that support interrupt nesting have the concept of a maximum</span></div>
<div class="line"><span class="lineno"> 1136</span><span class="comment">  system call (or maximum API call) interrupt priority.  Interrupts that are</span></div>
<div class="line"><span class="lineno"> 1137</span><span class="comment">  above the maximum system call priority are kept permanently enabled, even</span></div>
<div class="line"><span class="lineno"> 1138</span><span class="comment">  when the RTOS kernel is in a critical section, but cannot make any calls to</span></div>
<div class="line"><span class="lineno"> 1139</span><span class="comment">  FreeRTOS API functions.  If configASSERT() is defined in FreeRTOSConfig.h</span></div>
<div class="line"><span class="lineno"> 1140</span><span class="comment">  then portASSERT_IF_INTERRUPT_PRIORITY_INVALID() will result in an assertion</span></div>
<div class="line"><span class="lineno"> 1141</span><span class="comment">  failure if a FreeRTOS API function is called from an interrupt that has been</span></div>
<div class="line"><span class="lineno"> 1142</span><span class="comment">  assigned a priority above the configured maximum system call priority.</span></div>
<div class="line"><span class="lineno"> 1143</span><span class="comment">  Only FreeRTOS functions that end in FromISR can be called from interrupts</span></div>
<div class="line"><span class="lineno"> 1144</span><span class="comment">  that have been assigned a priority at or (logically) below the maximum</span></div>
<div class="line"><span class="lineno"> 1145</span><span class="comment">  system call interrupt priority.  FreeRTOS maintains a separate interrupt</span></div>
<div class="line"><span class="lineno"> 1146</span><span class="comment">  safe API to ensure interrupt entry is as fast and as simple as possible.</span></div>
<div class="line"><span class="lineno"> 1147</span><span class="comment">  More information (albeit Cortex-M specific) is provided on the following</span></div>
<div class="line"><span class="lineno"> 1148</span><span class="comment">  link: http://www.freertos.org/RTOS-Cortex-M3-M4.html */</span></div>
<div class="line"><span class="lineno"> 1149</span>  <a class="code hl_define" href="_free_r_t_o_s_8h.html#a10f75d20c71c4289f96d1b89cb6c62e2">portASSERT_IF_INTERRUPT_PRIORITY_INVALID</a>();</div>
<div class="line"><span class="lineno"> 1150</span> </div>
<div class="line"><span class="lineno"> 1151</span>  uxSavedInterruptStatus = <a class="code hl_define" href="_free_r_t_o_s_8h.html#a31b4260dbc1823ba80b578f86eb15a98">portSET_INTERRUPT_MASK_FROM_ISR</a>();</div>
<div class="line"><span class="lineno"> 1152</span>  {</div>
<div class="line"><span class="lineno"> 1153</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxMessagesWaiting = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a>;</div>
<div class="line"><span class="lineno"> 1154</span> </div>
<div class="line"><span class="lineno"> 1155</span>    <span class="comment">/* When the queue is used to implement a semaphore no data is ever</span></div>
<div class="line"><span class="lineno"> 1156</span><span class="comment">    moved through the queue but it is still valid to see if the queue &#39;has</span></div>
<div class="line"><span class="lineno"> 1157</span><span class="comment">    space&#39;. */</span></div>
<div class="line"><span class="lineno"> 1158</span>    <span class="keywordflow">if</span>( uxMessagesWaiting &lt; pxQueue-&gt;uxLength )</div>
<div class="line"><span class="lineno"> 1159</span>    {</div>
<div class="line"><span class="lineno"> 1160</span>      <span class="keyword">const</span> int8_t cTxLock = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a24ac3f0707f098da2a22244d843fcf82">cTxLock</a>;</div>
<div class="line"><span class="lineno"> 1161</span> </div>
<div class="line"><span class="lineno"> 1162</span>      <a class="code hl_define" href="_free_r_t_o_s_8h.html#a590bfae4dcb6be8a4b3daadf09a1b587">traceQUEUE_SEND_FROM_ISR</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1163</span> </div>
<div class="line"><span class="lineno"> 1164</span>      <span class="comment">/* A task can only have an inherited priority if it is a mutex</span></div>
<div class="line"><span class="lineno"> 1165</span><span class="comment">      holder - and if there is a mutex holder then the mutex cannot be</span></div>
<div class="line"><span class="lineno"> 1166</span><span class="comment">      given from an ISR.  As this is the ISR version of the function it</span></div>
<div class="line"><span class="lineno"> 1167</span><span class="comment">      can be assumed there is no mutex holder and no need to determine if</span></div>
<div class="line"><span class="lineno"> 1168</span><span class="comment">      priority disinheritance is needed.  Simply increase the count of</span></div>
<div class="line"><span class="lineno"> 1169</span><span class="comment">      messages (semaphores) available. */</span></div>
<div class="line"><span class="lineno"> 1170</span>      pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a> = uxMessagesWaiting + ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 1;</div>
<div class="line"><span class="lineno"> 1171</span> </div>
<div class="line"><span class="lineno"> 1172</span>      <span class="comment">/* The event list is not altered if the queue is locked.  This will</span></div>
<div class="line"><span class="lineno"> 1173</span><span class="comment">      be done when the queue is unlocked later. */</span></div>
<div class="line"><span class="lineno"> 1174</span>      <span class="keywordflow">if</span>( cTxLock == <a class="code hl_define" href="#acdb781ba6b38714cf41f7417de8fe6bf">queueUNLOCKED</a> )</div>
<div class="line"><span class="lineno"> 1175</span>      {</div>
<div class="line"><span class="lineno"> 1176</span><span class="preprocessor">        #if ( configUSE_QUEUE_SETS == 1 )</span></div>
<div class="line"><span class="lineno"> 1177</span>        {</div>
<div class="line"><span class="lineno"> 1178</span>          <span class="keywordflow">if</span>( pxQueue-&gt;pxQueueSetContainer != NULL )</div>
<div class="line"><span class="lineno"> 1179</span>          {</div>
<div class="line"><span class="lineno"> 1180</span>            <span class="keywordflow">if</span>( prvNotifyQueueSetContainer( pxQueue ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1181</span>            {</div>
<div class="line"><span class="lineno"> 1182</span>              <span class="comment">/* The semaphore is a member of a queue set, and</span></div>
<div class="line"><span class="lineno"> 1183</span><span class="comment">              posting to the queue set caused a higher priority</span></div>
<div class="line"><span class="lineno"> 1184</span><span class="comment">              task to unblock.  A context switch is required. */</span></div>
<div class="line"><span class="lineno"> 1185</span>              <span class="keywordflow">if</span>( pxHigherPriorityTaskWoken != NULL )</div>
<div class="line"><span class="lineno"> 1186</span>              {</div>
<div class="line"><span class="lineno"> 1187</span>                *pxHigherPriorityTaskWoken = <a class="code hl_define" href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a>;</div>
<div class="line"><span class="lineno"> 1188</span>              }</div>
<div class="line"><span class="lineno"> 1189</span>              <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1190</span>              {</div>
<div class="line"><span class="lineno"> 1191</span>                <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1192</span>              }</div>
<div class="line"><span class="lineno"> 1193</span>            }</div>
<div class="line"><span class="lineno"> 1194</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1195</span>            {</div>
<div class="line"><span class="lineno"> 1196</span>              <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1197</span>            }</div>
<div class="line"><span class="lineno"> 1198</span>          }</div>
<div class="line"><span class="lineno"> 1199</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1200</span>          {</div>
<div class="line"><span class="lineno"> 1201</span>            <span class="keywordflow">if</span>( <a class="code hl_define" href="list_8h.html#aaba6eb05d67ebc8026bea29193eca28f">listLIST_IS_EMPTY</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1202</span>            {</div>
<div class="line"><span class="lineno"> 1203</span>              <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a14513b7dd36055f73fba3c5ebbdc1b06">xTaskRemoveFromEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1204</span>              {</div>
<div class="line"><span class="lineno"> 1205</span>                <span class="comment">/* The task waiting has a higher priority so</span></div>
<div class="line"><span class="lineno"> 1206</span><span class="comment">                record that a context switch is required. */</span></div>
<div class="line"><span class="lineno"> 1207</span>                <span class="keywordflow">if</span>( pxHigherPriorityTaskWoken != NULL )</div>
<div class="line"><span class="lineno"> 1208</span>                {</div>
<div class="line"><span class="lineno"> 1209</span>                  *pxHigherPriorityTaskWoken = <a class="code hl_define" href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a>;</div>
<div class="line"><span class="lineno"> 1210</span>                }</div>
<div class="line"><span class="lineno"> 1211</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1212</span>                {</div>
<div class="line"><span class="lineno"> 1213</span>                  <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1214</span>                }</div>
<div class="line"><span class="lineno"> 1215</span>              }</div>
<div class="line"><span class="lineno"> 1216</span>              <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1217</span>              {</div>
<div class="line"><span class="lineno"> 1218</span>                <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1219</span>              }</div>
<div class="line"><span class="lineno"> 1220</span>            }</div>
<div class="line"><span class="lineno"> 1221</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1222</span>            {</div>
<div class="line"><span class="lineno"> 1223</span>              <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1224</span>            }</div>
<div class="line"><span class="lineno"> 1225</span>          }</div>
<div class="line"><span class="lineno"> 1226</span>        }</div>
<div class="line"><span class="lineno"> 1227</span><span class="preprocessor">        #else </span><span class="comment">/* configUSE_QUEUE_SETS */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 1228</span>        {</div>
<div class="line"><span class="lineno"> 1229</span>          <span class="keywordflow">if</span>( <a class="code hl_define" href="list_8h.html#aaba6eb05d67ebc8026bea29193eca28f">listLIST_IS_EMPTY</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1230</span>          {</div>
<div class="line"><span class="lineno"> 1231</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a14513b7dd36055f73fba3c5ebbdc1b06">xTaskRemoveFromEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1232</span>            {</div>
<div class="line"><span class="lineno"> 1233</span>              <span class="comment">/* The task waiting has a higher priority so record that a</span></div>
<div class="line"><span class="lineno"> 1234</span><span class="comment">              context switch is required. */</span></div>
<div class="line"><span class="lineno"> 1235</span>              <span class="keywordflow">if</span>( pxHigherPriorityTaskWoken != NULL )</div>
<div class="line"><span class="lineno"> 1236</span>              {</div>
<div class="line"><span class="lineno"> 1237</span>                *pxHigherPriorityTaskWoken = <a class="code hl_define" href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a>;</div>
<div class="line"><span class="lineno"> 1238</span>              }</div>
<div class="line"><span class="lineno"> 1239</span>              <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1240</span>              {</div>
<div class="line"><span class="lineno"> 1241</span>                <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1242</span>              }</div>
<div class="line"><span class="lineno"> 1243</span>            }</div>
<div class="line"><span class="lineno"> 1244</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1245</span>            {</div>
<div class="line"><span class="lineno"> 1246</span>              <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1247</span>            }</div>
<div class="line"><span class="lineno"> 1248</span>          }</div>
<div class="line"><span class="lineno"> 1249</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1250</span>          {</div>
<div class="line"><span class="lineno"> 1251</span>            <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1252</span>          }</div>
<div class="line"><span class="lineno"> 1253</span>        }</div>
<div class="line"><span class="lineno"> 1254</span><span class="preprocessor">        #endif </span><span class="comment">/* configUSE_QUEUE_SETS */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 1255</span>      }</div>
<div class="line"><span class="lineno"> 1256</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1257</span>      {</div>
<div class="line"><span class="lineno"> 1258</span>        <span class="comment">/* Increment the lock count so the task that unlocks the queue</span></div>
<div class="line"><span class="lineno"> 1259</span><span class="comment">        knows that data was posted while it was locked. */</span></div>
<div class="line"><span class="lineno"> 1260</span>        pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a24ac3f0707f098da2a22244d843fcf82">cTxLock</a> = ( int8_t ) ( cTxLock + 1 );</div>
<div class="line"><span class="lineno"> 1261</span>      }</div>
<div class="line"><span class="lineno"> 1262</span> </div>
<div class="line"><span class="lineno"> 1263</span>      xReturn = <a class="code hl_define" href="projdefs_8h.html#a07848d3078849bd32353c69d30a479b3">pdPASS</a>;</div>
<div class="line"><span class="lineno"> 1264</span>    }</div>
<div class="line"><span class="lineno"> 1265</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1266</span>    {</div>
<div class="line"><span class="lineno"> 1267</span>      <a class="code hl_define" href="_free_r_t_o_s_8h.html#a71fa002ce8a199d38e697d94c613649f">traceQUEUE_SEND_FROM_ISR_FAILED</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1268</span>      xReturn = <a class="code hl_define" href="projdefs_8h.html#ae40de11e4044a83a97d2cb5d00ce608b">errQUEUE_FULL</a>;</div>
<div class="line"><span class="lineno"> 1269</span>    }</div>
<div class="line"><span class="lineno"> 1270</span>  }</div>
<div class="line"><span class="lineno"> 1271</span>  <a class="code hl_define" href="_free_r_t_o_s_8h.html#a2661e2c5a4e4afe5bef2ebe9872e28b3">portCLEAR_INTERRUPT_MASK_FROM_ISR</a>( uxSavedInterruptStatus );</div>
<div class="line"><span class="lineno"> 1272</span> </div>
<div class="line"><span class="lineno"> 1273</span>  <span class="keywordflow">return</span> xReturn;</div>
<div class="line"><span class="lineno"> 1274</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_config_8h_source.html#l00131">configASSERT</a>, <a class="el" href="queue_8c_source.html#l00116">QueueDefinition::cTxLock</a>, <a class="el" href="projdefs_8h_source.html#l00050">errQUEUE_FULL</a>, <a class="el" href="list_8h_source.html#l00250">listLIST_IS_EMPTY</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00814">mtCOVERAGE_TEST_MARKER</a>, <a class="el" href="projdefs_8h_source.html#l00044">pdFALSE</a>, <a class="el" href="projdefs_8h_source.html#l00047">pdPASS</a>, <a class="el" href="projdefs_8h_source.html#l00045">pdTRUE</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00806">portASSERT_IF_INTERRUPT_PRIORITY_INVALID</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00286">portCLEAR_INTERRUPT_MASK_FROM_ISR</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00282">portSET_INTERRUPT_MASK_FROM_ISR</a>, <a class="el" href="queue_8c_source.html#l00065">queueQUEUE_IS_MUTEX</a>, <a class="el" href="queue_8c_source.html#l00052">queueUNLOCKED</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00488">traceQUEUE_SEND_FROM_ISR</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00492">traceQUEUE_SEND_FROM_ISR_FAILED</a>, <a class="el" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">QueueDefinition::u</a>, <a class="el" href="queue_8c_source.html#l00113">QueueDefinition::uxItemSize</a>, <a class="el" href="queue_8c_source.html#l00111">QueueDefinition::uxMessagesWaiting</a>, <a class="el" href="queue_8c_source.html#l00075">SemaphoreData::xMutexHolder</a>, <a class="el" href="queue_8c_source.html#l00105">QueueDefinition::xSemaphore</a>, <a class="el" href="tasks_8c_source.html#l03137">xTaskRemoveFromEventList()</a>, and <a class="el" href="queue_8c_source.html#l00109">QueueDefinition::xTasksWaitingToReceive</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a4df49fafb6ba4400ede6f2d07a40865f_cgraph.png" border="0" usemap="#aqueue_8c_a4df49fafb6ba4400ede6f2d07a40865f_cgraph" alt=""/></div>
<map name="aqueue_8c_a4df49fafb6ba4400ede6f2d07a40865f_cgraph" id="aqueue_8c_a4df49fafb6ba4400ede6f2d07a40865f_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,148,83"/>
<area shape="rect" href="tasks_8c.html#a6d21c9054b62d8bc1bfb2724e11578d9" title=" " alt="" coords="196,56,381,83"/>
<area shape="poly" title=" " alt="" coords="148,67,180,67,180,72,148,72"/>
<area shape="rect" href="tasks_8c.html#ad1b2e4995f863a99cf980836efe330d7" title=" " alt="" coords="429,5,630,32"/>
<area shape="poly" title=" " alt="" coords="355,53,447,33,448,38,356,58"/>
<area shape="rect" href="list_8c.html#a274fdced76bbdd9d8a4c4840ded2920c" title=" " alt="" coords="479,56,581,83"/>
<area shape="poly" title=" " alt="" coords="382,67,463,67,463,72,382,72"/>
<area shape="rect" href="list_8c.html#a3240bc0f43fcf755be02bfc6de7dc6ef" title=" " alt="" coords="479,107,581,133"/>
<area shape="poly" title=" " alt="" coords="356,81,464,104,462,109,355,86"/>
</map>
</div>

</div>
</div>
<a id="a7d076f57a56ef50315418f8bbfba96fd" name="a7d076f57a56ef50315418f8bbfba96fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d076f57a56ef50315418f8bbfba96fd">&#9670;&#160;</a></span>xQueueIsQueueEmptyFromISR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xQueueIsQueueEmptyFromISR </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a></td>          <td class="paramname"><span class="paramname"><em>xQueue</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l02312">2312</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2313</span>{</div>
<div class="line"><span class="lineno"> 2314</span><a class="code hl_typedef" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xReturn;</div>
<div class="line"><span class="lineno"> 2315</span><a class="code hl_struct" href="struct_queue_definition.html">Queue_t</a> * <span class="keyword">const</span> pxQueue = xQueue;</div>
<div class="line"><span class="lineno"> 2316</span> </div>
<div class="line"><span class="lineno"> 2317</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 2318</span>  <span class="keywordflow">if</span>( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a> == ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0 )</div>
<div class="line"><span class="lineno"> 2319</span>  {</div>
<div class="line"><span class="lineno"> 2320</span>    xReturn = <a class="code hl_define" href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a>;</div>
<div class="line"><span class="lineno"> 2321</span>  }</div>
<div class="line"><span class="lineno"> 2322</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2323</span>  {</div>
<div class="line"><span class="lineno"> 2324</span>    xReturn = <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a>;</div>
<div class="line"><span class="lineno"> 2325</span>  }</div>
<div class="line"><span class="lineno"> 2326</span> </div>
<div class="line"><span class="lineno"> 2327</span>  <span class="keywordflow">return</span> xReturn;</div>
<div class="line"><span class="lineno"> 2328</span>} <span class="comment">/*lint !e818 xQueue could not be pointer to const because it is a typedef. */</span></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_config_8h_source.html#l00131">configASSERT</a>, <a class="el" href="projdefs_8h_source.html#l00044">pdFALSE</a>, <a class="el" href="projdefs_8h_source.html#l00045">pdTRUE</a>, and <a class="el" href="queue_8c_source.html#l00111">QueueDefinition::uxMessagesWaiting</a>.</p>

</div>
</div>
<a id="a76bbe8ebd21b3e89784e865d06f1058c" name="a76bbe8ebd21b3e89784e865d06f1058c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76bbe8ebd21b3e89784e865d06f1058c">&#9670;&#160;</a></span>xQueueIsQueueFullFromISR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xQueueIsQueueFullFromISR </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a></td>          <td class="paramname"><span class="paramname"><em>xQueue</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l02352">2352</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2353</span>{</div>
<div class="line"><span class="lineno"> 2354</span><a class="code hl_typedef" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xReturn;</div>
<div class="line"><span class="lineno"> 2355</span><a class="code hl_struct" href="struct_queue_definition.html">Queue_t</a> * <span class="keyword">const</span> pxQueue = xQueue;</div>
<div class="line"><span class="lineno"> 2356</span> </div>
<div class="line"><span class="lineno"> 2357</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 2358</span>  <span class="keywordflow">if</span>( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a> == pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#ae80d17a812c669d4d41265b7f693988c">uxLength</a> )</div>
<div class="line"><span class="lineno"> 2359</span>  {</div>
<div class="line"><span class="lineno"> 2360</span>    xReturn = <a class="code hl_define" href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a>;</div>
<div class="line"><span class="lineno"> 2361</span>  }</div>
<div class="line"><span class="lineno"> 2362</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2363</span>  {</div>
<div class="line"><span class="lineno"> 2364</span>    xReturn = <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a>;</div>
<div class="line"><span class="lineno"> 2365</span>  }</div>
<div class="line"><span class="lineno"> 2366</span> </div>
<div class="line"><span class="lineno"> 2367</span>  <span class="keywordflow">return</span> xReturn;</div>
<div class="line"><span class="lineno"> 2368</span>} <span class="comment">/*lint !e818 xQueue could not be pointer to const because it is a typedef. */</span></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_config_8h_source.html#l00131">configASSERT</a>, <a class="el" href="projdefs_8h_source.html#l00044">pdFALSE</a>, <a class="el" href="projdefs_8h_source.html#l00045">pdTRUE</a>, <a class="el" href="queue_8c_source.html#l00112">QueueDefinition::uxLength</a>, and <a class="el" href="queue_8c_source.html#l00111">QueueDefinition::uxMessagesWaiting</a>.</p>

</div>
</div>
<a id="a8f68e37e931bbf95440c8845f512e090" name="a8f68e37e931bbf95440c8845f512e090"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f68e37e931bbf95440c8845f512e090">&#9670;&#160;</a></span>xQueuePeek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xQueuePeek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a></td>          <td class="paramname"><span class="paramname"><em>xQueue</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *const</td>          <td class="paramname"><span class="paramname"><em>pvBuffer</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="portmacro_8h.html#aa69c48c6e902ce54f70886e6573c92a9">TickType_t</a></td>          <td class="paramname"><span class="paramname"><em>xTicksToWait</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l01636">1636</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1637</span>{</div>
<div class="line"><span class="lineno"> 1638</span><a class="code hl_typedef" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xEntryTimeSet = <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a>;</div>
<div class="line"><span class="lineno"> 1639</span><a class="code hl_struct" href="structx_t_i_m_e___o_u_t.html">TimeOut_t</a> xTimeOut;</div>
<div class="line"><span class="lineno"> 1640</span>int8_t *pcOriginalReadPosition;</div>
<div class="line"><span class="lineno"> 1641</span><a class="code hl_struct" href="struct_queue_definition.html">Queue_t</a> * <span class="keyword">const</span> pxQueue = xQueue;</div>
<div class="line"><span class="lineno"> 1642</span> </div>
<div class="line"><span class="lineno"> 1643</span>  <span class="comment">/* Check the pointer is not NULL. */</span></div>
<div class="line"><span class="lineno"> 1644</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( ( pxQueue ) );</div>
<div class="line"><span class="lineno"> 1645</span> </div>
<div class="line"><span class="lineno"> 1646</span>  <span class="comment">/* The buffer into which data is received can only be NULL if the data size</span></div>
<div class="line"><span class="lineno"> 1647</span><span class="comment">  is zero (so no data is copied into the buffer. */</span></div>
<div class="line"><span class="lineno"> 1648</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( !( ( ( pvBuffer ) == NULL ) &amp;&amp; ( ( pxQueue )-&gt;uxItemSize != ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0U ) ) );</div>
<div class="line"><span class="lineno"> 1649</span> </div>
<div class="line"><span class="lineno"> 1650</span>  <span class="comment">/* Cannot block if the scheduler is suspended. */</span></div>
<div class="line"><span class="lineno"> 1651</span><span class="preprocessor">  #if ( ( INCLUDE_xTaskGetSchedulerState == 1 ) || ( configUSE_TIMERS == 1 ) )</span></div>
<div class="line"><span class="lineno"> 1652</span>  {</div>
<div class="line"><span class="lineno"> 1653</span>    <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( !( ( <a class="code hl_function" href="task_8h.html#a0241000e08a261372186d34825a35979">xTaskGetSchedulerState</a>() == <a class="code hl_define" href="task_8h.html#a0cad071ca127a35df93166e9ed5b6ada">taskSCHEDULER_SUSPENDED</a> ) &amp;&amp; ( xTicksToWait != 0 ) ) );</div>
<div class="line"><span class="lineno"> 1654</span>  }</div>
<div class="line"><span class="lineno"> 1655</span><span class="preprocessor">  #endif</span></div>
<div class="line"><span class="lineno"> 1656</span> </div>
<div class="line"><span class="lineno"> 1657</span> </div>
<div class="line"><span class="lineno"> 1658</span>  <span class="comment">/*lint -save -e904  This function relaxes the coding standard somewhat to</span></div>
<div class="line"><span class="lineno"> 1659</span><span class="comment">  allow return statements within the function itself.  This is done in the</span></div>
<div class="line"><span class="lineno"> 1660</span><span class="comment">  interest of execution time efficiency. */</span></div>
<div class="line"><span class="lineno"> 1661</span>  <span class="keywordflow">for</span>( ;; )</div>
<div class="line"><span class="lineno"> 1662</span>  {</div>
<div class="line"><span class="lineno"> 1663</span>    <a class="code hl_define" href="task_8h.html#ab7bf0ae866292ba8296091a9d5209689">taskENTER_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1664</span>    {</div>
<div class="line"><span class="lineno"> 1665</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxMessagesWaiting = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a>;</div>
<div class="line"><span class="lineno"> 1666</span> </div>
<div class="line"><span class="lineno"> 1667</span>      <span class="comment">/* Is there data in the queue now?  To be running the calling task</span></div>
<div class="line"><span class="lineno"> 1668</span><span class="comment">      must be the highest priority task wanting to access the queue. */</span></div>
<div class="line"><span class="lineno"> 1669</span>      <span class="keywordflow">if</span>( uxMessagesWaiting &gt; ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0 )</div>
<div class="line"><span class="lineno"> 1670</span>      {</div>
<div class="line"><span class="lineno"> 1671</span>        <span class="comment">/* Remember the read position so it can be reset after the data</span></div>
<div class="line"><span class="lineno"> 1672</span><span class="comment">        is read from the queue as this function is only peeking the</span></div>
<div class="line"><span class="lineno"> 1673</span><span class="comment">        data, not removing it. */</span></div>
<div class="line"><span class="lineno"> 1674</span>        pcOriginalReadPosition = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#af381d02bbe6bc4a77934c6fd97598913">pcReadFrom</a>;</div>
<div class="line"><span class="lineno"> 1675</span> </div>
<div class="line"><span class="lineno"> 1676</span>        <a class="code hl_function" href="#ad9a2e17b2b13d4878f7af1361437320e">prvCopyDataFromQueue</a>( pxQueue, pvBuffer );</div>
<div class="line"><span class="lineno"> 1677</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#acd24b909ecdd18ed844cdede3027e534">traceQUEUE_PEEK</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1678</span> </div>
<div class="line"><span class="lineno"> 1679</span>        <span class="comment">/* The data is not being removed, so reset the read pointer. */</span></div>
<div class="line"><span class="lineno"> 1680</span>        pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#af381d02bbe6bc4a77934c6fd97598913">pcReadFrom</a> = pcOriginalReadPosition;</div>
<div class="line"><span class="lineno"> 1681</span> </div>
<div class="line"><span class="lineno"> 1682</span>        <span class="comment">/* The data is being left in the queue, so see if there are</span></div>
<div class="line"><span class="lineno"> 1683</span><span class="comment">        any other tasks waiting for the data. */</span></div>
<div class="line"><span class="lineno"> 1684</span>        <span class="keywordflow">if</span>( <a class="code hl_define" href="list_8h.html#aaba6eb05d67ebc8026bea29193eca28f">listLIST_IS_EMPTY</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1685</span>        {</div>
<div class="line"><span class="lineno"> 1686</span>          <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a14513b7dd36055f73fba3c5ebbdc1b06">xTaskRemoveFromEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ) ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1687</span>          {</div>
<div class="line"><span class="lineno"> 1688</span>            <span class="comment">/* The task waiting has a higher priority than this task. */</span></div>
<div class="line"><span class="lineno"> 1689</span>            <a class="code hl_define" href="#adb4472163ac5b0e8ad72183d69387b81">queueYIELD_IF_USING_PREEMPTION</a>();</div>
<div class="line"><span class="lineno"> 1690</span>          }</div>
<div class="line"><span class="lineno"> 1691</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1692</span>          {</div>
<div class="line"><span class="lineno"> 1693</span>            <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1694</span>          }</div>
<div class="line"><span class="lineno"> 1695</span>        }</div>
<div class="line"><span class="lineno"> 1696</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1697</span>        {</div>
<div class="line"><span class="lineno"> 1698</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1699</span>        }</div>
<div class="line"><span class="lineno"> 1700</span> </div>
<div class="line"><span class="lineno"> 1701</span>        <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1702</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="projdefs_8h.html#a07848d3078849bd32353c69d30a479b3">pdPASS</a>;</div>
<div class="line"><span class="lineno"> 1703</span>      }</div>
<div class="line"><span class="lineno"> 1704</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1705</span>      {</div>
<div class="line"><span class="lineno"> 1706</span>        <span class="keywordflow">if</span>( xTicksToWait == ( <a class="code hl_typedef" href="portmacro_8h.html#aa69c48c6e902ce54f70886e6573c92a9">TickType_t</a> ) 0 )</div>
<div class="line"><span class="lineno"> 1707</span>        {</div>
<div class="line"><span class="lineno"> 1708</span>          <span class="comment">/* The queue was empty and no block time is specified (or</span></div>
<div class="line"><span class="lineno"> 1709</span><span class="comment">          the block time has expired) so leave now. */</span></div>
<div class="line"><span class="lineno"> 1710</span>          <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1711</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#afa4b34739a92eb44f09947a669c98fb7">traceQUEUE_PEEK_FAILED</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1712</span>          <span class="keywordflow">return</span> <a class="code hl_define" href="projdefs_8h.html#a4d79b09954b1efa73ad8d87a36b4a575">errQUEUE_EMPTY</a>;</div>
<div class="line"><span class="lineno"> 1713</span>        }</div>
<div class="line"><span class="lineno"> 1714</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( xEntryTimeSet == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1715</span>        {</div>
<div class="line"><span class="lineno"> 1716</span>          <span class="comment">/* The queue was empty and a block time was specified so</span></div>
<div class="line"><span class="lineno"> 1717</span><span class="comment">          configure the timeout structure ready to enter the blocked</span></div>
<div class="line"><span class="lineno"> 1718</span><span class="comment">          state. */</span></div>
<div class="line"><span class="lineno"> 1719</span>          <a class="code hl_function" href="task_8h.html#a9bff8681d5ed262e71b92805ca0da909">vTaskInternalSetTimeOutState</a>( &amp;xTimeOut );</div>
<div class="line"><span class="lineno"> 1720</span>          xEntryTimeSet = <a class="code hl_define" href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a>;</div>
<div class="line"><span class="lineno"> 1721</span>        }</div>
<div class="line"><span class="lineno"> 1722</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1723</span>        {</div>
<div class="line"><span class="lineno"> 1724</span>          <span class="comment">/* Entry time was already set. */</span></div>
<div class="line"><span class="lineno"> 1725</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1726</span>        }</div>
<div class="line"><span class="lineno"> 1727</span>      }</div>
<div class="line"><span class="lineno"> 1728</span>    }</div>
<div class="line"><span class="lineno"> 1729</span>    <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1730</span> </div>
<div class="line"><span class="lineno"> 1731</span>    <span class="comment">/* Interrupts and other tasks can send to and receive from the queue</span></div>
<div class="line"><span class="lineno"> 1732</span><span class="comment">    now the critical section has been exited. */</span></div>
<div class="line"><span class="lineno"> 1733</span> </div>
<div class="line"><span class="lineno"> 1734</span>    <a class="code hl_function" href="task_8h.html#a366b302eba79d10b5ee2a3756f0fcc43">vTaskSuspendAll</a>();</div>
<div class="line"><span class="lineno"> 1735</span>    <a class="code hl_define" href="#ae4efd14c0f4dee7f189ef2e4d9ce1f1b">prvLockQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1736</span> </div>
<div class="line"><span class="lineno"> 1737</span>    <span class="comment">/* Update the timeout state to see if it has expired yet. */</span></div>
<div class="line"><span class="lineno"> 1738</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a3b018a85d339e536a6c05748dd666a3a">xTaskCheckForTimeOut</a>( &amp;xTimeOut, &amp;xTicksToWait ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1739</span>    {</div>
<div class="line"><span class="lineno"> 1740</span>      <span class="comment">/* Timeout has not expired yet, check to see if there is data in the</span></div>
<div class="line"><span class="lineno"> 1741</span><span class="comment">      queue now, and if not enter the Blocked state to wait for data. */</span></div>
<div class="line"><span class="lineno"> 1742</span>      <span class="keywordflow">if</span>( <a class="code hl_function" href="#a8f21d4b7a21be0d109953120c93f6741">prvIsQueueEmpty</a>( pxQueue ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1743</span>      {</div>
<div class="line"><span class="lineno"> 1744</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#a186c66f73c470500e556ec0f2fd3994f">traceBLOCKING_ON_QUEUE_PEEK</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1745</span>        <a class="code hl_function" href="task_8h.html#a56ae23bc0dece4522d666959902221ca">vTaskPlaceOnEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ), xTicksToWait );</div>
<div class="line"><span class="lineno"> 1746</span>        <a class="code hl_function" href="#a7297c84a7c770ed57567bad1d3e2faf6">prvUnlockQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1747</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a003f8ae6d649225abd030cc76e1c7d0e">xTaskResumeAll</a>() == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1748</span>        {</div>
<div class="line"><span class="lineno"> 1749</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#af4484fc07631a16e45ac5f29a3f0556e">portYIELD_WITHIN_API</a>();</div>
<div class="line"><span class="lineno"> 1750</span>        }</div>
<div class="line"><span class="lineno"> 1751</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1752</span>        {</div>
<div class="line"><span class="lineno"> 1753</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1754</span>        }</div>
<div class="line"><span class="lineno"> 1755</span>      }</div>
<div class="line"><span class="lineno"> 1756</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1757</span>      {</div>
<div class="line"><span class="lineno"> 1758</span>        <span class="comment">/* There is data in the queue now, so don&#39;t enter the blocked</span></div>
<div class="line"><span class="lineno"> 1759</span><span class="comment">        state, instead return to try and obtain the data. */</span></div>
<div class="line"><span class="lineno"> 1760</span>        <a class="code hl_function" href="#a7297c84a7c770ed57567bad1d3e2faf6">prvUnlockQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1761</span>        ( void ) <a class="code hl_function" href="task_8h.html#a003f8ae6d649225abd030cc76e1c7d0e">xTaskResumeAll</a>();</div>
<div class="line"><span class="lineno"> 1762</span>      }</div>
<div class="line"><span class="lineno"> 1763</span>    }</div>
<div class="line"><span class="lineno"> 1764</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1765</span>    {</div>
<div class="line"><span class="lineno"> 1766</span>      <span class="comment">/* The timeout has expired.  If there is still no data in the queue</span></div>
<div class="line"><span class="lineno"> 1767</span><span class="comment">      exit, otherwise go back and try to read the data again. */</span></div>
<div class="line"><span class="lineno"> 1768</span>      <a class="code hl_function" href="#a7297c84a7c770ed57567bad1d3e2faf6">prvUnlockQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1769</span>      ( void ) <a class="code hl_function" href="task_8h.html#a003f8ae6d649225abd030cc76e1c7d0e">xTaskResumeAll</a>();</div>
<div class="line"><span class="lineno"> 1770</span> </div>
<div class="line"><span class="lineno"> 1771</span>      <span class="keywordflow">if</span>( <a class="code hl_function" href="#a8f21d4b7a21be0d109953120c93f6741">prvIsQueueEmpty</a>( pxQueue ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1772</span>      {</div>
<div class="line"><span class="lineno"> 1773</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#afa4b34739a92eb44f09947a669c98fb7">traceQUEUE_PEEK_FAILED</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1774</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="projdefs_8h.html#a4d79b09954b1efa73ad8d87a36b4a575">errQUEUE_EMPTY</a>;</div>
<div class="line"><span class="lineno"> 1775</span>      }</div>
<div class="line"><span class="lineno"> 1776</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1777</span>      {</div>
<div class="line"><span class="lineno"> 1778</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1779</span>      }</div>
<div class="line"><span class="lineno"> 1780</span>    }</div>
<div class="line"><span class="lineno"> 1781</span>  } <span class="comment">/*lint -restore */</span></div>
<div class="line"><span class="lineno"> 1782</span>}</div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_a186c66f73c470500e556ec0f2fd3994f"><div class="ttname"><a href="_free_r_t_o_s_8h.html#a186c66f73c470500e556ec0f2fd3994f">traceBLOCKING_ON_QUEUE_PEEK</a></div><div class="ttdeci">#define traceBLOCKING_ON_QUEUE_PEEK(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00386">FreeRTOS.h:386</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_acd24b909ecdd18ed844cdede3027e534"><div class="ttname"><a href="_free_r_t_o_s_8h.html#acd24b909ecdd18ed844cdede3027e534">traceQUEUE_PEEK</a></div><div class="ttdeci">#define traceQUEUE_PEEK(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00472">FreeRTOS.h:472</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_afa4b34739a92eb44f09947a669c98fb7"><div class="ttname"><a href="_free_r_t_o_s_8h.html#afa4b34739a92eb44f09947a669c98fb7">traceQUEUE_PEEK_FAILED</a></div><div class="ttdeci">#define traceQUEUE_PEEK_FAILED(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00476">FreeRTOS.h:476</a></div></div>
<div class="ttc" id="aprojdefs_8h_html_a4d79b09954b1efa73ad8d87a36b4a575"><div class="ttname"><a href="projdefs_8h.html#a4d79b09954b1efa73ad8d87a36b4a575">errQUEUE_EMPTY</a></div><div class="ttdeci">#define errQUEUE_EMPTY</div><div class="ttdef"><b>Definition</b> <a href="projdefs_8h_source.html#l00049">projdefs.h:49</a></div></div>
<div class="ttc" id="aqueue_8c_html_a8f21d4b7a21be0d109953120c93f6741"><div class="ttname"><a href="#a8f21d4b7a21be0d109953120c93f6741">prvIsQueueEmpty</a></div><div class="ttdeci">static BaseType_t prvIsQueueEmpty(const Queue_t *pxQueue) PRIVILEGED_FUNCTION</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l02291">queue.c:2291</a></div></div>
<div class="ttc" id="aqueue_8c_html_ad9a2e17b2b13d4878f7af1361437320e"><div class="ttname"><a href="#ad9a2e17b2b13d4878f7af1361437320e">prvCopyDataFromQueue</a></div><div class="ttdeci">static void prvCopyDataFromQueue(Queue_t *const pxQueue, void *const pvBuffer) PRIVILEGED_FUNCTION</div><div class="ttdef"><b>Definition</b> <a href="queue_8c_source.html#l02153">queue.c:2153</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_config_8h_source.html#l00131">configASSERT</a>, <a class="el" href="projdefs_8h_source.html#l00049">errQUEUE_EMPTY</a>, <a class="el" href="list_8h_source.html#l00250">listLIST_IS_EMPTY</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00814">mtCOVERAGE_TEST_MARKER</a>, <a class="el" href="queue_8c_source.html#l00070">QueuePointers::pcReadFrom</a>, <a class="el" href="projdefs_8h_source.html#l00044">pdFALSE</a>, <a class="el" href="projdefs_8h_source.html#l00047">pdPASS</a>, <a class="el" href="projdefs_8h_source.html#l00045">pdTRUE</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00746">portYIELD_WITHIN_API</a>, <a class="el" href="queue_8c_source.html#l02153">prvCopyDataFromQueue()</a>, <a class="el" href="queue_8c_source.html#l02291">prvIsQueueEmpty()</a>, <a class="el" href="queue_8c_source.html#l00240">prvLockQueue</a>, <a class="el" href="queue_8c_source.html#l02171">prvUnlockQueue()</a>, <a class="el" href="queue_8c_source.html#l00087">queueYIELD_IF_USING_PREEMPTION</a>, <a class="el" href="task_8h_source.html#l00187">taskENTER_CRITICAL</a>, <a class="el" href="task_8h_source.html#l00202">taskEXIT_CRITICAL</a>, <a class="el" href="task_8h_source.html#l00227">taskSCHEDULER_SUSPENDED</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00386">traceBLOCKING_ON_QUEUE_PEEK</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00472">traceQUEUE_PEEK</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00476">traceQUEUE_PEEK_FAILED</a>, <a class="el" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">QueueDefinition::u</a>, <a class="el" href="queue_8c_source.html#l00111">QueueDefinition::uxMessagesWaiting</a>, <a class="el" href="tasks_8c_source.html#l03265">vTaskInternalSetTimeOutState()</a>, <a class="el" href="tasks_8c_source.html#l03063">vTaskPlaceOnEventList()</a>, <a class="el" href="tasks_8c_source.html#l02109">vTaskSuspendAll()</a>, <a class="el" href="queue_8c_source.html#l00104">QueueDefinition::xQueue</a>, <a class="el" href="tasks_8c_source.html#l03273">xTaskCheckForTimeOut()</a>, <a class="el" href="task_8h.html#a0241000e08a261372186d34825a35979">xTaskGetSchedulerState()</a>, <a class="el" href="tasks_8c_source.html#l03137">xTaskRemoveFromEventList()</a>, <a class="el" href="tasks_8c_source.html#l02193">xTaskResumeAll()</a>, and <a class="el" href="queue_8c_source.html#l00109">QueueDefinition::xTasksWaitingToReceive</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_a8f68e37e931bbf95440c8845f512e090_cgraph.png" border="0" usemap="#aqueue_8c_a8f68e37e931bbf95440c8845f512e090_cgraph" alt=""/></div>
<map name="aqueue_8c_a8f68e37e931bbf95440c8845f512e090_cgraph" id="aqueue_8c_a8f68e37e931bbf95440c8845f512e090_cgraph">
<area shape="rect" title=" " alt="" coords="5,233,102,260"/>
<area shape="rect" href="queue_8c.html#ad9a2e17b2b13d4878f7af1361437320e" title=" " alt="" coords="152,5,314,32"/>
<area shape="poly" title=" " alt="" coords="55,232,64,195,81,144,108,89,127,64,148,42,153,38,156,42,151,46,131,68,113,92,86,146,69,196,60,234"/>
<area shape="rect" href="queue_8c.html#a8f21d4b7a21be0d109953120c93f6741" title=" " alt="" coords="171,56,295,83"/>
<area shape="poly" title=" " alt="" coords="57,232,88,166,114,126,148,93,156,87,159,92,151,97,119,130,93,168,62,234"/>
<area shape="rect" href="queue_8c.html#a7297c84a7c770ed57567bad1d3e2faf6" title=" " alt="" coords="175,259,291,285"/>
<area shape="poly" title=" " alt="" coords="103,251,160,259,159,264,102,256"/>
<area shape="rect" href="tasks_8c.html#a6d21c9054b62d8bc1bfb2724e11578d9" title=" " alt="" coords="378,309,563,336"/>
<area shape="poly" title=" " alt="" coords="65,259,98,304,122,328,151,346,191,353,249,352,379,337,379,342,249,358,191,358,149,350,119,332,94,308,60,262"/>
<area shape="rect" href="tasks_8c.html#a91fbc7c4b65e32fae51b7d43ebdcb131" title=" " alt="" coords="372,208,568,235"/>
<area shape="poly" title=" " alt="" coords="73,230,107,210,149,193,216,183,284,184,349,191,404,201,403,207,348,196,284,189,217,189,150,199,109,215,75,235"/>
<area shape="rect" href="tasks_8c.html#adc9eb47ceecf7dd7ee325bebff9eafc5" title=" " alt="" coords="154,107,312,133"/>
<area shape="poly" title=" " alt="" coords="63,231,99,192,148,150,171,137,173,142,151,154,102,195,67,235"/>
<area shape="rect" href="tasks_8c.html#a084d232640bd1d04bcac0b8784417015" title=" " alt="" coords="173,309,293,336"/>
<area shape="poly" title=" " alt="" coords="79,258,151,295,168,301,166,306,149,300,77,263"/>
<area shape="rect" href="tasks_8c.html#acfc8de487c86355713d0e8546506d9e4" title=" " alt="" coords="152,208,314,235"/>
<area shape="poly" title=" " alt="" coords="102,237,136,232,137,238,103,243"/>
<area shape="rect" href="task_8h.html#a0241000e08a261372186d34825a35979" title=" " alt="" coords="150,411,316,437"/>
<area shape="poly" title=" " alt="" coords="63,259,94,321,120,358,151,390,169,402,167,406,148,394,116,361,90,324,58,262"/>
<area shape="rect" href="tasks_8c.html#adf830ea0f150fcdfdaa944667137f080" title=" " alt="" coords="173,461,293,488"/>
<area shape="poly" title=" " alt="" coords="60,260,69,297,86,348,113,401,131,426,151,447,161,454,158,458,148,451,127,429,108,404,81,350,64,298,55,261"/>
<area shape="rect" href="tasks_8c.html#a33c369f5f08ab96659f94093fdb985af" title=" " alt="" coords="408,259,533,285"/>
<area shape="poly" title=" " alt="" coords="291,269,392,269,392,275,291,275"/>
<area shape="poly" title=" " alt="" coords="292,282,390,303,389,308,290,287"/>
<area shape="rect" href="tasks_8c.html#ad1b2e4995f863a99cf980836efe330d7" title=" " alt="" coords="624,461,826,488"/>
<area shape="poly" title=" " alt="" coords="494,334,534,362,578,397,601,424,611,436,626,447,637,453,634,457,623,452,607,440,597,427,574,401,531,366,491,339"/>
<area shape="rect" href="list_8c.html#a274fdced76bbdd9d8a4c4840ded2920c" title=" " alt="" coords="674,335,776,361"/>
<area shape="poly" title=" " alt="" coords="564,329,659,339,658,344,563,335"/>
<area shape="rect" href="list_8c.html#a3240bc0f43fcf755be02bfc6de7dc6ef" title=" " alt="" coords="674,220,776,247"/>
<area shape="poly" title=" " alt="" coords="536,306,575,295,681,251,683,256,577,300,538,311"/>
<area shape="rect" href="tasks_8c.html#ab4574e77d9aea876272e563c68f639da" title=" " alt="" coords="364,157,576,184"/>
<area shape="poly" title=" " alt="" coords="299,131,390,151,389,156,298,137"/>
<area shape="rect" href="list_8c.html#a28faa70d3ec4b4f39e53b0fc52d62ecf" title=" " alt="" coords="685,132,765,159"/>
<area shape="poly" title=" " alt="" coords="312,121,670,140,670,145,312,127"/>
<area shape="poly" title=" " alt="" coords="555,182,578,194,595,208,605,223,613,239,626,257,696,322,693,326,622,260,609,242,600,226,591,212,575,198,552,187"/>
<area shape="poly" title=" " alt="" coords="530,182,577,193,659,214,658,219,576,199,529,187"/>
<area shape="poly" title=" " alt="" coords="577,157,670,148,670,153,577,163"/>
<area shape="poly" title=" " alt="" coords="314,219,357,219,357,224,314,224"/>
<area shape="poly" title=" " alt="" coords="293,472,609,472,609,477,293,477"/>
<area shape="poly" title=" " alt="" coords="291,458,315,447,329,435,337,422,347,408,363,396,418,379,496,365,658,349,659,355,497,371,419,384,365,401,350,412,342,425,333,438,317,452,293,463"/>
<area shape="rect" href="tasks_8c.html#a54f31e9aef0eb7b87e48c7d68ecc84c1" title=" " alt="" coords="402,411,539,437"/>
<area shape="poly" title=" " alt="" coords="292,459,389,438,390,444,293,465"/>
<area shape="poly" title=" " alt="" coords="517,408,662,364,664,369,519,413"/>
<area shape="rect" href="cmsis__os2_8c.html#a9ca051aa77e17583aa5a85d5de5c199a" title=" " alt="" coords="653,411,797,437"/>
<area shape="poly" title=" " alt="" coords="539,421,637,421,637,427,539,427"/>
</map>
</div>

</div>
</div>
<a id="af67763957452955ac663c374d71278ce" name="af67763957452955ac663c374d71278ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af67763957452955ac663c374d71278ce">&#9670;&#160;</a></span>xQueuePeekFromISR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xQueuePeekFromISR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a></td>          <td class="paramname"><span class="paramname"><em>xQueue</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *const</td>          <td class="paramname"><span class="paramname"><em>pvBuffer</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l01876">1876</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1877</span>{</div>
<div class="line"><span class="lineno"> 1878</span><a class="code hl_typedef" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xReturn;</div>
<div class="line"><span class="lineno"> 1879</span><a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxSavedInterruptStatus;</div>
<div class="line"><span class="lineno"> 1880</span>int8_t *pcOriginalReadPosition;</div>
<div class="line"><span class="lineno"> 1881</span><a class="code hl_struct" href="struct_queue_definition.html">Queue_t</a> * <span class="keyword">const</span> pxQueue = xQueue;</div>
<div class="line"><span class="lineno"> 1882</span> </div>
<div class="line"><span class="lineno"> 1883</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1884</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( !( ( pvBuffer == NULL ) &amp;&amp; ( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a> != ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0U ) ) );</div>
<div class="line"><span class="lineno"> 1885</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a> != 0 ); <span class="comment">/* Can&#39;t peek a semaphore. */</span></div>
<div class="line"><span class="lineno"> 1886</span> </div>
<div class="line"><span class="lineno"> 1887</span>  <span class="comment">/* RTOS ports that support interrupt nesting have the concept of a maximum</span></div>
<div class="line"><span class="lineno"> 1888</span><span class="comment">  system call (or maximum API call) interrupt priority.  Interrupts that are</span></div>
<div class="line"><span class="lineno"> 1889</span><span class="comment">  above the maximum system call priority are kept permanently enabled, even</span></div>
<div class="line"><span class="lineno"> 1890</span><span class="comment">  when the RTOS kernel is in a critical section, but cannot make any calls to</span></div>
<div class="line"><span class="lineno"> 1891</span><span class="comment">  FreeRTOS API functions.  If configASSERT() is defined in FreeRTOSConfig.h</span></div>
<div class="line"><span class="lineno"> 1892</span><span class="comment">  then portASSERT_IF_INTERRUPT_PRIORITY_INVALID() will result in an assertion</span></div>
<div class="line"><span class="lineno"> 1893</span><span class="comment">  failure if a FreeRTOS API function is called from an interrupt that has been</span></div>
<div class="line"><span class="lineno"> 1894</span><span class="comment">  assigned a priority above the configured maximum system call priority.</span></div>
<div class="line"><span class="lineno"> 1895</span><span class="comment">  Only FreeRTOS functions that end in FromISR can be called from interrupts</span></div>
<div class="line"><span class="lineno"> 1896</span><span class="comment">  that have been assigned a priority at or (logically) below the maximum</span></div>
<div class="line"><span class="lineno"> 1897</span><span class="comment">  system call interrupt priority.  FreeRTOS maintains a separate interrupt</span></div>
<div class="line"><span class="lineno"> 1898</span><span class="comment">  safe API to ensure interrupt entry is as fast and as simple as possible.</span></div>
<div class="line"><span class="lineno"> 1899</span><span class="comment">  More information (albeit Cortex-M specific) is provided on the following</span></div>
<div class="line"><span class="lineno"> 1900</span><span class="comment">  link: http://www.freertos.org/RTOS-Cortex-M3-M4.html */</span></div>
<div class="line"><span class="lineno"> 1901</span>  <a class="code hl_define" href="_free_r_t_o_s_8h.html#a10f75d20c71c4289f96d1b89cb6c62e2">portASSERT_IF_INTERRUPT_PRIORITY_INVALID</a>();</div>
<div class="line"><span class="lineno"> 1902</span> </div>
<div class="line"><span class="lineno"> 1903</span>  uxSavedInterruptStatus = <a class="code hl_define" href="_free_r_t_o_s_8h.html#a31b4260dbc1823ba80b578f86eb15a98">portSET_INTERRUPT_MASK_FROM_ISR</a>();</div>
<div class="line"><span class="lineno"> 1904</span>  {</div>
<div class="line"><span class="lineno"> 1905</span>    <span class="comment">/* Cannot block in an ISR, so check there is data available. */</span></div>
<div class="line"><span class="lineno"> 1906</span>    <span class="keywordflow">if</span>( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a> &gt; ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0 )</div>
<div class="line"><span class="lineno"> 1907</span>    {</div>
<div class="line"><span class="lineno"> 1908</span>      <a class="code hl_define" href="_free_r_t_o_s_8h.html#a3e2a14b61c26f9690deb26d76cc801ee">traceQUEUE_PEEK_FROM_ISR</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1909</span> </div>
<div class="line"><span class="lineno"> 1910</span>      <span class="comment">/* Remember the read position so it can be reset as nothing is</span></div>
<div class="line"><span class="lineno"> 1911</span><span class="comment">      actually being removed from the queue. */</span></div>
<div class="line"><span class="lineno"> 1912</span>      pcOriginalReadPosition = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#af381d02bbe6bc4a77934c6fd97598913">pcReadFrom</a>;</div>
<div class="line"><span class="lineno"> 1913</span>      <a class="code hl_function" href="#ad9a2e17b2b13d4878f7af1361437320e">prvCopyDataFromQueue</a>( pxQueue, pvBuffer );</div>
<div class="line"><span class="lineno"> 1914</span>      pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#aea4a2daf33054ff6b535f158bd4007f0">xQueue</a>.<a class="code hl_variable" href="struct_queue_pointers.html#af381d02bbe6bc4a77934c6fd97598913">pcReadFrom</a> = pcOriginalReadPosition;</div>
<div class="line"><span class="lineno"> 1915</span> </div>
<div class="line"><span class="lineno"> 1916</span>      xReturn = <a class="code hl_define" href="projdefs_8h.html#a07848d3078849bd32353c69d30a479b3">pdPASS</a>;</div>
<div class="line"><span class="lineno"> 1917</span>    }</div>
<div class="line"><span class="lineno"> 1918</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1919</span>    {</div>
<div class="line"><span class="lineno"> 1920</span>      xReturn = <a class="code hl_define" href="projdefs_8h.html#a99e2866c8cf4fe86db87dab62e7d6aa6">pdFAIL</a>;</div>
<div class="line"><span class="lineno"> 1921</span>      <a class="code hl_define" href="_free_r_t_o_s_8h.html#a72ea0f09cc6a38363f2b5217aab27fd3">traceQUEUE_PEEK_FROM_ISR_FAILED</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1922</span>    }</div>
<div class="line"><span class="lineno"> 1923</span>  }</div>
<div class="line"><span class="lineno"> 1924</span>  <a class="code hl_define" href="_free_r_t_o_s_8h.html#a2661e2c5a4e4afe5bef2ebe9872e28b3">portCLEAR_INTERRUPT_MASK_FROM_ISR</a>( uxSavedInterruptStatus );</div>
<div class="line"><span class="lineno"> 1925</span> </div>
<div class="line"><span class="lineno"> 1926</span>  <span class="keywordflow">return</span> xReturn;</div>
<div class="line"><span class="lineno"> 1927</span>}</div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_a3e2a14b61c26f9690deb26d76cc801ee"><div class="ttname"><a href="_free_r_t_o_s_8h.html#a3e2a14b61c26f9690deb26d76cc801ee">traceQUEUE_PEEK_FROM_ISR</a></div><div class="ttdeci">#define traceQUEUE_PEEK_FROM_ISR(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00480">FreeRTOS.h:480</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_a72ea0f09cc6a38363f2b5217aab27fd3"><div class="ttname"><a href="_free_r_t_o_s_8h.html#a72ea0f09cc6a38363f2b5217aab27fd3">traceQUEUE_PEEK_FROM_ISR_FAILED</a></div><div class="ttdeci">#define traceQUEUE_PEEK_FROM_ISR_FAILED(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00504">FreeRTOS.h:504</a></div></div>
<div class="ttc" id="aprojdefs_8h_html_a99e2866c8cf4fe86db87dab62e7d6aa6"><div class="ttname"><a href="projdefs_8h.html#a99e2866c8cf4fe86db87dab62e7d6aa6">pdFAIL</a></div><div class="ttdeci">#define pdFAIL</div><div class="ttdef"><b>Definition</b> <a href="projdefs_8h_source.html#l00048">projdefs.h:48</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_config_8h_source.html#l00131">configASSERT</a>, <a class="el" href="queue_8c_source.html#l00070">QueuePointers::pcReadFrom</a>, <a class="el" href="projdefs_8h_source.html#l00048">pdFAIL</a>, <a class="el" href="projdefs_8h_source.html#l00047">pdPASS</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00806">portASSERT_IF_INTERRUPT_PRIORITY_INVALID</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00286">portCLEAR_INTERRUPT_MASK_FROM_ISR</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00282">portSET_INTERRUPT_MASK_FROM_ISR</a>, <a class="el" href="queue_8c_source.html#l02153">prvCopyDataFromQueue()</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00480">traceQUEUE_PEEK_FROM_ISR</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00504">traceQUEUE_PEEK_FROM_ISR_FAILED</a>, <a class="el" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">QueueDefinition::u</a>, <a class="el" href="queue_8c_source.html#l00113">QueueDefinition::uxItemSize</a>, <a class="el" href="queue_8c_source.html#l00111">QueueDefinition::uxMessagesWaiting</a>, and <a class="el" href="queue_8c_source.html#l00104">QueueDefinition::xQueue</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_af67763957452955ac663c374d71278ce_cgraph.png" border="0" usemap="#aqueue_8c_af67763957452955ac663c374d71278ce_cgraph" alt=""/></div>
<map name="aqueue_8c_af67763957452955ac663c374d71278ce_cgraph" id="aqueue_8c_af67763957452955ac663c374d71278ce_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,153,32"/>
<area shape="rect" href="queue_8c.html#ad9a2e17b2b13d4878f7af1361437320e" title=" " alt="" coords="201,5,363,32"/>
<area shape="poly" title=" " alt="" coords="153,16,185,16,185,21,153,21"/>
</map>
</div>

</div>
</div>
<a id="ad0a166f3b1219a5e37e31f8090d4800d" name="ad0a166f3b1219a5e37e31f8090d4800d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0a166f3b1219a5e37e31f8090d4800d">&#9670;&#160;</a></span>xQueueReceive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xQueueReceive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a></td>          <td class="paramname"><span class="paramname"><em>xQueue</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *const</td>          <td class="paramname"><span class="paramname"><em>pvBuffer</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="portmacro_8h.html#aa69c48c6e902ce54f70886e6573c92a9">TickType_t</a></td>          <td class="paramname"><span class="paramname"><em>xTicksToWait</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l01277">1277</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1278</span>{</div>
<div class="line"><span class="lineno"> 1279</span><a class="code hl_typedef" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xEntryTimeSet = <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a>;</div>
<div class="line"><span class="lineno"> 1280</span><a class="code hl_struct" href="structx_t_i_m_e___o_u_t.html">TimeOut_t</a> xTimeOut;</div>
<div class="line"><span class="lineno"> 1281</span><a class="code hl_struct" href="struct_queue_definition.html">Queue_t</a> * <span class="keyword">const</span> pxQueue = xQueue;</div>
<div class="line"><span class="lineno"> 1282</span> </div>
<div class="line"><span class="lineno"> 1283</span>  <span class="comment">/* Check the pointer is not NULL. */</span></div>
<div class="line"><span class="lineno"> 1284</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( ( pxQueue ) );</div>
<div class="line"><span class="lineno"> 1285</span> </div>
<div class="line"><span class="lineno"> 1286</span>  <span class="comment">/* The buffer into which data is received can only be NULL if the data size</span></div>
<div class="line"><span class="lineno"> 1287</span><span class="comment">  is zero (so no data is copied into the buffer. */</span></div>
<div class="line"><span class="lineno"> 1288</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( !( ( ( pvBuffer ) == NULL ) &amp;&amp; ( ( pxQueue )-&gt;uxItemSize != ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0U ) ) );</div>
<div class="line"><span class="lineno"> 1289</span> </div>
<div class="line"><span class="lineno"> 1290</span>  <span class="comment">/* Cannot block if the scheduler is suspended. */</span></div>
<div class="line"><span class="lineno"> 1291</span><span class="preprocessor">  #if ( ( INCLUDE_xTaskGetSchedulerState == 1 ) || ( configUSE_TIMERS == 1 ) )</span></div>
<div class="line"><span class="lineno"> 1292</span>  {</div>
<div class="line"><span class="lineno"> 1293</span>    <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( !( ( <a class="code hl_function" href="task_8h.html#a0241000e08a261372186d34825a35979">xTaskGetSchedulerState</a>() == <a class="code hl_define" href="task_8h.html#a0cad071ca127a35df93166e9ed5b6ada">taskSCHEDULER_SUSPENDED</a> ) &amp;&amp; ( xTicksToWait != 0 ) ) );</div>
<div class="line"><span class="lineno"> 1294</span>  }</div>
<div class="line"><span class="lineno"> 1295</span><span class="preprocessor">  #endif</span></div>
<div class="line"><span class="lineno"> 1296</span> </div>
<div class="line"><span class="lineno"> 1297</span> </div>
<div class="line"><span class="lineno"> 1298</span>  <span class="comment">/*lint -save -e904  This function relaxes the coding standard somewhat to</span></div>
<div class="line"><span class="lineno"> 1299</span><span class="comment">  allow return statements within the function itself.  This is done in the</span></div>
<div class="line"><span class="lineno"> 1300</span><span class="comment">  interest of execution time efficiency. */</span></div>
<div class="line"><span class="lineno"> 1301</span>  <span class="keywordflow">for</span>( ;; )</div>
<div class="line"><span class="lineno"> 1302</span>  {</div>
<div class="line"><span class="lineno"> 1303</span>    <a class="code hl_define" href="task_8h.html#ab7bf0ae866292ba8296091a9d5209689">taskENTER_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1304</span>    {</div>
<div class="line"><span class="lineno"> 1305</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxMessagesWaiting = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a>;</div>
<div class="line"><span class="lineno"> 1306</span> </div>
<div class="line"><span class="lineno"> 1307</span>      <span class="comment">/* Is there data in the queue now?  To be running the calling task</span></div>
<div class="line"><span class="lineno"> 1308</span><span class="comment">      must be the highest priority task wanting to access the queue. */</span></div>
<div class="line"><span class="lineno"> 1309</span>      <span class="keywordflow">if</span>( uxMessagesWaiting &gt; ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0 )</div>
<div class="line"><span class="lineno"> 1310</span>      {</div>
<div class="line"><span class="lineno"> 1311</span>        <span class="comment">/* Data available, remove one item. */</span></div>
<div class="line"><span class="lineno"> 1312</span>        <a class="code hl_function" href="#ad9a2e17b2b13d4878f7af1361437320e">prvCopyDataFromQueue</a>( pxQueue, pvBuffer );</div>
<div class="line"><span class="lineno"> 1313</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#a82b39aa722910a5e43793e882ded0faf">traceQUEUE_RECEIVE</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1314</span>        pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a> = uxMessagesWaiting - ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 1;</div>
<div class="line"><span class="lineno"> 1315</span> </div>
<div class="line"><span class="lineno"> 1316</span>        <span class="comment">/* There is now space in the queue, were any tasks waiting to</span></div>
<div class="line"><span class="lineno"> 1317</span><span class="comment">        post to the queue?  If so, unblock the highest priority waiting</span></div>
<div class="line"><span class="lineno"> 1318</span><span class="comment">        task. */</span></div>
<div class="line"><span class="lineno"> 1319</span>        <span class="keywordflow">if</span>( <a class="code hl_define" href="list_8h.html#aaba6eb05d67ebc8026bea29193eca28f">listLIST_IS_EMPTY</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#aaab135c4345cb0393d6ff3cd5164c7b2">xTasksWaitingToSend</a> ) ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1320</span>        {</div>
<div class="line"><span class="lineno"> 1321</span>          <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a14513b7dd36055f73fba3c5ebbdc1b06">xTaskRemoveFromEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#aaab135c4345cb0393d6ff3cd5164c7b2">xTasksWaitingToSend</a> ) ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1322</span>          {</div>
<div class="line"><span class="lineno"> 1323</span>            <a class="code hl_define" href="#adb4472163ac5b0e8ad72183d69387b81">queueYIELD_IF_USING_PREEMPTION</a>();</div>
<div class="line"><span class="lineno"> 1324</span>          }</div>
<div class="line"><span class="lineno"> 1325</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1326</span>          {</div>
<div class="line"><span class="lineno"> 1327</span>            <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1328</span>          }</div>
<div class="line"><span class="lineno"> 1329</span>        }</div>
<div class="line"><span class="lineno"> 1330</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1331</span>        {</div>
<div class="line"><span class="lineno"> 1332</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1333</span>        }</div>
<div class="line"><span class="lineno"> 1334</span> </div>
<div class="line"><span class="lineno"> 1335</span>        <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1336</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="projdefs_8h.html#a07848d3078849bd32353c69d30a479b3">pdPASS</a>;</div>
<div class="line"><span class="lineno"> 1337</span>      }</div>
<div class="line"><span class="lineno"> 1338</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1339</span>      {</div>
<div class="line"><span class="lineno"> 1340</span>        <span class="keywordflow">if</span>( xTicksToWait == ( <a class="code hl_typedef" href="portmacro_8h.html#aa69c48c6e902ce54f70886e6573c92a9">TickType_t</a> ) 0 )</div>
<div class="line"><span class="lineno"> 1341</span>        {</div>
<div class="line"><span class="lineno"> 1342</span>          <span class="comment">/* The queue was empty and no block time is specified (or</span></div>
<div class="line"><span class="lineno"> 1343</span><span class="comment">          the block time has expired) so leave now. */</span></div>
<div class="line"><span class="lineno"> 1344</span>          <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1345</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#a0dbf5969c9d984920177a19d5b402e4e">traceQUEUE_RECEIVE_FAILED</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1346</span>          <span class="keywordflow">return</span> <a class="code hl_define" href="projdefs_8h.html#a4d79b09954b1efa73ad8d87a36b4a575">errQUEUE_EMPTY</a>;</div>
<div class="line"><span class="lineno"> 1347</span>        }</div>
<div class="line"><span class="lineno"> 1348</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( xEntryTimeSet == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1349</span>        {</div>
<div class="line"><span class="lineno"> 1350</span>          <span class="comment">/* The queue was empty and a block time was specified so</span></div>
<div class="line"><span class="lineno"> 1351</span><span class="comment">          configure the timeout structure. */</span></div>
<div class="line"><span class="lineno"> 1352</span>          <a class="code hl_function" href="task_8h.html#a9bff8681d5ed262e71b92805ca0da909">vTaskInternalSetTimeOutState</a>( &amp;xTimeOut );</div>
<div class="line"><span class="lineno"> 1353</span>          xEntryTimeSet = <a class="code hl_define" href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a>;</div>
<div class="line"><span class="lineno"> 1354</span>        }</div>
<div class="line"><span class="lineno"> 1355</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1356</span>        {</div>
<div class="line"><span class="lineno"> 1357</span>          <span class="comment">/* Entry time was already set. */</span></div>
<div class="line"><span class="lineno"> 1358</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1359</span>        }</div>
<div class="line"><span class="lineno"> 1360</span>      }</div>
<div class="line"><span class="lineno"> 1361</span>    }</div>
<div class="line"><span class="lineno"> 1362</span>    <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1363</span> </div>
<div class="line"><span class="lineno"> 1364</span>    <span class="comment">/* Interrupts and other tasks can send to and receive from the queue</span></div>
<div class="line"><span class="lineno"> 1365</span><span class="comment">    now the critical section has been exited. */</span></div>
<div class="line"><span class="lineno"> 1366</span> </div>
<div class="line"><span class="lineno"> 1367</span>    <a class="code hl_function" href="task_8h.html#a366b302eba79d10b5ee2a3756f0fcc43">vTaskSuspendAll</a>();</div>
<div class="line"><span class="lineno"> 1368</span>    <a class="code hl_define" href="#ae4efd14c0f4dee7f189ef2e4d9ce1f1b">prvLockQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1369</span> </div>
<div class="line"><span class="lineno"> 1370</span>    <span class="comment">/* Update the timeout state to see if it has expired yet. */</span></div>
<div class="line"><span class="lineno"> 1371</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a3b018a85d339e536a6c05748dd666a3a">xTaskCheckForTimeOut</a>( &amp;xTimeOut, &amp;xTicksToWait ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1372</span>    {</div>
<div class="line"><span class="lineno"> 1373</span>      <span class="comment">/* The timeout has not expired.  If the queue is still empty place</span></div>
<div class="line"><span class="lineno"> 1374</span><span class="comment">      the task on the list of tasks waiting to receive from the queue. */</span></div>
<div class="line"><span class="lineno"> 1375</span>      <span class="keywordflow">if</span>( <a class="code hl_function" href="#a8f21d4b7a21be0d109953120c93f6741">prvIsQueueEmpty</a>( pxQueue ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1376</span>      {</div>
<div class="line"><span class="lineno"> 1377</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#a657997eddb8c89bef7157e74bac003e2">traceBLOCKING_ON_QUEUE_RECEIVE</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1378</span>        <a class="code hl_function" href="task_8h.html#a56ae23bc0dece4522d666959902221ca">vTaskPlaceOnEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ), xTicksToWait );</div>
<div class="line"><span class="lineno"> 1379</span>        <a class="code hl_function" href="#a7297c84a7c770ed57567bad1d3e2faf6">prvUnlockQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1380</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a003f8ae6d649225abd030cc76e1c7d0e">xTaskResumeAll</a>() == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1381</span>        {</div>
<div class="line"><span class="lineno"> 1382</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#af4484fc07631a16e45ac5f29a3f0556e">portYIELD_WITHIN_API</a>();</div>
<div class="line"><span class="lineno"> 1383</span>        }</div>
<div class="line"><span class="lineno"> 1384</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1385</span>        {</div>
<div class="line"><span class="lineno"> 1386</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1387</span>        }</div>
<div class="line"><span class="lineno"> 1388</span>      }</div>
<div class="line"><span class="lineno"> 1389</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1390</span>      {</div>
<div class="line"><span class="lineno"> 1391</span>        <span class="comment">/* The queue contains data again.  Loop back to try and read the</span></div>
<div class="line"><span class="lineno"> 1392</span><span class="comment">        data. */</span></div>
<div class="line"><span class="lineno"> 1393</span>        <a class="code hl_function" href="#a7297c84a7c770ed57567bad1d3e2faf6">prvUnlockQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1394</span>        ( void ) <a class="code hl_function" href="task_8h.html#a003f8ae6d649225abd030cc76e1c7d0e">xTaskResumeAll</a>();</div>
<div class="line"><span class="lineno"> 1395</span>      }</div>
<div class="line"><span class="lineno"> 1396</span>    }</div>
<div class="line"><span class="lineno"> 1397</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1398</span>    {</div>
<div class="line"><span class="lineno"> 1399</span>      <span class="comment">/* Timed out.  If there is no data in the queue exit, otherwise loop</span></div>
<div class="line"><span class="lineno"> 1400</span><span class="comment">      back and attempt to read the data. */</span></div>
<div class="line"><span class="lineno"> 1401</span>      <a class="code hl_function" href="#a7297c84a7c770ed57567bad1d3e2faf6">prvUnlockQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1402</span>      ( void ) <a class="code hl_function" href="task_8h.html#a003f8ae6d649225abd030cc76e1c7d0e">xTaskResumeAll</a>();</div>
<div class="line"><span class="lineno"> 1403</span> </div>
<div class="line"><span class="lineno"> 1404</span>      <span class="keywordflow">if</span>( <a class="code hl_function" href="#a8f21d4b7a21be0d109953120c93f6741">prvIsQueueEmpty</a>( pxQueue ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1405</span>      {</div>
<div class="line"><span class="lineno"> 1406</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#a0dbf5969c9d984920177a19d5b402e4e">traceQUEUE_RECEIVE_FAILED</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1407</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="projdefs_8h.html#a4d79b09954b1efa73ad8d87a36b4a575">errQUEUE_EMPTY</a>;</div>
<div class="line"><span class="lineno"> 1408</span>      }</div>
<div class="line"><span class="lineno"> 1409</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1410</span>      {</div>
<div class="line"><span class="lineno"> 1411</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1412</span>      }</div>
<div class="line"><span class="lineno"> 1413</span>    }</div>
<div class="line"><span class="lineno"> 1414</span>  } <span class="comment">/*lint -restore */</span></div>
<div class="line"><span class="lineno"> 1415</span>}</div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_a0dbf5969c9d984920177a19d5b402e4e"><div class="ttname"><a href="_free_r_t_o_s_8h.html#a0dbf5969c9d984920177a19d5b402e4e">traceQUEUE_RECEIVE_FAILED</a></div><div class="ttdeci">#define traceQUEUE_RECEIVE_FAILED(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00484">FreeRTOS.h:484</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_a657997eddb8c89bef7157e74bac003e2"><div class="ttname"><a href="_free_r_t_o_s_8h.html#a657997eddb8c89bef7157e74bac003e2">traceBLOCKING_ON_QUEUE_RECEIVE</a></div><div class="ttdeci">#define traceBLOCKING_ON_QUEUE_RECEIVE(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00378">FreeRTOS.h:378</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_a82b39aa722910a5e43793e882ded0faf"><div class="ttname"><a href="_free_r_t_o_s_8h.html#a82b39aa722910a5e43793e882ded0faf">traceQUEUE_RECEIVE</a></div><div class="ttdeci">#define traceQUEUE_RECEIVE(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00468">FreeRTOS.h:468</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_config_8h_source.html#l00131">configASSERT</a>, <a class="el" href="projdefs_8h_source.html#l00049">errQUEUE_EMPTY</a>, <a class="el" href="list_8h_source.html#l00250">listLIST_IS_EMPTY</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00814">mtCOVERAGE_TEST_MARKER</a>, <a class="el" href="projdefs_8h_source.html#l00044">pdFALSE</a>, <a class="el" href="projdefs_8h_source.html#l00047">pdPASS</a>, <a class="el" href="projdefs_8h_source.html#l00045">pdTRUE</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00746">portYIELD_WITHIN_API</a>, <a class="el" href="queue_8c_source.html#l02153">prvCopyDataFromQueue()</a>, <a class="el" href="queue_8c_source.html#l02291">prvIsQueueEmpty()</a>, <a class="el" href="queue_8c_source.html#l00240">prvLockQueue</a>, <a class="el" href="queue_8c_source.html#l02171">prvUnlockQueue()</a>, <a class="el" href="queue_8c_source.html#l00087">queueYIELD_IF_USING_PREEMPTION</a>, <a class="el" href="task_8h_source.html#l00187">taskENTER_CRITICAL</a>, <a class="el" href="task_8h_source.html#l00202">taskEXIT_CRITICAL</a>, <a class="el" href="task_8h_source.html#l00227">taskSCHEDULER_SUSPENDED</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00378">traceBLOCKING_ON_QUEUE_RECEIVE</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00468">traceQUEUE_RECEIVE</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00484">traceQUEUE_RECEIVE_FAILED</a>, <a class="el" href="queue_8c_source.html#l00111">QueueDefinition::uxMessagesWaiting</a>, <a class="el" href="tasks_8c_source.html#l03265">vTaskInternalSetTimeOutState()</a>, <a class="el" href="tasks_8c_source.html#l03063">vTaskPlaceOnEventList()</a>, <a class="el" href="tasks_8c_source.html#l02109">vTaskSuspendAll()</a>, <a class="el" href="tasks_8c_source.html#l03273">xTaskCheckForTimeOut()</a>, <a class="el" href="task_8h.html#a0241000e08a261372186d34825a35979">xTaskGetSchedulerState()</a>, <a class="el" href="tasks_8c_source.html#l03137">xTaskRemoveFromEventList()</a>, <a class="el" href="tasks_8c_source.html#l02193">xTaskResumeAll()</a>, <a class="el" href="queue_8c_source.html#l00109">QueueDefinition::xTasksWaitingToReceive</a>, and <a class="el" href="queue_8c_source.html#l00108">QueueDefinition::xTasksWaitingToSend</a>.</p>

<p class="reference">Referenced by <a class="el" href="cmsis__os2_8c_source.html#l01791">osMessageQueueGet()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_ad0a166f3b1219a5e37e31f8090d4800d_cgraph.png" border="0" usemap="#aqueue_8c_ad0a166f3b1219a5e37e31f8090d4800d_cgraph" alt=""/></div>
<map name="aqueue_8c_ad0a166f3b1219a5e37e31f8090d4800d_cgraph" id="aqueue_8c_ad0a166f3b1219a5e37e31f8090d4800d_cgraph">
<area shape="rect" title=" " alt="" coords="5,233,117,260"/>
<area shape="rect" href="queue_8c.html#ad9a2e17b2b13d4878f7af1361437320e" title=" " alt="" coords="167,5,329,32"/>
<area shape="poly" title=" " alt="" coords="63,232,73,195,92,144,122,89,141,64,163,42,168,38,172,42,166,46,145,68,126,92,97,146,78,196,68,234"/>
<area shape="rect" href="queue_8c.html#a8f21d4b7a21be0d109953120c93f6741" title=" " alt="" coords="186,56,310,83"/>
<area shape="poly" title=" " alt="" coords="65,232,100,165,128,126,163,93,171,88,174,92,166,97,132,130,104,168,70,234"/>
<area shape="rect" href="queue_8c.html#a7297c84a7c770ed57567bad1d3e2faf6" title=" " alt="" coords="190,259,306,285"/>
<area shape="poly" title=" " alt="" coords="117,252,175,259,174,265,117,257"/>
<area shape="rect" href="tasks_8c.html#a6d21c9054b62d8bc1bfb2724e11578d9" title=" " alt="" coords="393,309,578,336"/>
<area shape="poly" title=" " alt="" coords="73,259,109,304,135,328,166,346,199,356,234,362,306,363,374,353,430,339,432,344,375,358,307,368,234,368,198,361,164,350,132,332,105,308,69,262"/>
<area shape="rect" href="tasks_8c.html#a91fbc7c4b65e32fae51b7d43ebdcb131" title=" " alt="" coords="387,208,583,235"/>
<area shape="poly" title=" " alt="" coords="82,230,119,210,164,193,231,184,298,185,362,192,417,201,416,207,361,197,298,190,231,190,165,199,121,215,84,235"/>
<area shape="rect" href="tasks_8c.html#adc9eb47ceecf7dd7ee325bebff9eafc5" title=" " alt="" coords="169,107,327,133"/>
<area shape="poly" title=" " alt="" coords="72,231,111,191,163,150,187,137,190,142,166,154,114,195,76,235"/>
<area shape="rect" href="tasks_8c.html#a084d232640bd1d04bcac0b8784417015" title=" " alt="" coords="188,309,308,336"/>
<area shape="poly" title=" " alt="" coords="89,258,166,295,184,302,182,307,164,300,86,263"/>
<area shape="rect" href="tasks_8c.html#acfc8de487c86355713d0e8546506d9e4" title=" " alt="" coords="167,208,329,235"/>
<area shape="poly" title=" " alt="" coords="117,236,151,232,152,237,117,242"/>
<area shape="rect" href="task_8h.html#a0241000e08a261372186d34825a35979" title=" " alt="" coords="165,411,331,437"/>
<area shape="poly" title=" " alt="" coords="71,259,106,321,133,358,166,390,185,402,182,406,163,394,129,361,101,324,66,262"/>
<area shape="rect" href="tasks_8c.html#adf830ea0f150fcdfdaa944667137f080" title=" " alt="" coords="188,461,308,488"/>
<area shape="poly" title=" " alt="" coords="68,260,78,297,97,348,126,401,145,426,166,447,176,454,173,458,163,451,141,429,122,404,92,350,73,299,63,261"/>
<area shape="rect" href="tasks_8c.html#a33c369f5f08ab96659f94093fdb985af" title=" " alt="" coords="423,259,548,285"/>
<area shape="poly" title=" " alt="" coords="306,269,407,269,407,275,306,275"/>
<area shape="poly" title=" " alt="" coords="307,282,405,303,404,308,305,287"/>
<area shape="rect" href="tasks_8c.html#ad1b2e4995f863a99cf980836efe330d7" title=" " alt="" coords="639,461,841,488"/>
<area shape="poly" title=" " alt="" coords="509,334,549,362,593,397,616,424,626,436,641,447,652,453,649,457,638,452,622,440,612,427,589,401,546,366,506,339"/>
<area shape="rect" href="list_8c.html#a274fdced76bbdd9d8a4c4840ded2920c" title=" " alt="" coords="689,335,791,361"/>
<area shape="poly" title=" " alt="" coords="579,329,674,339,673,344,578,335"/>
<area shape="rect" href="list_8c.html#a3240bc0f43fcf755be02bfc6de7dc6ef" title=" " alt="" coords="689,220,791,247"/>
<area shape="poly" title=" " alt="" coords="551,306,590,295,696,251,698,256,592,300,553,311"/>
<area shape="rect" href="tasks_8c.html#ab4574e77d9aea876272e563c68f639da" title=" " alt="" coords="379,157,591,184"/>
<area shape="poly" title=" " alt="" coords="314,131,405,151,404,156,313,137"/>
<area shape="rect" href="list_8c.html#a28faa70d3ec4b4f39e53b0fc52d62ecf" title=" " alt="" coords="700,132,780,159"/>
<area shape="poly" title=" " alt="" coords="327,121,685,140,685,145,327,127"/>
<area shape="poly" title=" " alt="" coords="570,182,593,194,610,208,620,223,628,239,641,257,711,322,708,326,637,260,624,242,615,226,606,212,590,198,567,187"/>
<area shape="poly" title=" " alt="" coords="545,182,592,193,674,214,673,219,591,199,544,187"/>
<area shape="poly" title=" " alt="" coords="592,157,685,148,685,153,592,163"/>
<area shape="poly" title=" " alt="" coords="329,219,372,219,372,224,329,224"/>
<area shape="poly" title=" " alt="" coords="308,472,624,472,624,477,308,477"/>
<area shape="poly" title=" " alt="" coords="306,458,330,447,344,435,352,422,362,408,378,396,433,379,511,365,673,349,674,355,512,371,434,384,380,401,365,412,357,425,348,438,332,452,308,463"/>
<area shape="rect" href="tasks_8c.html#a54f31e9aef0eb7b87e48c7d68ecc84c1" title=" " alt="" coords="417,411,554,437"/>
<area shape="poly" title=" " alt="" coords="307,459,404,438,405,444,308,465"/>
<area shape="poly" title=" " alt="" coords="532,408,677,364,679,369,534,413"/>
<area shape="rect" href="cmsis__os2_8c.html#a9ca051aa77e17583aa5a85d5de5c199a" title=" " alt="" coords="668,411,812,437"/>
<area shape="poly" title=" " alt="" coords="554,421,652,421,652,427,554,427"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_ad0a166f3b1219a5e37e31f8090d4800d_icgraph.png" border="0" usemap="#aqueue_8c_ad0a166f3b1219a5e37e31f8090d4800d_icgraph" alt=""/></div>
<map name="aqueue_8c_ad0a166f3b1219a5e37e31f8090d4800d_icgraph" id="aqueue_8c_ad0a166f3b1219a5e37e31f8090d4800d_icgraph">
<area shape="rect" title=" " alt="" coords="517,5,629,32"/>
<area shape="rect" href="cmsis__os2_8c.html#ad90d4959466a7a65105061da8256ab9e" title="Get a Message from a Queue or timeout if Queue is empty." alt="" coords="322,5,469,32"/>
<area shape="poly" title=" " alt="" coords="502,21,470,21,470,16,502,16"/>
<area shape="rect" href="_free_r_t_o_s___queues_2_src_2main_8c.html#a0322cad3bd0e264bdf2104b17b6d971d" title="Function implementing the MessageQueueCon thread." alt="" coords="103,5,274,32"/>
<area shape="poly" title=" " alt="" coords="306,21,274,21,274,16,306,16"/>
<area shape="rect" href="_free_r_t_o_s___queues_2_src_2main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,5,55,32"/>
<area shape="poly" title=" " alt="" coords="87,21,55,21,55,16,87,16"/>
</map>
</div>

</div>
</div>
<a id="ac61ec62828e70ed35d18559a35550462" name="ac61ec62828e70ed35d18559a35550462"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac61ec62828e70ed35d18559a35550462">&#9670;&#160;</a></span>xQueueReceiveFromISR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xQueueReceiveFromISR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a></td>          <td class="paramname"><span class="paramname"><em>xQueue</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *const</td>          <td class="paramname"><span class="paramname"><em>pvBuffer</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> *const</td>          <td class="paramname"><span class="paramname"><em>pxHigherPriorityTaskWoken</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l01785">1785</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1786</span>{</div>
<div class="line"><span class="lineno"> 1787</span><a class="code hl_typedef" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xReturn;</div>
<div class="line"><span class="lineno"> 1788</span><a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxSavedInterruptStatus;</div>
<div class="line"><span class="lineno"> 1789</span><a class="code hl_struct" href="struct_queue_definition.html">Queue_t</a> * <span class="keyword">const</span> pxQueue = xQueue;</div>
<div class="line"><span class="lineno"> 1790</span> </div>
<div class="line"><span class="lineno"> 1791</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1792</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( !( ( pvBuffer == NULL ) &amp;&amp; ( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a> != ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0U ) ) );</div>
<div class="line"><span class="lineno"> 1793</span> </div>
<div class="line"><span class="lineno"> 1794</span>  <span class="comment">/* RTOS ports that support interrupt nesting have the concept of a maximum</span></div>
<div class="line"><span class="lineno"> 1795</span><span class="comment">  system call (or maximum API call) interrupt priority.  Interrupts that are</span></div>
<div class="line"><span class="lineno"> 1796</span><span class="comment">  above the maximum system call priority are kept permanently enabled, even</span></div>
<div class="line"><span class="lineno"> 1797</span><span class="comment">  when the RTOS kernel is in a critical section, but cannot make any calls to</span></div>
<div class="line"><span class="lineno"> 1798</span><span class="comment">  FreeRTOS API functions.  If configASSERT() is defined in FreeRTOSConfig.h</span></div>
<div class="line"><span class="lineno"> 1799</span><span class="comment">  then portASSERT_IF_INTERRUPT_PRIORITY_INVALID() will result in an assertion</span></div>
<div class="line"><span class="lineno"> 1800</span><span class="comment">  failure if a FreeRTOS API function is called from an interrupt that has been</span></div>
<div class="line"><span class="lineno"> 1801</span><span class="comment">  assigned a priority above the configured maximum system call priority.</span></div>
<div class="line"><span class="lineno"> 1802</span><span class="comment">  Only FreeRTOS functions that end in FromISR can be called from interrupts</span></div>
<div class="line"><span class="lineno"> 1803</span><span class="comment">  that have been assigned a priority at or (logically) below the maximum</span></div>
<div class="line"><span class="lineno"> 1804</span><span class="comment">  system call interrupt priority.  FreeRTOS maintains a separate interrupt</span></div>
<div class="line"><span class="lineno"> 1805</span><span class="comment">  safe API to ensure interrupt entry is as fast and as simple as possible.</span></div>
<div class="line"><span class="lineno"> 1806</span><span class="comment">  More information (albeit Cortex-M specific) is provided on the following</span></div>
<div class="line"><span class="lineno"> 1807</span><span class="comment">  link: http://www.freertos.org/RTOS-Cortex-M3-M4.html */</span></div>
<div class="line"><span class="lineno"> 1808</span>  <a class="code hl_define" href="_free_r_t_o_s_8h.html#a10f75d20c71c4289f96d1b89cb6c62e2">portASSERT_IF_INTERRUPT_PRIORITY_INVALID</a>();</div>
<div class="line"><span class="lineno"> 1809</span> </div>
<div class="line"><span class="lineno"> 1810</span>  uxSavedInterruptStatus = <a class="code hl_define" href="_free_r_t_o_s_8h.html#a31b4260dbc1823ba80b578f86eb15a98">portSET_INTERRUPT_MASK_FROM_ISR</a>();</div>
<div class="line"><span class="lineno"> 1811</span>  {</div>
<div class="line"><span class="lineno"> 1812</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxMessagesWaiting = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a>;</div>
<div class="line"><span class="lineno"> 1813</span> </div>
<div class="line"><span class="lineno"> 1814</span>    <span class="comment">/* Cannot block in an ISR, so check there is data available. */</span></div>
<div class="line"><span class="lineno"> 1815</span>    <span class="keywordflow">if</span>( uxMessagesWaiting &gt; ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0 )</div>
<div class="line"><span class="lineno"> 1816</span>    {</div>
<div class="line"><span class="lineno"> 1817</span>      <span class="keyword">const</span> int8_t cRxLock = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#ac750a3f75a6e174adbc697e473a0dd13">cRxLock</a>;</div>
<div class="line"><span class="lineno"> 1818</span> </div>
<div class="line"><span class="lineno"> 1819</span>      <a class="code hl_define" href="_free_r_t_o_s_8h.html#ace59eac86a08f533c19edf91594961c6">traceQUEUE_RECEIVE_FROM_ISR</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1820</span> </div>
<div class="line"><span class="lineno"> 1821</span>      <a class="code hl_function" href="#ad9a2e17b2b13d4878f7af1361437320e">prvCopyDataFromQueue</a>( pxQueue, pvBuffer );</div>
<div class="line"><span class="lineno"> 1822</span>      pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a> = uxMessagesWaiting - ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 1;</div>
<div class="line"><span class="lineno"> 1823</span> </div>
<div class="line"><span class="lineno"> 1824</span>      <span class="comment">/* If the queue is locked the event list will not be modified.</span></div>
<div class="line"><span class="lineno"> 1825</span><span class="comment">      Instead update the lock count so the task that unlocks the queue</span></div>
<div class="line"><span class="lineno"> 1826</span><span class="comment">      will know that an ISR has removed data while the queue was</span></div>
<div class="line"><span class="lineno"> 1827</span><span class="comment">      locked. */</span></div>
<div class="line"><span class="lineno"> 1828</span>      <span class="keywordflow">if</span>( cRxLock == <a class="code hl_define" href="#acdb781ba6b38714cf41f7417de8fe6bf">queueUNLOCKED</a> )</div>
<div class="line"><span class="lineno"> 1829</span>      {</div>
<div class="line"><span class="lineno"> 1830</span>        <span class="keywordflow">if</span>( <a class="code hl_define" href="list_8h.html#aaba6eb05d67ebc8026bea29193eca28f">listLIST_IS_EMPTY</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#aaab135c4345cb0393d6ff3cd5164c7b2">xTasksWaitingToSend</a> ) ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1831</span>        {</div>
<div class="line"><span class="lineno"> 1832</span>          <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a14513b7dd36055f73fba3c5ebbdc1b06">xTaskRemoveFromEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#aaab135c4345cb0393d6ff3cd5164c7b2">xTasksWaitingToSend</a> ) ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1833</span>          {</div>
<div class="line"><span class="lineno"> 1834</span>            <span class="comment">/* The task waiting has a higher priority than us so</span></div>
<div class="line"><span class="lineno"> 1835</span><span class="comment">            force a context switch. */</span></div>
<div class="line"><span class="lineno"> 1836</span>            <span class="keywordflow">if</span>( pxHigherPriorityTaskWoken != NULL )</div>
<div class="line"><span class="lineno"> 1837</span>            {</div>
<div class="line"><span class="lineno"> 1838</span>              *pxHigherPriorityTaskWoken = <a class="code hl_define" href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a>;</div>
<div class="line"><span class="lineno"> 1839</span>            }</div>
<div class="line"><span class="lineno"> 1840</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1841</span>            {</div>
<div class="line"><span class="lineno"> 1842</span>              <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1843</span>            }</div>
<div class="line"><span class="lineno"> 1844</span>          }</div>
<div class="line"><span class="lineno"> 1845</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1846</span>          {</div>
<div class="line"><span class="lineno"> 1847</span>            <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1848</span>          }</div>
<div class="line"><span class="lineno"> 1849</span>        }</div>
<div class="line"><span class="lineno"> 1850</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1851</span>        {</div>
<div class="line"><span class="lineno"> 1852</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1853</span>        }</div>
<div class="line"><span class="lineno"> 1854</span>      }</div>
<div class="line"><span class="lineno"> 1855</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1856</span>      {</div>
<div class="line"><span class="lineno"> 1857</span>        <span class="comment">/* Increment the lock count so the task that unlocks the queue</span></div>
<div class="line"><span class="lineno"> 1858</span><span class="comment">        knows that data was removed while it was locked. */</span></div>
<div class="line"><span class="lineno"> 1859</span>        pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#ac750a3f75a6e174adbc697e473a0dd13">cRxLock</a> = ( int8_t ) ( cRxLock + 1 );</div>
<div class="line"><span class="lineno"> 1860</span>      }</div>
<div class="line"><span class="lineno"> 1861</span> </div>
<div class="line"><span class="lineno"> 1862</span>      xReturn = <a class="code hl_define" href="projdefs_8h.html#a07848d3078849bd32353c69d30a479b3">pdPASS</a>;</div>
<div class="line"><span class="lineno"> 1863</span>    }</div>
<div class="line"><span class="lineno"> 1864</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1865</span>    {</div>
<div class="line"><span class="lineno"> 1866</span>      xReturn = <a class="code hl_define" href="projdefs_8h.html#a99e2866c8cf4fe86db87dab62e7d6aa6">pdFAIL</a>;</div>
<div class="line"><span class="lineno"> 1867</span>      <a class="code hl_define" href="_free_r_t_o_s_8h.html#a1f1f4a1fea93a33050fa6c27c30752d5">traceQUEUE_RECEIVE_FROM_ISR_FAILED</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1868</span>    }</div>
<div class="line"><span class="lineno"> 1869</span>  }</div>
<div class="line"><span class="lineno"> 1870</span>  <a class="code hl_define" href="_free_r_t_o_s_8h.html#a2661e2c5a4e4afe5bef2ebe9872e28b3">portCLEAR_INTERRUPT_MASK_FROM_ISR</a>( uxSavedInterruptStatus );</div>
<div class="line"><span class="lineno"> 1871</span> </div>
<div class="line"><span class="lineno"> 1872</span>  <span class="keywordflow">return</span> xReturn;</div>
<div class="line"><span class="lineno"> 1873</span>}</div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_a1f1f4a1fea93a33050fa6c27c30752d5"><div class="ttname"><a href="_free_r_t_o_s_8h.html#a1f1f4a1fea93a33050fa6c27c30752d5">traceQUEUE_RECEIVE_FROM_ISR_FAILED</a></div><div class="ttdeci">#define traceQUEUE_RECEIVE_FROM_ISR_FAILED(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00500">FreeRTOS.h:500</a></div></div>
<div class="ttc" id="a_free_r_t_o_s_8h_html_ace59eac86a08f533c19edf91594961c6"><div class="ttname"><a href="_free_r_t_o_s_8h.html#ace59eac86a08f533c19edf91594961c6">traceQUEUE_RECEIVE_FROM_ISR</a></div><div class="ttdeci">#define traceQUEUE_RECEIVE_FROM_ISR(pxQueue)</div><div class="ttdef"><b>Definition</b> <a href="_free_r_t_o_s_8h_source.html#l00496">FreeRTOS.h:496</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_config_8h_source.html#l00131">configASSERT</a>, <a class="el" href="queue_8c_source.html#l00115">QueueDefinition::cRxLock</a>, <a class="el" href="list_8h_source.html#l00250">listLIST_IS_EMPTY</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00814">mtCOVERAGE_TEST_MARKER</a>, <a class="el" href="projdefs_8h_source.html#l00048">pdFAIL</a>, <a class="el" href="projdefs_8h_source.html#l00044">pdFALSE</a>, <a class="el" href="projdefs_8h_source.html#l00047">pdPASS</a>, <a class="el" href="projdefs_8h_source.html#l00045">pdTRUE</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00806">portASSERT_IF_INTERRUPT_PRIORITY_INVALID</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00286">portCLEAR_INTERRUPT_MASK_FROM_ISR</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00282">portSET_INTERRUPT_MASK_FROM_ISR</a>, <a class="el" href="queue_8c_source.html#l02153">prvCopyDataFromQueue()</a>, <a class="el" href="queue_8c_source.html#l00052">queueUNLOCKED</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00496">traceQUEUE_RECEIVE_FROM_ISR</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00500">traceQUEUE_RECEIVE_FROM_ISR_FAILED</a>, <a class="el" href="queue_8c_source.html#l00113">QueueDefinition::uxItemSize</a>, <a class="el" href="queue_8c_source.html#l00111">QueueDefinition::uxMessagesWaiting</a>, <a class="el" href="tasks_8c_source.html#l03137">xTaskRemoveFromEventList()</a>, and <a class="el" href="queue_8c_source.html#l00108">QueueDefinition::xTasksWaitingToSend</a>.</p>

<p class="reference">Referenced by <a class="el" href="cmsis__os2_8c_source.html#l01791">osMessageQueueGet()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_ac61ec62828e70ed35d18559a35550462_cgraph.png" border="0" usemap="#aqueue_8c_ac61ec62828e70ed35d18559a35550462_cgraph" alt=""/></div>
<map name="aqueue_8c_ac61ec62828e70ed35d18559a35550462_cgraph" id="aqueue_8c_ac61ec62828e70ed35d18559a35550462_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,168,57"/>
<area shape="rect" href="queue_8c.html#ad9a2e17b2b13d4878f7af1361437320e" title=" " alt="" coords="227,5,390,32"/>
<area shape="poly" title=" " alt="" coords="168,32,211,27,212,32,169,37"/>
<area shape="rect" href="tasks_8c.html#a6d21c9054b62d8bc1bfb2724e11578d9" title=" " alt="" coords="216,56,401,83"/>
<area shape="poly" title=" " alt="" coords="169,51,200,54,200,60,168,56"/>
<area shape="rect" href="tasks_8c.html#ad1b2e4995f863a99cf980836efe330d7" title=" " alt="" coords="449,5,650,32"/>
<area shape="poly" title=" " alt="" coords="375,53,467,33,468,38,376,58"/>
<area shape="rect" href="list_8c.html#a274fdced76bbdd9d8a4c4840ded2920c" title=" " alt="" coords="499,56,601,83"/>
<area shape="poly" title=" " alt="" coords="402,67,483,67,483,72,402,72"/>
<area shape="rect" href="list_8c.html#a3240bc0f43fcf755be02bfc6de7dc6ef" title=" " alt="" coords="499,107,601,133"/>
<area shape="poly" title=" " alt="" coords="376,81,484,104,482,109,375,86"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_ac61ec62828e70ed35d18559a35550462_icgraph.png" border="0" usemap="#aqueue_8c_ac61ec62828e70ed35d18559a35550462_icgraph" alt=""/></div>
<map name="aqueue_8c_ac61ec62828e70ed35d18559a35550462_icgraph" id="aqueue_8c_ac61ec62828e70ed35d18559a35550462_icgraph">
<area shape="rect" title=" " alt="" coords="517,5,680,32"/>
<area shape="rect" href="cmsis__os2_8c.html#ad90d4959466a7a65105061da8256ab9e" title="Get a Message from a Queue or timeout if Queue is empty." alt="" coords="322,5,469,32"/>
<area shape="poly" title=" " alt="" coords="502,21,470,21,470,16,502,16"/>
<area shape="rect" href="_free_r_t_o_s___queues_2_src_2main_8c.html#a0322cad3bd0e264bdf2104b17b6d971d" title="Function implementing the MessageQueueCon thread." alt="" coords="103,5,274,32"/>
<area shape="poly" title=" " alt="" coords="306,21,274,21,274,16,306,16"/>
<area shape="rect" href="_free_r_t_o_s___queues_2_src_2main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,5,55,32"/>
<area shape="poly" title=" " alt="" coords="87,21,55,21,55,16,87,16"/>
</map>
</div>

</div>
</div>
<a id="ade45e48664e5ec17ea091f00cd34394f" name="ade45e48664e5ec17ea091f00cd34394f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade45e48664e5ec17ea091f00cd34394f">&#9670;&#160;</a></span>xQueueSemaphoreTake()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xQueueSemaphoreTake </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="queue_8h.html#a57349603001f8ddf51c888c49e2804d7">QueueHandle_t</a></td>          <td class="paramname"><span class="paramname"><em>xQueue</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="portmacro_8h.html#aa69c48c6e902ce54f70886e6573c92a9">TickType_t</a></td>          <td class="paramname"><span class="paramname"><em>xTicksToWait</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="queue_8c_source.html#l01418">1418</a> of file <a class="el" href="queue_8c_source.html">queue.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1419</span>{</div>
<div class="line"><span class="lineno"> 1420</span><a class="code hl_typedef" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xEntryTimeSet = <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a>;</div>
<div class="line"><span class="lineno"> 1421</span><a class="code hl_struct" href="structx_t_i_m_e___o_u_t.html">TimeOut_t</a> xTimeOut;</div>
<div class="line"><span class="lineno"> 1422</span><a class="code hl_struct" href="struct_queue_definition.html">Queue_t</a> * <span class="keyword">const</span> pxQueue = xQueue;</div>
<div class="line"><span class="lineno"> 1423</span> </div>
<div class="line"><span class="lineno"> 1424</span><span class="preprocessor">#if( configUSE_MUTEXES == 1 )</span></div>
<div class="line"><span class="lineno"> 1425</span>  <a class="code hl_typedef" href="portmacro_8h.html#a46fb21e00ae0729d7515c0fbf2269796">BaseType_t</a> xInheritanceOccurred = <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a>;</div>
<div class="line"><span class="lineno"> 1426</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1427</span> </div>
<div class="line"><span class="lineno"> 1428</span>  <span class="comment">/* Check the queue pointer is not NULL. */</span></div>
<div class="line"><span class="lineno"> 1429</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( ( pxQueue ) );</div>
<div class="line"><span class="lineno"> 1430</span> </div>
<div class="line"><span class="lineno"> 1431</span>  <span class="comment">/* Check this really is a semaphore, in which case the item size will be</span></div>
<div class="line"><span class="lineno"> 1432</span><span class="comment">  0. */</span></div>
<div class="line"><span class="lineno"> 1433</span>  <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a81bb7d3826909244baa9debf5a55abb0">uxItemSize</a> == 0 );</div>
<div class="line"><span class="lineno"> 1434</span> </div>
<div class="line"><span class="lineno"> 1435</span>  <span class="comment">/* Cannot block if the scheduler is suspended. */</span></div>
<div class="line"><span class="lineno"> 1436</span><span class="preprocessor">  #if ( ( INCLUDE_xTaskGetSchedulerState == 1 ) || ( configUSE_TIMERS == 1 ) )</span></div>
<div class="line"><span class="lineno"> 1437</span>  {</div>
<div class="line"><span class="lineno"> 1438</span>    <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( !( ( <a class="code hl_function" href="task_8h.html#a0241000e08a261372186d34825a35979">xTaskGetSchedulerState</a>() == <a class="code hl_define" href="task_8h.html#a0cad071ca127a35df93166e9ed5b6ada">taskSCHEDULER_SUSPENDED</a> ) &amp;&amp; ( xTicksToWait != 0 ) ) );</div>
<div class="line"><span class="lineno"> 1439</span>  }</div>
<div class="line"><span class="lineno"> 1440</span><span class="preprocessor">  #endif</span></div>
<div class="line"><span class="lineno"> 1441</span> </div>
<div class="line"><span class="lineno"> 1442</span> </div>
<div class="line"><span class="lineno"> 1443</span>  <span class="comment">/*lint -save -e904 This function relaxes the coding standard somewhat to allow return</span></div>
<div class="line"><span class="lineno"> 1444</span><span class="comment">  statements within the function itself.  This is done in the interest</span></div>
<div class="line"><span class="lineno"> 1445</span><span class="comment">  of execution time efficiency. */</span></div>
<div class="line"><span class="lineno"> 1446</span>  <span class="keywordflow">for</span>( ;; )</div>
<div class="line"><span class="lineno"> 1447</span>  {</div>
<div class="line"><span class="lineno"> 1448</span>    <a class="code hl_define" href="task_8h.html#ab7bf0ae866292ba8296091a9d5209689">taskENTER_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1449</span>    {</div>
<div class="line"><span class="lineno"> 1450</span>      <span class="comment">/* Semaphores are queues with an item size of 0, and where the</span></div>
<div class="line"><span class="lineno"> 1451</span><span class="comment">      number of messages in the queue is the semaphore&#39;s count value. */</span></div>
<div class="line"><span class="lineno"> 1452</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxSemaphoreCount = pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a>;</div>
<div class="line"><span class="lineno"> 1453</span> </div>
<div class="line"><span class="lineno"> 1454</span>      <span class="comment">/* Is there data in the queue now?  To be running the calling task</span></div>
<div class="line"><span class="lineno"> 1455</span><span class="comment">      must be the highest priority task wanting to access the queue. */</span></div>
<div class="line"><span class="lineno"> 1456</span>      <span class="keywordflow">if</span>( uxSemaphoreCount &gt; ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 0 )</div>
<div class="line"><span class="lineno"> 1457</span>      {</div>
<div class="line"><span class="lineno"> 1458</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#a82b39aa722910a5e43793e882ded0faf">traceQUEUE_RECEIVE</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1459</span> </div>
<div class="line"><span class="lineno"> 1460</span>        <span class="comment">/* Semaphores are queues with a data size of zero and where the</span></div>
<div class="line"><span class="lineno"> 1461</span><span class="comment">        messages waiting is the semaphore&#39;s count.  Reduce the count. */</span></div>
<div class="line"><span class="lineno"> 1462</span>        pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a12b07a40152d0f21488ca06d362d13d1">uxMessagesWaiting</a> = uxSemaphoreCount - ( <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> ) 1;</div>
<div class="line"><span class="lineno"> 1463</span> </div>
<div class="line"><span class="lineno"> 1464</span><span class="preprocessor">        #if ( configUSE_MUTEXES == 1 )</span></div>
<div class="line"><span class="lineno"> 1465</span>        {</div>
<div class="line"><span class="lineno"> 1466</span>          <span class="keywordflow">if</span>( pxQueue-&gt;uxQueueType == <a class="code hl_define" href="#a0799077a434aea43f5cca3cda3625aa8">queueQUEUE_IS_MUTEX</a> )</div>
<div class="line"><span class="lineno"> 1467</span>          {</div>
<div class="line"><span class="lineno"> 1468</span>            <span class="comment">/* Record the information required to implement</span></div>
<div class="line"><span class="lineno"> 1469</span><span class="comment">            priority inheritance should it become necessary. */</span></div>
<div class="line"><span class="lineno"> 1470</span>            pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#adb2c0818274974553c619ff953b6f477">xSemaphore</a>.<a class="code hl_variable" href="struct_semaphore_data.html#ab1ed54c7b39dc45b3c310fae7ad08693">xMutexHolder</a> = <a class="code hl_function" href="task_8h.html#a54430b124666d513049dcbf888e6935f">pvTaskIncrementMutexHeldCount</a>();</div>
<div class="line"><span class="lineno"> 1471</span>          }</div>
<div class="line"><span class="lineno"> 1472</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1473</span>          {</div>
<div class="line"><span class="lineno"> 1474</span>            <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1475</span>          }</div>
<div class="line"><span class="lineno"> 1476</span>        }</div>
<div class="line"><span class="lineno"> 1477</span><span class="preprocessor">        #endif </span><span class="comment">/* configUSE_MUTEXES */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 1478</span> </div>
<div class="line"><span class="lineno"> 1479</span>        <span class="comment">/* Check to see if other tasks are blocked waiting to give the</span></div>
<div class="line"><span class="lineno"> 1480</span><span class="comment">        semaphore, and if so, unblock the highest priority such task. */</span></div>
<div class="line"><span class="lineno"> 1481</span>        <span class="keywordflow">if</span>( <a class="code hl_define" href="list_8h.html#aaba6eb05d67ebc8026bea29193eca28f">listLIST_IS_EMPTY</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#aaab135c4345cb0393d6ff3cd5164c7b2">xTasksWaitingToSend</a> ) ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1482</span>        {</div>
<div class="line"><span class="lineno"> 1483</span>          <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a14513b7dd36055f73fba3c5ebbdc1b06">xTaskRemoveFromEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#aaab135c4345cb0393d6ff3cd5164c7b2">xTasksWaitingToSend</a> ) ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1484</span>          {</div>
<div class="line"><span class="lineno"> 1485</span>            <a class="code hl_define" href="#adb4472163ac5b0e8ad72183d69387b81">queueYIELD_IF_USING_PREEMPTION</a>();</div>
<div class="line"><span class="lineno"> 1486</span>          }</div>
<div class="line"><span class="lineno"> 1487</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1488</span>          {</div>
<div class="line"><span class="lineno"> 1489</span>            <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1490</span>          }</div>
<div class="line"><span class="lineno"> 1491</span>        }</div>
<div class="line"><span class="lineno"> 1492</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1493</span>        {</div>
<div class="line"><span class="lineno"> 1494</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1495</span>        }</div>
<div class="line"><span class="lineno"> 1496</span> </div>
<div class="line"><span class="lineno"> 1497</span>        <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1498</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="projdefs_8h.html#a07848d3078849bd32353c69d30a479b3">pdPASS</a>;</div>
<div class="line"><span class="lineno"> 1499</span>      }</div>
<div class="line"><span class="lineno"> 1500</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1501</span>      {</div>
<div class="line"><span class="lineno"> 1502</span>        <span class="keywordflow">if</span>( xTicksToWait == ( <a class="code hl_typedef" href="portmacro_8h.html#aa69c48c6e902ce54f70886e6573c92a9">TickType_t</a> ) 0 )</div>
<div class="line"><span class="lineno"> 1503</span>        {</div>
<div class="line"><span class="lineno"> 1504</span>          <span class="comment">/* For inheritance to have occurred there must have been an</span></div>
<div class="line"><span class="lineno"> 1505</span><span class="comment">          initial timeout, and an adjusted timeout cannot become 0, as</span></div>
<div class="line"><span class="lineno"> 1506</span><span class="comment">          if it were 0 the function would have exited. */</span></div>
<div class="line"><span class="lineno"> 1507</span><span class="preprocessor">          #if( configUSE_MUTEXES == 1 )</span></div>
<div class="line"><span class="lineno"> 1508</span>          {</div>
<div class="line"><span class="lineno"> 1509</span>            <a class="code hl_define" href="_free_r_t_o_s_config_8h.html#a228c70cd48927d6ab730ed1a6dfbe35f">configASSERT</a>( xInheritanceOccurred == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> );</div>
<div class="line"><span class="lineno"> 1510</span>          }</div>
<div class="line"><span class="lineno"> 1511</span><span class="preprocessor">          #endif </span><span class="comment">/* configUSE_MUTEXES */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 1512</span> </div>
<div class="line"><span class="lineno"> 1513</span>          <span class="comment">/* The semaphore count was 0 and no block time is specified</span></div>
<div class="line"><span class="lineno"> 1514</span><span class="comment">          (or the block time has expired) so exit now. */</span></div>
<div class="line"><span class="lineno"> 1515</span>          <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1516</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#a0dbf5969c9d984920177a19d5b402e4e">traceQUEUE_RECEIVE_FAILED</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1517</span>          <span class="keywordflow">return</span> <a class="code hl_define" href="projdefs_8h.html#a4d79b09954b1efa73ad8d87a36b4a575">errQUEUE_EMPTY</a>;</div>
<div class="line"><span class="lineno"> 1518</span>        }</div>
<div class="line"><span class="lineno"> 1519</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( xEntryTimeSet == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1520</span>        {</div>
<div class="line"><span class="lineno"> 1521</span>          <span class="comment">/* The semaphore count was 0 and a block time was specified</span></div>
<div class="line"><span class="lineno"> 1522</span><span class="comment">          so configure the timeout structure ready to block. */</span></div>
<div class="line"><span class="lineno"> 1523</span>          <a class="code hl_function" href="task_8h.html#a9bff8681d5ed262e71b92805ca0da909">vTaskInternalSetTimeOutState</a>( &amp;xTimeOut );</div>
<div class="line"><span class="lineno"> 1524</span>          xEntryTimeSet = <a class="code hl_define" href="projdefs_8h.html#af268cf937960eb029256bd9c4d949fbe">pdTRUE</a>;</div>
<div class="line"><span class="lineno"> 1525</span>        }</div>
<div class="line"><span class="lineno"> 1526</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1527</span>        {</div>
<div class="line"><span class="lineno"> 1528</span>          <span class="comment">/* Entry time was already set. */</span></div>
<div class="line"><span class="lineno"> 1529</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1530</span>        }</div>
<div class="line"><span class="lineno"> 1531</span>      }</div>
<div class="line"><span class="lineno"> 1532</span>    }</div>
<div class="line"><span class="lineno"> 1533</span>    <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1534</span> </div>
<div class="line"><span class="lineno"> 1535</span>    <span class="comment">/* Interrupts and other tasks can give to and take from the semaphore</span></div>
<div class="line"><span class="lineno"> 1536</span><span class="comment">    now the critical section has been exited. */</span></div>
<div class="line"><span class="lineno"> 1537</span> </div>
<div class="line"><span class="lineno"> 1538</span>    <a class="code hl_function" href="task_8h.html#a366b302eba79d10b5ee2a3756f0fcc43">vTaskSuspendAll</a>();</div>
<div class="line"><span class="lineno"> 1539</span>    <a class="code hl_define" href="#ae4efd14c0f4dee7f189ef2e4d9ce1f1b">prvLockQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1540</span> </div>
<div class="line"><span class="lineno"> 1541</span>    <span class="comment">/* Update the timeout state to see if it has expired yet. */</span></div>
<div class="line"><span class="lineno"> 1542</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a3b018a85d339e536a6c05748dd666a3a">xTaskCheckForTimeOut</a>( &amp;xTimeOut, &amp;xTicksToWait ) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1543</span>    {</div>
<div class="line"><span class="lineno"> 1544</span>      <span class="comment">/* A block time is specified and not expired.  If the semaphore</span></div>
<div class="line"><span class="lineno"> 1545</span><span class="comment">      count is 0 then enter the Blocked state to wait for a semaphore to</span></div>
<div class="line"><span class="lineno"> 1546</span><span class="comment">      become available.  As semaphores are implemented with queues the</span></div>
<div class="line"><span class="lineno"> 1547</span><span class="comment">      queue being empty is equivalent to the semaphore count being 0. */</span></div>
<div class="line"><span class="lineno"> 1548</span>      <span class="keywordflow">if</span>( <a class="code hl_function" href="#a8f21d4b7a21be0d109953120c93f6741">prvIsQueueEmpty</a>( pxQueue ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1549</span>      {</div>
<div class="line"><span class="lineno"> 1550</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#a657997eddb8c89bef7157e74bac003e2">traceBLOCKING_ON_QUEUE_RECEIVE</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1551</span> </div>
<div class="line"><span class="lineno"> 1552</span><span class="preprocessor">        #if ( configUSE_MUTEXES == 1 )</span></div>
<div class="line"><span class="lineno"> 1553</span>        {</div>
<div class="line"><span class="lineno"> 1554</span>          <span class="keywordflow">if</span>( pxQueue-&gt;uxQueueType == <a class="code hl_define" href="#a0799077a434aea43f5cca3cda3625aa8">queueQUEUE_IS_MUTEX</a> )</div>
<div class="line"><span class="lineno"> 1555</span>          {</div>
<div class="line"><span class="lineno"> 1556</span>            <a class="code hl_define" href="task_8h.html#ab7bf0ae866292ba8296091a9d5209689">taskENTER_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1557</span>            {</div>
<div class="line"><span class="lineno"> 1558</span>              xInheritanceOccurred = <a class="code hl_function" href="task_8h.html#aa715a488a6014df5a9393ca38c5938c0">xTaskPriorityInherit</a>( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#adb2c0818274974553c619ff953b6f477">xSemaphore</a>.<a class="code hl_variable" href="struct_semaphore_data.html#ab1ed54c7b39dc45b3c310fae7ad08693">xMutexHolder</a> );</div>
<div class="line"><span class="lineno"> 1559</span>            }</div>
<div class="line"><span class="lineno"> 1560</span>            <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1561</span>          }</div>
<div class="line"><span class="lineno"> 1562</span>          <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1563</span>          {</div>
<div class="line"><span class="lineno"> 1564</span>            <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1565</span>          }</div>
<div class="line"><span class="lineno"> 1566</span>        }</div>
<div class="line"><span class="lineno"> 1567</span><span class="preprocessor">        #endif</span></div>
<div class="line"><span class="lineno"> 1568</span> </div>
<div class="line"><span class="lineno"> 1569</span>        <a class="code hl_function" href="task_8h.html#a56ae23bc0dece4522d666959902221ca">vTaskPlaceOnEventList</a>( &amp;( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#af6d61526f77beee659cd604a0c473359">xTasksWaitingToReceive</a> ), xTicksToWait );</div>
<div class="line"><span class="lineno"> 1570</span>        <a class="code hl_function" href="#a7297c84a7c770ed57567bad1d3e2faf6">prvUnlockQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1571</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="task_8h.html#a003f8ae6d649225abd030cc76e1c7d0e">xTaskResumeAll</a>() == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1572</span>        {</div>
<div class="line"><span class="lineno"> 1573</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#af4484fc07631a16e45ac5f29a3f0556e">portYIELD_WITHIN_API</a>();</div>
<div class="line"><span class="lineno"> 1574</span>        }</div>
<div class="line"><span class="lineno"> 1575</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1576</span>        {</div>
<div class="line"><span class="lineno"> 1577</span>          <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1578</span>        }</div>
<div class="line"><span class="lineno"> 1579</span>      }</div>
<div class="line"><span class="lineno"> 1580</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1581</span>      {</div>
<div class="line"><span class="lineno"> 1582</span>        <span class="comment">/* There was no timeout and the semaphore count was not 0, so</span></div>
<div class="line"><span class="lineno"> 1583</span><span class="comment">        attempt to take the semaphore again. */</span></div>
<div class="line"><span class="lineno"> 1584</span>        <a class="code hl_function" href="#a7297c84a7c770ed57567bad1d3e2faf6">prvUnlockQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1585</span>        ( void ) <a class="code hl_function" href="task_8h.html#a003f8ae6d649225abd030cc76e1c7d0e">xTaskResumeAll</a>();</div>
<div class="line"><span class="lineno"> 1586</span>      }</div>
<div class="line"><span class="lineno"> 1587</span>    }</div>
<div class="line"><span class="lineno"> 1588</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1589</span>    {</div>
<div class="line"><span class="lineno"> 1590</span>      <span class="comment">/* Timed out. */</span></div>
<div class="line"><span class="lineno"> 1591</span>      <a class="code hl_function" href="#a7297c84a7c770ed57567bad1d3e2faf6">prvUnlockQueue</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1592</span>      ( void ) <a class="code hl_function" href="task_8h.html#a003f8ae6d649225abd030cc76e1c7d0e">xTaskResumeAll</a>();</div>
<div class="line"><span class="lineno"> 1593</span> </div>
<div class="line"><span class="lineno"> 1594</span>      <span class="comment">/* If the semaphore count is 0 exit now as the timeout has</span></div>
<div class="line"><span class="lineno"> 1595</span><span class="comment">      expired.  Otherwise return to attempt to take the semaphore that is</span></div>
<div class="line"><span class="lineno"> 1596</span><span class="comment">      known to be available.  As semaphores are implemented by queues the</span></div>
<div class="line"><span class="lineno"> 1597</span><span class="comment">      queue being empty is equivalent to the semaphore count being 0. */</span></div>
<div class="line"><span class="lineno"> 1598</span>      <span class="keywordflow">if</span>( <a class="code hl_function" href="#a8f21d4b7a21be0d109953120c93f6741">prvIsQueueEmpty</a>( pxQueue ) != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1599</span>      {</div>
<div class="line"><span class="lineno"> 1600</span><span class="preprocessor">        #if ( configUSE_MUTEXES == 1 )</span></div>
<div class="line"><span class="lineno"> 1601</span>        {</div>
<div class="line"><span class="lineno"> 1602</span>          <span class="comment">/* xInheritanceOccurred could only have be set if</span></div>
<div class="line"><span class="lineno"> 1603</span><span class="comment">          pxQueue-&gt;uxQueueType == queueQUEUE_IS_MUTEX so no need to</span></div>
<div class="line"><span class="lineno"> 1604</span><span class="comment">          test the mutex type again to check it is actually a mutex. */</span></div>
<div class="line"><span class="lineno"> 1605</span>          <span class="keywordflow">if</span>( xInheritanceOccurred != <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a> )</div>
<div class="line"><span class="lineno"> 1606</span>          {</div>
<div class="line"><span class="lineno"> 1607</span>            <a class="code hl_define" href="task_8h.html#ab7bf0ae866292ba8296091a9d5209689">taskENTER_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1608</span>            {</div>
<div class="line"><span class="lineno"> 1609</span>              <a class="code hl_typedef" href="portmacro_8h.html#a646f89d4298e4f5afd522202b11cb2e6">UBaseType_t</a> uxHighestWaitingPriority;</div>
<div class="line"><span class="lineno"> 1610</span> </div>
<div class="line"><span class="lineno"> 1611</span>              <span class="comment">/* This task blocking on the mutex caused another</span></div>
<div class="line"><span class="lineno"> 1612</span><span class="comment">              task to inherit this task&#39;s priority.  Now this task</span></div>
<div class="line"><span class="lineno"> 1613</span><span class="comment">              has timed out the priority should be disinherited</span></div>
<div class="line"><span class="lineno"> 1614</span><span class="comment">              again, but only as low as the next highest priority</span></div>
<div class="line"><span class="lineno"> 1615</span><span class="comment">              task that is waiting for the same mutex. */</span></div>
<div class="line"><span class="lineno"> 1616</span>              uxHighestWaitingPriority = prvGetDisinheritPriorityAfterTimeout( pxQueue );</div>
<div class="line"><span class="lineno"> 1617</span>              <a class="code hl_function" href="task_8h.html#aa11e6a58d2534fe91ed8ee3a02c9b5e0">vTaskPriorityDisinheritAfterTimeout</a>( pxQueue-&gt;<a class="code hl_variable" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">u</a>.<a class="code hl_variable" href="struct_queue_definition.html#adb2c0818274974553c619ff953b6f477">xSemaphore</a>.<a class="code hl_variable" href="struct_semaphore_data.html#ab1ed54c7b39dc45b3c310fae7ad08693">xMutexHolder</a>, uxHighestWaitingPriority );</div>
<div class="line"><span class="lineno"> 1618</span>            }</div>
<div class="line"><span class="lineno"> 1619</span>            <a class="code hl_define" href="task_8h.html#aac8f36abc45ac4ee714bd6b81e3b1643">taskEXIT_CRITICAL</a>();</div>
<div class="line"><span class="lineno"> 1620</span>          }</div>
<div class="line"><span class="lineno"> 1621</span>        }</div>
<div class="line"><span class="lineno"> 1622</span><span class="preprocessor">        #endif </span><span class="comment">/* configUSE_MUTEXES */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 1623</span> </div>
<div class="line"><span class="lineno"> 1624</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#a0dbf5969c9d984920177a19d5b402e4e">traceQUEUE_RECEIVE_FAILED</a>( pxQueue );</div>
<div class="line"><span class="lineno"> 1625</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="projdefs_8h.html#a4d79b09954b1efa73ad8d87a36b4a575">errQUEUE_EMPTY</a>;</div>
<div class="line"><span class="lineno"> 1626</span>      }</div>
<div class="line"><span class="lineno"> 1627</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1628</span>      {</div>
<div class="line"><span class="lineno"> 1629</span>        <a class="code hl_define" href="_free_r_t_o_s_8h.html#ac77e2af1a6b0d38fbab36cf2aa96f1a8">mtCOVERAGE_TEST_MARKER</a>();</div>
<div class="line"><span class="lineno"> 1630</span>      }</div>
<div class="line"><span class="lineno"> 1631</span>    }</div>
<div class="line"><span class="lineno"> 1632</span>  } <span class="comment">/*lint -restore */</span></div>
<div class="line"><span class="lineno"> 1633</span>}</div>
<div class="ttc" id="atask_8h_html_a54430b124666d513049dcbf888e6935f"><div class="ttname"><a href="task_8h.html#a54430b124666d513049dcbf888e6935f">pvTaskIncrementMutexHeldCount</a></div><div class="ttdeci">TaskHandle_t pvTaskIncrementMutexHeldCount(void) PRIVILEGED_FUNCTION</div></div>
<div class="ttc" id="atask_8h_html_aa11e6a58d2534fe91ed8ee3a02c9b5e0"><div class="ttname"><a href="task_8h.html#aa11e6a58d2534fe91ed8ee3a02c9b5e0">vTaskPriorityDisinheritAfterTimeout</a></div><div class="ttdeci">void vTaskPriorityDisinheritAfterTimeout(TaskHandle_t const pxMutexHolder, UBaseType_t uxHighestPriorityWaitingTask) PRIVILEGED_FUNCTION</div></div>
<div class="ttc" id="atask_8h_html_aa715a488a6014df5a9393ca38c5938c0"><div class="ttname"><a href="task_8h.html#aa715a488a6014df5a9393ca38c5938c0">xTaskPriorityInherit</a></div><div class="ttdeci">BaseType_t xTaskPriorityInherit(TaskHandle_t const pxMutexHolder) PRIVILEGED_FUNCTION</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_free_r_t_o_s_config_8h_source.html#l00131">configASSERT</a>, <a class="el" href="projdefs_8h_source.html#l00049">errQUEUE_EMPTY</a>, <a class="el" href="list_8h_source.html#l00250">listLIST_IS_EMPTY</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00814">mtCOVERAGE_TEST_MARKER</a>, <a class="el" href="projdefs_8h_source.html#l00044">pdFALSE</a>, <a class="el" href="projdefs_8h_source.html#l00047">pdPASS</a>, <a class="el" href="projdefs_8h_source.html#l00045">pdTRUE</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00746">portYIELD_WITHIN_API</a>, <a class="el" href="queue_8c_source.html#l02291">prvIsQueueEmpty()</a>, <a class="el" href="queue_8c_source.html#l00240">prvLockQueue</a>, <a class="el" href="queue_8c_source.html#l02171">prvUnlockQueue()</a>, <a class="el" href="task_8h.html#a54430b124666d513049dcbf888e6935f">pvTaskIncrementMutexHeldCount()</a>, <a class="el" href="queue_8c_source.html#l00065">queueQUEUE_IS_MUTEX</a>, <a class="el" href="queue_8c_source.html#l00087">queueYIELD_IF_USING_PREEMPTION</a>, <a class="el" href="task_8h_source.html#l00187">taskENTER_CRITICAL</a>, <a class="el" href="task_8h_source.html#l00202">taskEXIT_CRITICAL</a>, <a class="el" href="task_8h_source.html#l00227">taskSCHEDULER_SUSPENDED</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00378">traceBLOCKING_ON_QUEUE_RECEIVE</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00468">traceQUEUE_RECEIVE</a>, <a class="el" href="_free_r_t_o_s_8h_source.html#l00484">traceQUEUE_RECEIVE_FAILED</a>, <a class="el" href="struct_queue_definition.html#a93a8f29e573aaa9cbbff7d6f2957ee81">QueueDefinition::u</a>, <a class="el" href="queue_8c_source.html#l00113">QueueDefinition::uxItemSize</a>, <a class="el" href="queue_8c_source.html#l00111">QueueDefinition::uxMessagesWaiting</a>, <a class="el" href="tasks_8c_source.html#l03265">vTaskInternalSetTimeOutState()</a>, <a class="el" href="tasks_8c_source.html#l03063">vTaskPlaceOnEventList()</a>, <a class="el" href="task_8h.html#aa11e6a58d2534fe91ed8ee3a02c9b5e0">vTaskPriorityDisinheritAfterTimeout()</a>, <a class="el" href="tasks_8c_source.html#l02109">vTaskSuspendAll()</a>, <a class="el" href="queue_8c_source.html#l00075">SemaphoreData::xMutexHolder</a>, <a class="el" href="queue_8c_source.html#l00105">QueueDefinition::xSemaphore</a>, <a class="el" href="tasks_8c_source.html#l03273">xTaskCheckForTimeOut()</a>, <a class="el" href="task_8h.html#a0241000e08a261372186d34825a35979">xTaskGetSchedulerState()</a>, <a class="el" href="task_8h.html#aa715a488a6014df5a9393ca38c5938c0">xTaskPriorityInherit()</a>, <a class="el" href="tasks_8c_source.html#l03137">xTaskRemoveFromEventList()</a>, <a class="el" href="tasks_8c_source.html#l02193">xTaskResumeAll()</a>, <a class="el" href="queue_8c_source.html#l00109">QueueDefinition::xTasksWaitingToReceive</a>, and <a class="el" href="queue_8c_source.html#l00108">QueueDefinition::xTasksWaitingToSend</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="queue_8c_ade45e48664e5ec17ea091f00cd34394f_cgraph.png" border="0" usemap="#aqueue_8c_ade45e48664e5ec17ea091f00cd34394f_cgraph" alt=""/></div>
<map name="aqueue_8c_ade45e48664e5ec17ea091f00cd34394f_cgraph" id="aqueue_8c_ade45e48664e5ec17ea091f00cd34394f_cgraph">
<area shape="rect" title=" " alt="" coords="5,304,166,331"/>
<area shape="rect" href="queue_8c.html#a8f21d4b7a21be0d109953120c93f6741" title=" " alt="" coords="242,5,366,32"/>
<area shape="poly" title=" " alt="" coords="86,303,97,254,120,183,137,145,157,108,182,72,212,42,226,32,229,37,215,46,186,76,162,110,141,147,125,185,103,255,92,304"/>
<area shape="rect" href="queue_8c.html#a7297c84a7c770ed57567bad1d3e2faf6" title=" " alt="" coords="246,107,362,133"/>
<area shape="poly" title=" " alt="" coords="91,303,107,270,134,227,169,182,212,143,230,133,233,138,215,148,173,185,138,230,112,273,95,305"/>
<area shape="rect" href="tasks_8c.html#a6d21c9054b62d8bc1bfb2724e11578d9" title=" " alt="" coords="456,224,641,251"/>
<area shape="poly" title=" " alt="" coords="142,301,213,285,440,249,440,254,214,291,143,306"/>
<area shape="rect" href="task_8h.html#a54430b124666d513049dcbf888e6935f" title=" " alt="" coords="214,157,394,200"/>
<area shape="poly" title=" " alt="" coords="100,302,149,261,212,216,233,205,236,210,215,221,152,265,104,306"/>
<area shape="rect" href="tasks_8c.html#a91fbc7c4b65e32fae51b7d43ebdcb131" title=" " alt="" coords="450,280,646,307"/>
<area shape="poly" title=" " alt="" coords="166,311,434,297,435,302,166,316"/>
<area shape="rect" href="tasks_8c.html#adc9eb47ceecf7dd7ee325bebff9eafc5" title=" " alt="" coords="225,56,383,83"/>
<area shape="poly" title=" " alt="" coords="88,303,102,261,127,205,163,144,186,117,212,93,218,88,221,92,215,97,190,120,167,148,131,207,107,263,93,304"/>
<area shape="rect" href="task_8h.html#aa11e6a58d2534fe91ed8ee3a02c9b5e0" title=" " alt="" coords="216,325,392,368"/>
<area shape="poly" title=" " alt="" coords="166,325,200,330,200,335,166,331"/>
<area shape="rect" href="tasks_8c.html#a084d232640bd1d04bcac0b8784417015" title=" " alt="" coords="244,392,364,419"/>
<area shape="poly" title=" " alt="" coords="113,329,159,353,215,378,234,384,232,389,213,382,157,358,110,334"/>
<area shape="rect" href="tasks_8c.html#acfc8de487c86355713d0e8546506d9e4" title=" " alt="" coords="223,443,385,469"/>
<area shape="poly" title=" " alt="" coords="100,329,147,378,180,405,215,428,227,434,224,439,212,433,176,409,144,382,96,333"/>
<area shape="rect" href="task_8h.html#a0241000e08a261372186d34825a35979" title=" " alt="" coords="221,493,387,520"/>
<area shape="poly" title=" " alt="" coords="96,330,113,361,139,401,174,443,215,479,223,484,221,489,212,483,170,447,135,404,108,364,91,332"/>
<area shape="rect" href="task_8h.html#aa715a488a6014df5a9393ca38c5938c0" title=" " alt="" coords="238,544,370,571"/>
<area shape="poly" title=" " alt="" coords="93,330,107,369,132,424,168,481,190,507,215,530,225,536,222,541,212,534,186,511,164,484,128,426,103,371,88,332"/>
<area shape="rect" href="tasks_8c.html#adf830ea0f150fcdfdaa944667137f080" title=" " alt="" coords="244,595,364,621"/>
<area shape="poly" title=" " alt="" coords="92,330,103,378,126,446,142,482,162,518,187,552,215,581,231,591,228,595,212,585,183,555,158,521,137,485,121,448,98,379,87,331"/>
<area shape="rect" href="tasks_8c.html#a33c369f5f08ab96659f94093fdb985af" title=" " alt="" coords="486,157,611,184"/>
<area shape="poly" title=" " alt="" coords="362,129,471,152,470,157,361,134"/>
<area shape="poly" title=" " alt="" coords="363,129,395,143,411,156,420,169,429,181,444,194,486,216,483,220,440,198,425,185,416,172,407,159,393,148,361,134"/>
<area shape="rect" href="tasks_8c.html#ad1b2e4995f863a99cf980836efe330d7" title=" " alt="" coords="702,505,904,532"/>
<area shape="poly" title=" " alt="" coords="632,249,656,266,674,289,682,312,685,335,685,357,685,402,691,426,704,450,729,476,758,496,755,500,726,480,700,454,686,428,680,403,679,357,680,335,677,313,669,292,652,270,629,253"/>
<area shape="rect" href="list_8c.html#a274fdced76bbdd9d8a4c4840ded2920c" title=" " alt="" coords="752,283,854,309"/>
<area shape="poly" title=" " alt="" coords="610,249,737,278,736,283,609,254"/>
<area shape="rect" href="list_8c.html#a3240bc0f43fcf755be02bfc6de7dc6ef" title=" " alt="" coords="752,140,854,167"/>
<area shape="poly" title=" " alt="" coords="590,221,745,170,746,175,592,226"/>
<area shape="rect" href="tasks_8c.html#ab4574e77d9aea876272e563c68f639da" title=" " alt="" coords="442,107,654,133"/>
<area shape="poly" title=" " alt="" coords="372,81,466,100,465,106,371,86"/>
<area shape="rect" href="list_8c.html#a28faa70d3ec4b4f39e53b0fc52d62ecf" title=" " alt="" coords="763,81,843,108"/>
<area shape="poly" title=" " alt="" coords="383,71,748,89,748,95,383,76"/>
<area shape="poly" title=" " alt="" coords="629,131,656,143,696,171,733,205,786,268,782,272,729,209,693,176,653,148,627,136"/>
<area shape="poly" title=" " alt="" coords="655,131,737,142,736,147,655,137"/>
<area shape="poly" title=" " alt="" coords="655,107,748,97,748,103,655,112"/>
<area shape="poly" title=" " alt="" coords="374,440,392,429,410,406,416,383,423,359,440,334,476,311,479,315,444,338,427,361,421,385,414,409,396,433,377,444"/>
<area shape="poly" title=" " alt="" coords="364,595,709,533,709,538,365,600"/>
<area shape="poly" title=" " alt="" coords="363,598,379,591,392,581,408,559,415,537,415,492,416,446,423,423,440,399,461,384,491,369,569,342,657,321,736,305,737,310,658,326,571,347,493,374,464,388,444,403,428,425,421,447,421,492,421,538,413,561,396,585,381,596,365,603"/>
<area shape="rect" href="tasks_8c.html#a54f31e9aef0eb7b87e48c7d68ecc84c1" title=" " alt="" coords="480,413,617,440"/>
<area shape="poly" title=" " alt="" coords="363,594,393,580,434,551,471,516,526,451,530,454,475,520,437,555,395,585,365,598"/>
<area shape="poly" title=" " alt="" coords="576,410,653,371,761,315,763,319,656,376,578,415"/>
<area shape="rect" href="cmsis__os2_8c.html#a9ca051aa77e17583aa5a85d5de5c199a" title=" " alt="" coords="731,413,875,440"/>
<area shape="poly" title=" " alt="" coords="617,424,715,424,715,429,617,429"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_13fd8085552d069c9156e623b39a566a.html">NUCLEO-G0B1RE</a></li><li class="navelem"><a class="el" href="dir_2e221cf3776fa58ad1c2ddf4eb02ea9c.html">FreeRTOS_Queues</a></li><li class="navelem"><a class="el" href="dir_d4388135c15ac065223298aea63db587.html">Middlewares</a></li><li class="navelem"><a class="el" href="dir_0ee14caea69eb7f73ce85200f4eee8ce.html">Third_Party</a></li><li class="navelem"><a class="el" href="dir_897f25f41ca637b818d769bbd52a67ce.html">FreeRTOS</a></li><li class="navelem"><a class="el" href="dir_0785cf3bfb4cba99ab25b093ecdeb7dc.html">Source</a></li><li class="navelem"><a class="el" href="queue_8c.html">queue.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
